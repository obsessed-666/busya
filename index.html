<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>–ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –ë—É—Å—è</title>
<link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  /* ============ Reset & base ============ */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;background:#050511;color:#fff;font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto;overflow:hidden;-webkit-font-smoothing:antialiased}
  img{display:block;max-width:100%;-webkit-user-drag:none;user-select:none}

  /* page container (micro-breathing zoom for cinematic feel) */
  #page{position:relative;min-height:100vh;transform-origin:center center;animation:breathe 22s ease-in-out infinite}
  @keyframes breathe{0%{transform:scale(1)}50%{transform:scale(1.007)}100%{transform:scale(1)}}

  /* ============ backgrounds ============ */
  .bg-dark{position:fixed;inset:0;z-index:-6;background:radial-gradient(circle at 35% 30%, #0f1724 0%, #02030a 70%)}
  .bg-love{position:fixed;inset:0;z-index:-6;display:none;background:linear-gradient(120deg,#2b1055,#7597de,#ff6ec7);background-size:400% 400%;animation:loveShift 20s ease infinite}
  .bg-love::after{content:"";position:absolute;inset:0;background-image:url('hearts-bg.jpg');background-size:cover;background-position:center;opacity:.22}
  @keyframes loveShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  /* layered fog for depth */
  .fog{position:fixed;inset:0;z-index:-5;pointer-events:none;mix-blend-mode:overlay}
  .fog.f1{background:radial-gradient(circle at 25% 25%, rgba(255,255,255,0.02), transparent 12%);animation:f1 36s linear infinite;opacity:.9}
  .fog.f2{background:linear-gradient(180deg, rgba(8,10,14,0.06), rgba(4,4,6,0.18));animation:f2 46s linear infinite;opacity:.85}
  @keyframes f1{0%{transform:translateY(0)}100%{transform:translateY(420px)}}
  @keyframes f2{0%{transform:translateY(0)}100%{transform:translateY(300px)}}

  /* cinematic vignette & glow */
  .cinema{pointer-events:none;position:fixed;inset:0;z-index:6}
  .cinema::before{content:"";position:absolute;inset:0;background:radial-gradient(circle at center, rgba(255,255,255,0.04) 0%, rgba(0,0,0,0.0) 36%, rgba(0,0,0,0.66) 100%);mix-blend-mode:overlay}
  .cinema::after{content:"";position:absolute;inset:0;background:radial-gradient(circle at center, rgba(255,255,255,0.12), transparent 60%);filter:blur(72px);opacity:.34}

  /* ============ intro (cat) ============ */
  #intro{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden}
  #introCanvas{position:absolute;inset:0;z-index:-8;pointer-events:none}
  #cat{z-index:8;width:82vw;max-width:520px;border-radius:18px;box-shadow:0 40px 120px rgba(0,0,0,.75);cursor:pointer;transition:transform .12s linear}
  .hint{position:absolute;bottom:34px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,.85);font-size:13px;z-index:9;padding:8px 12px;border-radius:999px;background:rgba(0,0,0,0.14)}

  /* ============ story block ============ */
  #storyWrap{width:100%;max-width:900px;margin:0 auto;padding:36px 20px;display:none;z-index:8}
  #story{color:#eaeaf0;line-height:1.68;font-size:16px;padding-bottom:120px}
  .story-par{margin-bottom:16px}

  /* spoiler: veil visual (pointer-events:none) but container clickable; beer-word clickable */
  .spoiler{position:relative;margin-top:18px;padding:14px 16px;border-radius:12px;background:linear-gradient(180deg,#0f1016,#0c0c12);cursor:pointer;overflow:visible}
  .spoiler .line{position:relative;z-index:5;color:#fff;font-size:16px}
  .beer-word{color:#ffd166;text-decoration:underline;cursor:pointer;font-weight:700;position:relative;z-index:6;pointer-events:auto}

  .veil{position:absolute;inset:0;z-index:4;pointer-events:none;border-radius:12px;background:
    linear-gradient(120deg, rgba(20,22,28,0.78), rgba(6,8,12,0.9));
    backdrop-filter: blur(9px) saturate(.95);
    mix-blend-mode:overlay;
    transition: transform .55s cubic-bezier(.2,.9,.3,1), opacity .55s}
  .veil::before{content:"";position:absolute;inset:0;background:repeating-linear-gradient(90deg, rgba(255,255,255,0.012) 0 1px, transparent 1px 4px);opacity:.06}
  .spoiler.open .veil{transform:translateY(-120%);opacity:0}

  /* ============ beer physics area ============ */
  #beerLayer{position:fixed;inset:0;z-index:72;pointer-events:none}
  #beerSprite{position:absolute;left:50%;top:-600px;width:180px;transform:translateX(-50%) rotate(0deg);will-change:transform,top;filter:drop-shadow(0 50px 120px rgba(0,0,0,.6));display:none}
  .splash { position:absolute;border-radius:50%;background:radial-gradient(circle,#ffd86a,#c98a2b);opacity:0;pointer-events:none;will-change:transform,opacity }
  .puddle { position:absolute;left:50%;transform:translateX(-50%);bottom:12vh;width:18px;height:8px;border-radius:999px;background:radial-gradient(circle,#ffd86a,#ffb14a);filter:blur(3px);opacity:0;box-shadow:0 10px 28px rgba(0,0,0,.5);will-change:width,height,opacity }
  .ripple { position:absolute;left:50%;transform:translateX(-50%);bottom:12vh;border-radius:50%;background:radial-gradient(circle,#ffd86a44,transparent 60%);opacity:0;will-change:width,height,opacity }

  /* ============ memes (after) ============ */
  .meme{position:fixed;z-index:90;cursor:pointer;transform-origin:center;transition:opacity .45s ease, transform .45s ease;animation:floaty 7s ease-in-out infinite}
  @keyframes floaty{0%{transform:translateY(0)}50%{transform:translateY(-22px)}100%{transform:translateY(0)}}

  /* ============ confession overlay ============ */
  #loveOverlay{position:fixed;inset:0;background:rgba(0,0,0,0.92);display:none;align-items:center;justify-content:center;z-index:110;padding:28px;text-align:center;font-family:'Marck Script',cursive;font-size:22px;line-height:1.6}
  #loveOverlay .confession{max-width:840px;padding:18px}
  #loveOverlay .confession p{opacity:0;transform:translateY(12px);transition:transform .45s ease,opacity .45s ease;margin-bottom:10px;font-size:20px}
  #loveOverlay .heart{display:inline-block;margin-top:14px;font-size:44px;color:#ff4671;cursor:pointer}
  #loveOverlay .heart-label{display:block;margin-top:6px;font-size:14px;color:#ffd6e0}

  /* ============ video overlay ============ */
  #videoOverlay{position:fixed;inset:0;background:rgba(0,0,0,0.96);display:none;align-items:center;justify-content:center;z-index:130;padding:18px}
  #videoOverlay video{width:94vw;max-width:900px;border-radius:12px;box-shadow:0 40px 90px rgba(0,0,0,.7)}
  #videoOverlay .placeholder{color:#fff;opacity:.95;font-size:18px;text-align:center;max-width:80vw}

  /* ============ page shake ============ */
  .page-shake { animation:pageShake 0.54s linear }
  @keyframes pageShake{
    0%{transform:translate(0,0)}20%{transform:translate(-6px,4px)}40%{transform:translate(6px,-6px)}60%{transform:translate(-4px,3px)}80%{transform:translate(4px,-3px)}100%{transform:translate(0,0)}
  }

  /* responsive tweaks */
  @media (min-width:900px){#cat{max-width:560px}.meme{width:160px}#loveOverlay .confession p{font-size:22px}}
  @media (max-width:420px){.meme{width:100px}#loveOverlay .confession p{font-size:18px}#videoOverlay video{width:96vw}}
</style>
</head>
<body>
  <div id="page">
    <!-- backgrounds & cinematic overlay -->
    <canvas id="introCanvas" aria-hidden="true" style="position:fixed;inset:0;z-index:-9;pointer-events:none"></canvas>
    <div class="bg-dark" id="bgDark"></div>
    <div class="fog f1"></div>
    <div class="fog f2"></div>
    <div class="bg-love" id="bgLove"></div>
    <div class="cinema"></div>

    <!-- INTRO -->
    <section id="intro" aria-hidden="false" data-parallax="on">
      <img id="cat" src="cat.jpg" alt="–∫–æ—Ç –ë—É—Å—è ‚Äî –Ω–∞–∂–º–∏" />
      <div class="hint">–Ω–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞ üêæ</div>
    </section>

    <!-- STORY -->
    <section id="storyWrap" aria-hidden="true" style="display:none">
      <div id="story">
        <!-- **–í–û–¢ –¢–í–û–ô –ü–û–õ–ù–´–ô –†–ê–°–°–ö–ê–ó ‚Äî –ù–ï –¢–†–û–ì–ê–õ** -->
        <p class="story-par">–û–¥–Ω–∞–∂–¥—ã —è —Å–∏–¥–µ–ª –∫–∞–∫ –Ω–∏ –≤ —á—ë–º –Ω–µ –±—ã–≤–∞–ª–æ –¥–æ–º–∞, —Å–ª—É—à–∞–ª –≥—Ä—É—Å—Ç–Ω—É—é –º—É–∑—ã–∫—É, —Å–º–æ—Ç—Ä–µ–ª –≤ –æ–∫–Ω–æ, –¥—É–º–∞–ª –æ —Å–≤–æ—ë–º —Ç–ª–µ–Ω–Ω–æ–º –±—É–¥—É—â–µ–º, –∫–∞–∫ –≤–¥—Ä—É–≥‚Ä¶ –∑–≤–æ–Ω–æ–∫ –≤ –¥–≤–µ—Ä—å. –Ø –æ–ø–µ—à–∏–ª, –≤–µ–¥—å –±—ã–ª–æ 3 —á–∞—Å–∞ –Ω–æ—á–∏, –∏ —è –Ω–∏–∫–æ–≥–æ –Ω–µ –∂–¥–∞–ª. –í —Ç–æ—Ç –¥–µ–Ω—å –æ—â—É—â–µ–Ω–∏—è –ø–æ–∏—Å—Ç–∏–Ω–µ –±—ã–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ. –ù–∞ –¥–≤–æ—Ä–µ —Å—Ç–æ—è–ª–∞ –ª—ë–≥–∫–∞—è –¥—ã–º–∫–∞, –∞ –Ω–∞ –Ω–µ–±–µ –æ—Ç—á—ë—Ç–ª–∏–≤–æ –≤–∏–¥–Ω–µ–ª–∞—Å—å —è—Ä–∫–∞—è –ø–æ–ª–Ω–∞—è –ª—É–Ω–∞, –ø—Ä—è–º–æ –∫–∞–∫ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî –º—Ä–∞—á–Ω–∞—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è. –ü–æ–≥–æ–¥–∞ –∑–∞ –æ–∫–Ω–æ–º –ª–∏—à—å –¥–æ–±–∞–≤–ª—è–ª–∞ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–º—É —Å–æ–±—ã—Ç–∏—é.</p>

        <p class="story-par">¬´–£ —Å–æ—Å–µ–¥–∞, –Ω–∞–≤–µ—Ä–Ω–æ–µ, —á—Ç–æ-—Ç–æ —Å—Ç—Ä—è—Å–ª–æ—Å—å¬ª, ‚Äî –ø–æ—á–µ—Å–∞–≤ —Ä–µ–ø—É, –ø–æ–¥—É–º–∞–ª —è. –ù–æ —á—É–≤—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥–∏ –∑–∞—Ç–º–∏–ª–æ –º–æ–π —Ä–∞—Å—Å—É–¥–æ–∫, –∏ —è –º–µ–¥–ª–µ–Ω–Ω–æ, —Ç–∏—Ö–∏–º —à–∞–≥–æ–º –ø–æ–¥–æ—à—ë–ª –∫ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏. –°—Ç–æ—è–ª–∞ –ø–æ–ª–Ω–µ–π—à–∞—è —Ç–∏—à–∏–Ω–∞. –Ø –ø—ã—Ç–∞–ª—Å—è –ø—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è –∫ –∑–≤—É–∫–∞–º –ø–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É –¥–≤–µ—Ä–∏, –Ω–æ –∏—Ö –Ω–µ –±—ã–ª–æ. –Ø —Å—Ç–æ—è–ª —Ç–∞–∫ –≥–¥–µ-—Ç–æ –º–∏–Ω—É—Ç—É, –Ω–æ –ø–æ –æ—â—É—â–µ–Ω–∏—è–º –æ–Ω–∞ –¥–ª–∏–ª–∞—Å—å —Ü–µ–ª—É—é –≤–µ—á–Ω–æ—Å—Ç—å. –í –≥–æ–ª–æ–≤–µ –±—ã–ª–∞ –ª–∏—à—å —Ä–∞—Å—Ç–µ—Ä—è–Ω–Ω–æ—Å—Ç—å –∏ —Å–º—è—Ç–µ–Ω–∏–µ.</p>

        <p class="story-par">–ö–∞–∫ –≤–¥—Ä—É–≥ —è —É—Å–ª—ã—à–∞–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —É–≤–µ—Ä–µ–Ω–Ω–æ –≤–æ–¥–∏–ª –Ω–æ–≥—Ç–µ–º –ø–æ —Å—Ç–∞–ª—å–Ω–æ–º—É –ª–∏—Å—Ç—É. –Ø —Å–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥—Å—è, –≤—Å—ë —Ç–µ–ª–æ —Å –≥–æ–ª–æ–≤—ã –¥–æ –Ω–æ–≥ –ø—Ä–æ–±—Ä–∞–ª–æ –º—É—Ä–∞—à–∫–∞–º–∏, —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Ä–µ–∑–∫–∏–π —Å–∫–∞—á–æ–∫ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞ ‚Äî —Ä–∞–∑—É–º —è–≤–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, —á—Ç–æ —á—Ç–æ-—Ç–æ —Ç—É—Ç –Ω–µ —Ç–∞–∫. –Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏, —Å—Ü–µ–ø–∏–≤ –∑—É–±—ã, –≤—ã–¥–∞–≤–∏–ª –∏–∑ —Å–µ–±—è: ‚ÄûWer ist da?‚Äú –ù–æ, –∫–∞–∫ —è –∏ –æ–∂–∏–¥–∞–ª, –æ—Ç–≤–µ—Ç–∞ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–æ. –õ–∏—à—å —ç—Ç–æ—Ç –¥–æ –¥—Ä–æ–∂–∏ –ø—Ä–æ—Ç–∏–≤–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–Ω–∏–∫–∞–ª –≤ –∫–∞–∂–¥—É—é –∫–ª–µ—Ç–æ—á–∫—É –º–æ–∑–≥–∞‚Ä¶ –û—â—É—â–∞–ª–æ—Å—å, –±—É–¥—Ç–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ —Å –∏–∑–¥—ë–≤–∫–æ–π –≤–æ–¥–∏—Ç –ø–æ –Ω–µ–º—É —Å–∫—Ä–∏–ø—É—á–µ–π –∂–µ–ª–µ–∑—è–∫–æ–π.</p>

        <p class="story-par">–ò –≤–¥—Ä—É–≥ ‚Äî —Ç–∏—à–∏–Ω–∞. –°–Ω–æ–≤–∞. –Ø –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –∫—Ç–æ –±—ã —Ç–æ –Ω–∏ –±—ã–ª –∑–∞ –¥–≤–µ—Ä—å—é, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ç–æ–∂–µ —É—Å–ª—ã—à–∞–ª, –∫–∞–∫ —è —Å—Ç–æ—é –∏ –º–æ–ª—á–∞ —Å–ª—É—à–∞—é, –≤–Ω–∏–º–∞—è —ç—Ç–æ—Ç –ø—Å–∏—Ö–æ–¥–µ–ª–∏—á–µ—Å–∫–∏–π —É–∂–∞—Å. –ì–¥–µ-—Ç–æ —Å–ø—É—Å—Ç—è —Å–µ–∫—É–Ω–¥ 20 —Ä–∞–∑–¥–∞–ª—Å—è –≥—Ä–æ–º–∫–∏–π –∂–µ–ª–µ–∑–Ω—ã–π –∑–≤—É–∫ ‚Äî –∑–≤—É–∫ –ø–∞–¥–µ–Ω–∏—è –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –º–æ–µ–π –≥—Ä—ë–±–∞–Ω–Ω–æ–π –¥–≤–µ—Ä—å—é. –Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Å–ª–æ–Ω–∏–ª —É—Ö–æ –∫ –¥–≤–µ—Ä–∏, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∂–µ —É–ø–∞–ª–æ... –∏ —á—Ç–æ, —á—ë—Ä—Ç –≤–æ–∑—å–º–∏, —Ç—É—Ç –≤–æ–æ–±—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.</p>

        <p class="story-par">–ö–∞–∫ –≤–¥—Ä—É–≥, –∫–∞–∫ –≥—Ä–æ–º —Å—Ä–µ–¥–∏ —è—Å–Ω–æ–≥–æ –¥–Ω—è, –∫–∞–∫ —Å–Ω–µ–≥ –≤ –∏—é–ª–µ, —è —É—Å–ª—ã—à–∞–ª –Ω–µ–∂–Ω—ã–π, –º–∏–ª—ã–π –∏ –¥–æ –±–æ–ª–∏ –∑–Ω–∞–∫–æ–º—ã–π –∂–µ–Ω—Å–∫–∏–π –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–∑–Ω—ë—Å:</p>

        <!-- SPOILER: veil visual - pointer-events none so beer-word is clickable -->
        <div id="finalSpoiler" class="spoiler" role="button" aria-pressed="false" tabindex="0">
          <div class="veil" aria-hidden="true"></div>
          <div class="line">‚Äî –û–π, –∏–∑–≤–∏–Ω–∏, —É –º–µ–Ω—è <span class="beer-word" id="beerWord">–ø–∏–≤–æ</span> —É–ø–∞–ª–æ.</div>
        </div>
      </div>
    </section>

    <!-- BEER PHYSICS LAYER -->
    <div id="beerLayer" aria-hidden="true">
      <img id="beerSprite" src="beer.png" alt="–±–∞–Ω–∫–∞ –ø–∏–≤–∞ (Desperados)" />
      <div id="puddle" class="puddle"></div>
      <div id="ripple" class="ripple"></div>
    </div>

    <!-- CONFESSION / LOVE OVERLAY (TEXT –ù–ï –¢–†–û–ì–ê–õ–ò) -->
    <div id="loveOverlay" role="dialog" aria-hidden="true">
      <div class="confession">
        <!-- –í—Å—Ç–∞–≤–ª–µ–Ω–æ —Ç–æ—á–Ω–æ ‚Äî –Ω–µ –∏–∑–º–µ–Ω—è–ª -->
        <p>–±—É—Å—è, –∫–æ—Ç–∏–∫, —è –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —Ç–æ–±–æ–π –ª–∏—à—å –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥, –Ω–æ –≤–æ –º–Ω–µ —Ç–µ–ø–ª–∏—Ç—Å—è —á—É–≤—Å—Ç–≤–æ, –±—É–¥—Ç–æ —è –∑–Ω–∞–ª —Ç–µ–±—è –≤–æ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω—è—Ö, –≤–µ–¥—å –±–æ–ª–µ–µ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç—á–∞ –Ω–∞ –∑–µ–º–ª–µ –µ—â–µ –Ω–µ –±—ã–ª–æ. –∏ –Ω–µ –±—É–¥–µ—Ç. —Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—Ä–∏—à—å –º–Ω–µ —Ç—É —Å–∞–º—É—é —Ä–∞–¥–æ—Å—Ç—å –∏ —É–ª—ã–±–∫—É, –∫–æ—Ç–æ—Ä—ã—Ö —É –º–µ–Ω—è –æ—á–µ–Ω—å –¥–∞–≤–Ω–æ –Ω–µ –±—ã–ª–æ. –ø–æ–ª–≥–æ–¥–∞ –Ω–∞–∑–∞–¥ —è –∏ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ —Å–º–æ–≥—É –ø–æ–ª—é–±–∏—Ç—å –∫–æ–≥–æ-—Ç–æ —Ç–∞–∫ —Å–∏–ª—å–Ω–æ –∫–∞–∫ —Ç–µ–±—è. –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∂–¥—É –Ω–∞—à–µ–π –≤—Å—Ç—Ä–µ—á–∏, —è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ü–µ–ª—É—é —Ç–µ–±—è –ø–æ–¥ –ø—Ä–∏–ø–µ–≤ —ç—Ç–æ–π –ø–µ—Å–Ω–∏</p>
        <div>
          <span class="heart" id="heartBtn">üíò</span>
          <div class="heart-label">—Å–µ—Ä–¥–µ—á–∫–æ —Ç—ã–∫</div>
        </div>
      </div>
    </div>

    <!-- VIDEO OVERLAY -->
    <div id="videoOverlay" aria-hidden="true">
      <video id="secretVideo" src="video.mp4" controls playsinline webkit-playsinline></video>
      <div class="placeholder" id="videoPlaceholder" style="display:none">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –≤–∏–¥–µ–æ ‚Äî –ø–æ–ª–æ–∂–∏ <b>video.mp4</b> –≤ –∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.</div>
    </div>

    <!-- audio -->
    <audio id="darkMusic" src="dark.mp3" preload="auto"></audio>
    <audio id="loveMusic" src="love.mp3" preload="auto"></audio>

  </div> <!-- /page -->

<script>
/* =========================
   Interactivity & Effects
   =========================
   - preserves user's exact texts (story + confession)
   - physics-based beer fall (lightweight) + splashes/puddle
   - page shake (vibration) on impact
   - audio fade-in everywhere
   - confession appears by lines
   - veil visual doesn't block beer click
   - optimized touches for iPhone 14 Plus
*/

/* Utility: safe query */
const $ = (s)=>document.querySelector(s);

/* Elements */
const page = $('#page');
const intro = $('#intro');
const cat = $('#cat');
const storyWrap = $('#storyWrap');
const finalSpoiler = $('#finalSpoiler');
const beerWord = $('#beerWord');
const beerSprite = $('#beerSprite');
const beerLayer = $('#beerLayer');
const puddle = $('#puddle');
const ripple = $('#ripple');
const bgDark = $('#bgDark');
const bgLove = $('#bgLove');
const darkMusic = $('#darkMusic');
const loveMusic = $('#loveMusic');
const loveOverlay = $('#loveOverlay');
const heartBtn = $('#heartBtn');
const videoOverlay = $('#videoOverlay');
const secretVideo = $('#secretVideo');
const videoPlaceholder = $('#videoPlaceholder');

/* Defaults & safety */
storyWrap.style.display = 'none';
loveOverlay.style.display = 'none';
videoOverlay.style.display = 'none';
beerSprite.style.display = 'none';
puddle.style.opacity = 0;
ripple.style.opacity = 0;
bgDark.style.display = 'block';
bgLove.style.display = 'none';

/* Audio helpers: fade in/out */
function fadeTo(audio, target, ms=800){
  if(!audio) return;
  const start = audio.volume || 0;
  const steps = 20;
  const dt = ms/steps;
  let i=0;
  const t = setInterval(()=> {
    i++;
    audio.volume = Math.max(0, Math.min(1, start + (target-start)*(i/steps)));
    if(i>=steps) clearInterval(t);
  }, dt);
}
function playWithFade(audio, target=0.2, ms=800){
  try{
    audio.volume = 0;
    audio.currentTime = 0;
    const p = audio.play();
    if(p && p.catch) p.catch(()=>{}); // ignore autoplay block
    fadeTo(audio, target, ms);
  }catch(e){}
}

/* Canvas ambience (particles + soft strokes) */
(function canvasAmbience(){
  const canvas = $('#introCanvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let W = canvas.width = window.innerWidth;
  let H = canvas.height = window.innerHeight;
  const parts = [];
  const N = Math.max(20, Math.round((W*H)/120000));
  for(let i=0;i<N;i++){
    parts.push({ x:Math.random()*W, y:Math.random()*H, r:0.6+Math.random()*2.8, vx:(Math.random()*0.6-0.3), vy:(Math.random()*0.4-0.12), a:0.04+Math.random()*0.12 });
  }
  window.addEventListener('resize', ()=>{ W=canvas.width=window.innerWidth; H=canvas.height=window.innerHeight; });
  let t=0;
  function draw(){
    t+=0.01;
    ctx.clearRect(0,0,W,H);
    // soft strokes
    ctx.save(); ctx.globalAlpha = 0.03; ctx.translate(0, Math.sin(t*0.8)*40);
    for(let i=0;i<10;i++){
      ctx.beginPath();
      ctx.moveTo(-200, H*(i/9));
      ctx.bezierCurveTo(W*0.25, H*(i/9)+Math.sin(t*0.6+i)*40, W*0.75, H*(i/9)-Math.sin(t*0.4+i)*40, W+200, H*(i/9));
      ctx.lineWidth = 20 - i; ctx.strokeStyle = '#07121a'; ctx.stroke();
    }
    ctx.restore();
    // particles
    for(const p of parts){
      p.x += p.vx; p.y += p.vy + Math.sin((t + p.x*0.002))*0.12;
      if(p.x < -60) p.x = W+60;
      if(p.x > W+60) p.x = -60;
      if(p.y < -60) p.y = H+60;
      if(p.y > H+60) p.y = -60;
      ctx.beginPath(); ctx.fillStyle = `rgba(255,255,255,${p.a})`; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(draw);
  }
  draw();
})();

/* Parallax for cat (touch-friendly) */
(function catParallax(){
  window.addEventListener('mousemove', e=>{
    const nx = (e.clientX - window.innerWidth/2)/(window.innerWidth/6);
    const ny = (e.clientY - window.innerHeight/2)/(window.innerHeight/8);
    cat.style.transform = `translate(${nx}px, ${ny}px)`;
  }, {passive:true});
  window.addEventListener('touchmove', e=>{
    const t = e.touches[0]; if(!t) return;
    const nx = (t.clientX - window.innerWidth/2)/(window.innerWidth/6);
    const ny = (t.clientY - window.innerHeight/2)/(window.innerHeight/8);
    cat.style.transform = `translate(${nx}px, ${ny}px)`;
  }, {passive:true});
  window.addEventListener('mouseleave', ()=>cat.style.transform='');
})();

/* Open story on cat click/tap (play dark music with fade) */
function openStory(){
  try{ intro.style.display = 'none'; }catch(e){}
  storyWrap.style.display = 'block';
  storyWrap.setAttribute('aria-hidden','false');
  playWithFade(darkMusic, 0.18, 900);
}
cat.addEventListener('click', openStory);
cat.addEventListener('touchend', (ev)=>{ ev.preventDefault(); openStory(); }, {passive:false});

/* Spoiler: clicking container opens veil (unless beer-word clicked which triggers beer) */
finalSpoiler.addEventListener('click', function(ev){
  // if clicked beer-word or its children, let beer handler run
  if(ev.target && ev.target.closest && ev.target.closest('.beer-word')) return;
  if(this.classList.contains('open')) return;
  this.classList.add('open');
  this.setAttribute('aria-pressed','true');
});
finalSpoiler.addEventListener('keydown', ev=>{ if(ev.key==='Enter' || ev.key===' ') { ev.preventDefault(); finalSpoiler.click(); } });

/* ========== PHYSICS: Beer fall (lightweight) ========== */
/* We'll simulate with simple physics: y, vy, angle, av. On collision, bounce + spawn splashes + puddle. */
function simulateBeerFall(){
  beerSprite.style.display = 'block';
  beerLayer.style.pointerEvents = 'none';

  // initial physics state
  const state = {
    x: window.innerWidth/2,
    y: -200,
    vx: (Math.random()*200 - 100) * 0.002, // small lateral drift
    vy: 0,
    angle: Math.random()*30 - 15,
    av: (Math.random()*6 - 3),
    mass: 1.2
  };
  const gravity = 2500; // px/s^2 (tuned)
  const damping = 0.996; // air resistance
  const groundY = window.innerHeight * 0.66;
  let last = performance.now();
  let landed = false;
  let bounceCount = 0;

  // show: position via top + transform
  function update(now){
    const dt = Math.min((now - last)/1000, 0.05);
    last = now;
    state.vy += gravity * dt;
    state.x += state.vx * dt * 1000;
    state.y += state.vy * dt;
    state.vx *= damping;
    state.angle += state.av * dt * 60;
    // apply rotation slow down
    state.av *= 0.998;

    // update DOM
    beerSprite.style.left = `${state.x}px`;
    beerSprite.style.top = `${state.y}px`;
    beerSprite.style.transform = `translateX(-50%) rotate(${state.angle}deg)`;

    // ground collision
    if(state.y >= groundY && !landed){
      // land: bounce
      landed = true;
      bounceCount++;
      // damp velocities
      state.y = groundY;
      state.vy = -state.vy * 0.28; // energy loss
      state.vx *= 0.6;
      state.av *= 0.4;
      // spawn splashes & puddle
      impactEffects();
      // page shake and vibration
      page.classList.add('page-shake');
      if(navigator.vibrate) try{ navigator.vibrate([60,30,60]); }catch(e){}
      setTimeout(()=> page.classList.remove('page-shake'), 680);
    }

    // if bounced, check further bounces (small)
    if(landed && Math.abs(state.vy) > 80 && bounceCount < 5){
      // continue animation until velocities low
      landed = false; // allow next collision
    } else if(landed && Math.abs(state.vy) <= 80){
      // final rest: settle rotation
      state.vy = 0; state.av = 0; state.vx = 0;
      beerSprite.style.top = `${groundY}px`;
      beerSprite.style.transform = `translateX(-50%) rotate(${state.angle}deg)`;
      // finalize: fade out physics loop
      // After short delay, trigger mood switch
      setTimeout(()=> afterLanding(), 700);
      return; // stop updating further physics
    }

    requestAnimationFrame(update);
  }

  // start animation loop
  last = performance.now();
  requestAnimationFrame(update);
}

/* Impact visual effects: splashes, puddle expansion, foam */
function impactEffects(){
  // create many splashes at different offsets
  const splCount = 18;
  const groundY = window.innerHeight * 0.66;
  const centerX = window.innerWidth/2;
  for(let i=0;i<splCount;i++){
    const s = document.createElement('div');
    s.className = 'splash';
    const size = 8 + Math.random()*30;
    s.style.width = size+'px';
    s.style.height = size+'px';
    const xOffset = (Math.random()*420 - 210);
    s.style.left = `calc(50% + ${xOffset}px)`;
    s.style.bottom = '18vh';
    document.body.appendChild(s);
    // animate
    const tx = (Math.random()*300 - 150);
    const ty = -100 - Math.random()*80;
    s.animate([
      { transform: 'translate(0,0) scale(0.4)', opacity:1 },
      { transform: `translate(${tx}px, ${ty}px) scale(${1+Math.random()})`, opacity:0 }
    ], { duration: 900 + Math.random()*600, easing: 'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });
    setTimeout(()=> s.remove(), 1400 + Math.random()*700);
  }

  // puddle expansion
  puddle.style.display = 'block';
  puddle.style.opacity = 1;
  const maxW = Math.min(window.innerWidth * 0.72, 780);
  puddle.animate([{ width: '18px', opacity:1 }, { width: maxW + 'px', opacity:1 }], { duration: 1200, easing: 'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });

  // ripple
  ripple.style.display = 'block';
  ripple.style.opacity = 0.8;
  ripple.animate([{ width:'18px', height:'18px', opacity:.8 }, { width: maxW+'px', height: Math.min(140, maxW/6)+'px', opacity:.12 }], { duration:1100, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });

  // foam particles
  for(let i=0;i<12;i++){
    const foam = document.createElement('div');
    foam.style.position = 'absolute'; foam.style.borderRadius='50%';
    foam.style.left = `calc(50% + ${Math.random()* (maxW) - maxW/2}px)`;
    foam.style.bottom = 'calc(12vh + 4px)';
    const s = 3 + Math.random()*6; foam.style.width = foam.style.height = s + 'px';
    foam.style.background = '#fff6e6'; foam.style.zIndex = 71;
    document.body.appendChild(foam);
    foam.animate([{ transform:'translateY(0)', opacity:1 }, { transform:'translateY(-36px)', opacity:0 }], { duration: 1000 + Math.random()*900, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });
    setTimeout(()=> foam.remove(), 1600 + Math.random()*1000);
  }
}

/* After landing: switch mood, spawn memes (hide old content) */
function afterLanding(){
  // hide current content (story + beer visuals)
  try{ storyWrap.style.display = 'none'; }catch(e){}
  try{ document.getElementById('beerLayer').style.display = 'none'; }catch(e){}
  bgDark.style.display = 'none';
  bgLove.style.display = 'block';
  // audio: fade dark out, play love music with fade
  try{ fadeTo(darkMusic, 0, 600); setTimeout(()=> darkMusic.pause(),650); }catch(e){}
  try{ loveMusic.currentTime = 0; loveMusic.play().catch(()=>{}); fadeTo(loveMusic, 0.22, 900);}catch(e){}
  spawnMemes();
}

/* Spawn memes (large) */
function spawnMemes(){
  const count = 10;
  for(let i=0;i<count;i++){
    const el = document.createElement('img');
    el.src = 'meme.png';
    el.className = 'meme';
    const w = 140 + Math.random()*220; el.style.width = w + 'px';
    el.style.left = (6 + Math.random()*84) + 'vw';
    el.style.top = (6 + Math.random()*80) + 'vh';
    el.style.opacity = 0;
    document.body.appendChild(el);
    setTimeout(()=> el.style.opacity = 1, 120 + Math.random()*600);
    el.addEventListener('click', ()=> {
      document.querySelectorAll('.meme').forEach(m=>m.remove());
      showConfessionOverlay();
    });
    el.addEventListener('touchend', (ev)=>{ ev.preventDefault(); el.click(); }, {passive:false});
  }
}

/* Show confession overlay and animate text lines (per-line) */
function showConfessionOverlay(){
  loveOverlay.style.display = 'flex';
  loveOverlay.setAttribute('aria-hidden','false');
  // animate its paragraph into lines (split by sentences)
  const p = loveOverlay.querySelector('.confession p');
  const text = p.textContent.trim();
  // Split into lines by sentence endings (preserve text)
  const segments = text.split(/(?<=\.)\s+/); // split after punctuation + space
  p.innerHTML = ''; // clear
  segments.forEach((seg, idx)=>{
    const line = document.createElement('p');
    line.textContent = seg.trim();
    p.appendChild(line);
    // stagger reveal
    setTimeout(()=> { line.style.opacity = 1; line.style.transform = 'translateY(0)'; }, 300 + idx*420);
  });
}

/* Heart click -> show video overlay (with fallback) */
heartBtn.addEventListener('click', ()=>{
  loveOverlay.style.display = 'none';
  videoOverlay.style.display = 'flex';
  videoOverlay.setAttribute('aria-hidden','false');
  secretVideo.style.display = 'block';
  secretVideo.play().catch(()=>{});
  setTimeout(()=> {
    if(typeof secretVideo.readyState !== 'undefined' && secretVideo.readyState < 1){
      if(videoPlaceholder) videoPlaceholder.style.display = 'block';
      secretVideo.style.display = 'none';
    }
  }, 900);
  secretVideo.addEventListener('loadeddata', ()=>{ if(videoPlaceholder) videoPlaceholder.style.display='none'; secretVideo.style.display='block'; secretVideo.play().catch(()=>{}); });
  secretVideo.addEventListener('error', ()=>{ if(videoPlaceholder) videoPlaceholder.style.display='block'; secretVideo.style.display='none'; });
});

/* Clicking video overlay background closes */
videoOverlay.addEventListener('click', (ev)=> {
  if(ev.target === videoOverlay || ev.target === videoPlaceholder){
    videoOverlay.style.display = 'none';
    try{ secretVideo.pause(); }catch(e){}
  }
});

/* Play darkMusic safely (volume start 0) if user interacted; otherwise will wait for user gesture later */
darkMusic.volume = 0;
loveMusic.volume = 0;

/* Beer word click: start physics simulation with audio fade-in for impact */
beerWord.addEventListener('click', (ev)=>{
  ev.stopPropagation(); // prevent opening veil
  // ensure we don't double-run
  if(beerSprite.style.display === 'block' && beerSprite.dataset.dropping === '1') return;
  beerSprite.dataset.dropping = '1';
  // prepare audio: ensure dark music fade if not already playing
  try{ if(darkMusic.paused){ playWithFade(darkMusic, 0.12, 600); } }catch(e){}
  // start physics simulation (position beerSprite near top center)
  // set initial pos to center top
  beerSprite.style.left = `${window.innerWidth/2}px`;
  beerSprite.style.top = `-220px`;
  beerSprite.style.transform = `translateX(-50%) rotate(${Math.random()*20-10}deg)`;
  beerSprite.style.display = 'block';
  // run physics
  simulateBeerFall();
});

/* small helper: ensure audio plays only after first user gesture if necessary */
let firstGesture = false;
function onFirstGesture(){
  if(firstGesture) return;
  firstGesture = true;
  // try to play darkMusic muted then pause ‚Äî this helps mobile to enable audio later
  try{ darkMusic.play().catch(()=>{}); darkMusic.pause(); }catch(e){}
  try{ loveMusic.play().catch(()=>{}); loveMusic.pause(); }catch(e){}
}
window.addEventListener('click', onFirstGesture, {once:true});
window.addEventListener('touchstart', onFirstGesture, {once:true,passive:true});

/* Accessibility: open spoiler with keyboard */
finalSpoiler.addEventListener('keydown', (ev)=>{
  if(ev.key === 'Enter' || ev.key === ' '){ ev.preventDefault(); finalSpoiler.click(); }
});

/* End of script */
</script>
</body>
</html>
