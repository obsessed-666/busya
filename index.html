<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
<title>–î–ª—è –ë—É—Å–∏ ‚Äî —Å—é—Ä–ø—Ä–∏–∑</title>

<link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">

<style>
/* ========== Reset & base ========== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:#04050a;color:#fff;font-family:'Cormorant Garamond',serif;overflow:hidden;-webkit-font-smoothing:antialiased}
img{display:block;max-width:100%;user-select:none;-webkit-user-drag:none}

/* page breathing micro-zoom */
#page{position:relative;min-height:100vh;transform-origin:center center;animation:breathe 20s ease-in-out infinite}
@keyframes breathe{0%{transform:scale(1)}50%{transform:scale(1.008)}100%{transform:scale(1)}}

/* ========== Background layers ========== */
.bgDark{position:fixed;inset:0;z-index:-6;background:linear-gradient(180deg,#08101a,#02030a)}
.fog{position:fixed;inset:0;z-index:-5;pointer-events:none;mix-blend-mode:overlay;opacity:.7}
.fog.one{background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.02), transparent 12%);animation:moveFog1 36s linear infinite}
.fog.two{background:linear-gradient(180deg, rgba(10,12,18,0.06), rgba(6,6,8,0.18));animation:moveFog2 44s linear infinite}
@keyframes moveFog1{0%{transform:translateY(0)}100%{transform:translateY(420px)}}
@keyframes moveFog2{0%{transform:translateY(0)}100%{transform:translateY(300px)}}

/* love bg (shown later) */
.bgLove{position:fixed;inset:0;z-index:-6;display:none;background:linear-gradient(120deg,#2b1055,#7597de,#ff6ec7);background-size:400% 400%;animation:loveShift 16s ease infinite}
.bgLove::after{content:"";position:absolute;inset:0;background-image:url('hearts-bg.jpg');background-size:cover;background-position:center;opacity:.25;pointer-events:none}
@keyframes loveShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

/* cinematic overlay (vignette + glow) */
.cinema{pointer-events:none;position:fixed;inset:0;z-index:6}
.cinema::before{content:"";position:absolute;inset:0;background:radial-gradient(circle at center, rgba(255,255,255,0.06) 0%, rgba(0,0,0,0.0) 36%, rgba(0,0,0,0.65) 100%);mix-blend-mode:overlay}
.cinema::after{content:"";position:absolute;inset:0;background:radial-gradient(circle at center, rgba(255,255,255,0.12), transparent 60%);filter:blur(80px);opacity:.32}

/* ========== Intro (canvas particles + cat) ========== */
#intro{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden}
#introCanvas{position:absolute;inset:0;z-index:-8;pointer-events:none}
#cat{z-index:8;width:82vw;max-width:460px;border-radius:18px;box-shadow:0 40px 110px rgba(0,0,0,.75);cursor:pointer;transition:transform .36s cubic-bezier(.2,.9,.3,1)}
#cat:active{transform:scale(.995)}
.hint{position:absolute;bottom:36px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,.82);font-size:14px;z-index:9;padding:8px 12px;border-radius:999px;background:rgba(0,0,0,0.14)}

/* subtle parallax for cat relative to mouse */
#intro[data-parallax="on"] #cat{transition:transform .12s linear}

/* ========== Story content ========== */
#storyWrap{width:100%;max-width:860px;margin:0 auto;padding:34px;display:none;z-index:8}
#story{color:#eaeaf0;line-height:1.72;font-size:16px;padding-bottom:120px}
.story-par{margin-bottom:16px}

/* spoiler - visually blurred cover but it doesn't block clicks to inner beer-word */
.spoiler{position:relative;margin-top:18px;padding:14px 16px;border-radius:12px;background:linear-gradient(180deg,#0f1016,#0b0b11);cursor:pointer;overflow:visible}
.spoiler-cover{position:absolute;inset:0;background:rgba(8,10,14,0.86);backdrop-filter:blur(8px);z-index:3;transition:transform .55s ease,opacity .55s ease;pointer-events:none}
.spoiler-cover::after{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:8px;height:8px;border-radius:50%;background:linear-gradient(90deg,#fff,#ddd);opacity:.14;animation:hintPulse 1.8s infinite}
@keyframes hintPulse{0%{opacity:.06;transform:translate(-50%,-50%) scale(.9)}50%{opacity:.2;transform:translate(-50%,-52%) scale(1.06)}100%{opacity:.06;transform:translate(-50%,-50%) scale(.9)}
.spoiler.open .spoiler-cover{transform:translateY(-120%);opacity:0}
.line{position:relative;z-index:2;color:#fff;font-size:16px}
.beer-word{color:#ffd166;text-decoration:underline;cursor:pointer;font-weight:700}

/* ========== Beer scene (improved) ========== */
#beerLayer{position:fixed;inset:0;z-index:70;pointer-events:none}
#beerImg{position:absolute;left:50%;top:-460px;transform:translateX(-50%) rotate(0deg);width:180px;display:none;filter:drop-shadow(0 50px 120px rgba(0,0,0,.6))}
.puddle{position:absolute;left:50%;transform:translateX(-50%);bottom:12vh;width:18px;height:8px;border-radius:999px;background:radial-gradient(circle,#ffd86a,#ffb14a);filter:blur(3px);opacity:0;box-shadow:0 6px 18px rgba(0,0,0,.45)}
/* ripple element */
.ripple{position:absolute;left:50%;transform:translateX(-50%);bottom:12vh;border-radius:50%;background:radial-gradient(circle,#ffd86a44, transparent 60%);width:10px;height:10px;opacity:0;pointer-events:none;z-index:69}
.foam{position:absolute;left:50%;transform:translateX(-50%);bottom:calc(12vh + 6px);width:4px;height:4px;border-radius:50%;background:#fff6e6;opacity:0;pointer-events:none}

/* page shake class */
.shake{animation:shakeAnim .48s linear}
@keyframes shakeAnim{0%{transform:translate(0,0)}20%{transform:translate(-6px,4px)}40%{transform:translate(6px,-6px)}60%{transform:translate(-4px,3px)}80%{transform:translate(4px,-3px)}100%{transform:translate(0,0)}}

/* ========== Memes (big) ========== */
.meme{position:fixed;z-index:90;cursor:pointer;transform-origin:center;transition:opacity .45s ease, transform .45s ease;animation:floaty 6s ease-in-out infinite}
@keyframes floaty{0%{transform:translateY(0)}50%{transform:translateY(-22px)}100%{transform:translateY(0)}}

/* hearts after love transition */
.heartFloat{position:fixed;z-index:85;pointer-events:none;opacity:0.95}

/* ========== Love overlay (confession) ========== */
#loveOverlay{position:fixed;inset:0;background:rgba(0,0,0,0.92);display:none;align-items:center;justify-content:center;z-index:110;padding:28px;text-align:center;font-family:'Marck Script',cursive;font-size:22px;line-height:1.6}
#loveOverlay .heartBtn{display:inline-block;margin-left:10px;font-size:40px;color:#ff4671;cursor:pointer;transition:transform .25s}

/* ========== Video overlay ========== */
#videoOverlay{position:fixed;inset:0;background:rgba(0,0,0,0.96);display:none;align-items:center;justify-content:center;z-index:130;padding:18px}
#videoOverlay video{width:94vw;max-width:900px;border-radius:12px;box-shadow:0 40px 70px rgba(0,0,0,.7)}
#videoOverlay .placeholder{color:#fff;opacity:.95;font-size:18px;text-align:center;max-width:80vw}

/* responsive tweaks */
@media (min-width:900px){#cat{max-width:560px}.meme{width:160px}#loveOverlay{font-size:28px}}
@media (max-width:420px){.meme{width:100px}#loveOverlay{font-size:18px}#videoOverlay video{width:96vw}.line{font-size:15px}}
</style>
</head>
<body>
  <div id="page">
    <!-- backgrounds & overlays -->
    <canvas id="introCanvas" aria-hidden="true" style="position:fixed;inset:0;z-index:-8;pointer-events:none"></canvas>
    <div class="bgDark" id="bgDark" aria-hidden="true"></div>
    <div class="fog one" aria-hidden="true"></div>
    <div class="fog two" aria-hidden="true"></div>
    <div class="bgLove" id="bgLove" aria-hidden="true"></div>
    <div class="cinema" aria-hidden="true"></div>

    <!-- intro with cat -->
    <section id="intro" aria-hidden="false">
      <img id="cat" src="cat.jpg" alt="–∫–æ—Ç –ë—É—Å—è ‚Äî –Ω–∞–∂–º–∏" />
      <div class="hint">–Ω–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞ üêæ</div>
    </section>

    <!-- STORY (hidden until cat click) -->
    <section id="storyWrap" aria-hidden="true" style="display:none">
      <div id="story">
        <p class="story-par">–û–¥–Ω–∞–∂–¥—ã —è —Å–∏–¥–µ–ª –∫–∞–∫ –Ω–∏ –≤ —á—ë–º –Ω–µ –±—ã–≤–∞–ª–æ –¥–æ–º–∞, —Å–ª—É—à–∞–ª –≥—Ä—É—Å—Ç–Ω—É—é –º—É–∑—ã–∫—É, —Å–º–æ—Ç—Ä–µ–ª –≤ –æ–∫–Ω–æ, –¥—É–º–∞–ª –æ —Å–≤–æ—ë–º —Ç–ª–µ–Ω–Ω–æ–º –±—É–¥—É—â–µ–º, –∫–∞–∫ –≤–¥—Ä—É–≥‚Ä¶ –∑–≤–æ–Ω–æ–∫ –≤ –¥–≤–µ—Ä—å. –Ø –æ–ø–µ—à–∏–ª, –≤–µ–¥—å –±—ã–ª–æ 3 —á–∞—Å–∞ –Ω–æ—á–∏, –∏ —è –Ω–∏–∫–æ–≥–æ –Ω–µ –∂–¥–∞–ª. –í —Ç–æ—Ç –¥–µ–Ω—å –æ—â—É—â–µ–Ω–∏—è –ø–æ–∏—Å—Ç–∏–Ω–µ –±—ã–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ.</p>

        <p class="story-par">–ù–∞ –¥–≤–æ—Ä–µ —Å—Ç–æ—è–ª–∞ –ª—ë–≥–∫–∞—è –¥—ã–º–∫–∞, –∞ –Ω–∞ –Ω–µ–±–µ –æ—Ç—á—ë—Ç–ª–∏–≤–æ –≤–∏–¥–Ω–µ–ª–∞—Å—å —è—Ä–∫–∞—è –ø–æ–ª–Ω–∞—è –ª—É–Ω–∞, –ø—Ä—è–º–æ –∫–∞–∫ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî –º—Ä–∞—á–Ω–∞—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è. –ü–æ–≥–æ–¥–∞ –∑–∞ –æ–∫–Ω–æ–º –ª–∏—à—å –¥–æ–±–∞–≤–ª—è–ª–∞ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–º—É —Å–æ–±—ã—Ç–∏—é.</p>

        <p class="story-par">¬´–£ —Å–æ—Å–µ–¥–∞, –Ω–∞–≤–µ—Ä–Ω–æ–µ, —á—Ç–æ-—Ç–æ —Å—Ç—Ä—è—Å–ª–æ—Å—å¬ª, ‚Äî –ø–æ—á–µ—Å–∞–≤ —Ä–µ–ø—É, –ø–æ–¥—É–º–∞–ª —è. –ù–æ —á—É–≤—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥–∏ –∑–∞—Ç–º–∏–ª–æ –º–æ–π —Ä–∞—Å—Å—É–¥–æ–∫, –∏ —è –º–µ–¥–ª–µ–Ω–Ω–æ, —Ç–∏—Ö–∏–º —à–∞–≥–æ–º –ø–æ–¥–æ—à—ë–ª –∫ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏.</p>

        <p class="story-par">–°—Ç–æ—è–ª–∞ –ø–æ–ª–Ω–µ–π—à–∞—è —Ç–∏—à–∏–Ω–∞. –Ø –ø—ã—Ç–∞–ª—Å—è –ø—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è –∫ –∑–≤—É–∫–∞–º –ø–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É –¥–≤–µ—Ä–∏, –Ω–æ –∏—Ö –Ω–µ –±—ã–ª–æ. –Ø —Å—Ç–æ—è–ª —Ç–∞–∫ –≥–¥–µ-—Ç–æ –º–∏–Ω—É—Ç—É, –Ω–æ –ø–æ –æ—â—É—â–µ–Ω–∏—è–º –æ–Ω–∞ –¥–ª–∏–ª–∞—Å—å —Ü–µ–ª—É—é –≤–µ—á–Ω–æ—Å—Ç—å. –í –≥–æ–ª–æ–≤–µ –±—ã–ª–∞ –ª–∏—à—å —Ä–∞—Å—Ç–µ—Ä—è–Ω–Ω–æ—Å—Ç—å –∏ —Å–º—è—Ç–µ–Ω–∏–µ.</p>

        <p class="story-par">–ö–∞–∫ –≤–¥—Ä—É–≥ —è —É—Å–ª—ã—à–∞–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —É–≤–µ—Ä–µ–Ω–Ω–æ –≤–æ–¥–∏–ª –Ω–æ–≥—Ç–µ–º –ø–æ —Å—Ç–∞–ª—å–Ω–æ–º—É –ª–∏—Å—Ç—É. –Ø —Å–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥—Å—è, –≤—Å—ë —Ç–µ–ª–æ —Å –≥–æ–ª–æ–≤—ã –¥–æ –Ω–æ–≥ –ø—Ä–æ–±—Ä–∞–ª–æ –º—É—Ä–∞—à–∫–∞–º–∏, —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Ä–µ–∑–∫–∏–π —Å–∫–∞—á–æ–∫ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞ ‚Äî —Ä–∞–∑—É–º —è–≤–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, —á—Ç–æ —á—Ç–æ-—Ç–æ —Ç—É—Ç –Ω–µ —Ç–∞–∫.</p>

        <p class="story-par">–Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏, —Å—Ü–µ–ø–∏–≤ –∑—É–±—ã, –≤—ã–¥–∞–≤–∏–ª –∏–∑ —Å–µ–±—è: ‚ÄûWer ist da?‚Äú –ù–æ, –∫–∞–∫ —è –∏ –æ–∂–∏–¥–∞–ª, –æ—Ç–≤–µ—Ç–∞ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–æ. –õ–∏—à—å —ç—Ç–æ—Ç –¥–æ –¥—Ä–æ–∂–∏ –ø—Ä–æ—Ç–∏–≤–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–Ω–∏–∫–∞–ª –≤ –∫–∞–∂–¥—É—é –∫–ª–µ—Ç–æ—á–∫—É –º–æ–∑–≥–∞‚Ä¶ –û—â—É—â–∞–ª–æ—Å—å, –±—É–¥—Ç–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ —Å –∏–∑–¥—ë–≤–∫–æ–π –≤–æ–¥–∏—Ç –ø–æ –Ω–µ–º—É —Å–∫—Ä–∏–ø—É—á–µ–π –∂–µ–ª–µ–∑—è–∫–æ–π.</p>

        <p class="story-par">–ò –≤–¥—Ä—É–≥ ‚Äî —Ç–∏—à–∏–Ω–∞. –°–Ω–æ–≤–∞.</p>

        <p class="story-par">–Ø –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –∫—Ç–æ –±—ã —Ç–æ –Ω–∏ –±—ã–ª –∑–∞ –¥–≤–µ—Ä—å—é, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ç–æ–∂–µ —É—Å–ª—ã—à–∞–ª, –∫–∞–∫ —è —Å—Ç–æ—é –∏ –º–æ–ª—á–∞ —Å–ª—É—à–∞—é, –≤–Ω–∏–º–∞—è —ç—Ç–æ—Ç –ø—Å–∏—Ö–æ–¥–µ–ª–∏—á–µ—Å–∫–∏–π —É–∂–∞—Å.</p>

        <p class="story-par">–ì–¥–µ-—Ç–æ —Å–ø—É—Å—Ç—è —Å–µ–∫—É–Ω–¥ 20 —Ä–∞–∑–¥–∞–ª—Å—è –≥—Ä–æ–º–∫–∏–π –∂–µ–ª–µ–∑–Ω—ã–π –∑–≤—É–∫ ‚Äî –∑–≤—É–∫ –ø–∞–¥–µ–Ω–∏—è –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –º–æ–µ–π –≥—Ä—ë–±–∞–Ω–Ω–æ–π –¥–≤–µ—Ä—å—é.</p>

        <p class="story-par">–Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Å–ª–æ–Ω–∏–ª —É—Ö–æ –∫ –¥–≤–µ—Ä–∏, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∂–µ —É–ø–∞–ª–æ... –∏ —á—Ç–æ, —á—ë—Ä—Ç –≤–æ–∑—å–º–∏, —Ç—É—Ç –≤–æ–æ–±—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.</p>
        
        <p class="story-par">–ö–∞–∫ –≤–¥—Ä—É–≥, –∫–∞–∫ –≥—Ä–æ–º —Å—Ä–µ–¥–∏ —è—Å–Ω–æ–≥–æ –¥–Ω—è, –∫–∞–∫ —Å–Ω–µ–≥ –≤ –∏—é–ª–µ, —è —É—Å–ª—ã—à–∞–ª –Ω–µ–∂–Ω—ã–π, –º–∏–ª—ã–π –∏ –¥–æ –±–æ–ª–∏ –∑–Ω–∞–∫–æ–º—ã–π –∂–µ–Ω—Å–∫–∏–π –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–∑–Ω—ë—Å:</p>

        <!-- SPOILER (visual cover, but cover has pointer-events:none so inner beer word stays clickable) -->
        <div id="finalSpoiler" class="spoiler" role="button" aria-pressed="false" tabindex="0">
          <div class="spoiler-cover" aria-hidden="true"></div>
          <div class="line">‚Äî –û–π, –∏–∑–≤–∏–Ω–∏, —É –º–µ–Ω—è <span class="beer-word" id="beerWord">–ø–∏–≤–æ</span> —É–ø–∞–ª–æ.</div>
        </div>

      </div>
    </section>

    <!-- Beer visual layer -->
    <div id="beerLayer">
      <img id="beerImg" src="beer.png" alt="–±–∞–Ω–∫–∞" />
      <div class="puddle" id="puddle"></div>
      <div class="ripple" id="ripple"></div>
    </div>

    <!-- Love overlay (confession) -->
    <div id="loveOverlay" role="dialog" aria-hidden="true">
      –±—É—Å—è, –∫–æ—Ç–∏–∫, —è –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —Ç–æ–±–æ–π –ª–∏—à—å –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥, –Ω–æ –≤–æ –º–Ω–µ —Ç–µ–ø–ª–∏—Ç—Å—è —á—É–≤—Å—Ç–≤–æ, –±—É–¥—Ç–æ —è –∑–Ω–∞–ª —Ç–µ–±—è –≤–æ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω—è—Ö, –≤–µ–¥—å –±–æ–ª–µ–µ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç—á–∞ –Ω–∞ –∑–µ–º–ª–µ –µ—â–µ –Ω–µ –±—ã–ª–æ. –∏ –Ω–µ –±—É–¥–µ—Ç. —Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—Ä–∏—à—å –º–Ω–µ —Ç—É —Å–∞–º—É—é —Ä–∞–¥–æ—Å—Ç—å –∏ —É–ª—ã–±–∫—É, –∫–æ—Ç–æ—Ä—ã—Ö —É –º–µ–Ω—è –æ—á–µ–Ω—å –¥–∞–≤–Ω–æ –Ω–µ –±—ã–ª–æ. –ø–æ–ª–≥–æ–¥–∞ –Ω–∞–∑–∞–¥ —è –∏ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ —Å–º–æ–≥—É –ø–æ–ª—é–±–∏—Ç—å –∫–æ–≥–æ-—Ç–æ —Ç–∞–∫ —Å–∏–ª—å–Ω–æ –∫–∞–∫ —Ç–µ–±—è. –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∂–¥—É –Ω–∞—à–µ–π –≤—Å—Ç—Ä–µ—á–∏, —è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ü–µ–ª—É—é —Ç–µ–±—è –ø–æ–¥ –ø—Ä–∏–ø–µ–≤ —ç—Ç–æ–π –ø–µ—Å–Ω–∏
      <div style="margin-top:18px"><span class="heartBtn" id="heartBtn">üíò</span></div>
    </div>

    <!-- Video overlay -->
    <div id="videoOverlay" aria-hidden="true">
      <video id="secretVideo" src="video.mp4" controls playsinline webkit-playsinline></video>
      <div class="placeholder" id="videoPlaceholder" style="display:none">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –≤–∏–¥–µ–æ ‚Äî –ø–æ–ª–æ–∂–∏ <b>video.mp4</b> –≤ –∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.</div>
    </div>

    <!-- audio -->
    <audio id="darkMusic" src="dark.mp3" preload="auto"></audio>
    <audio id="loveMusic" src="love.mp3" preload="auto"></audio>
  </div>

<script>
/* =========================
   Interactive logic & effects
   ========================= */
window.addEventListener('load', () => {

  // Elements
  const page = document.getElementById('page');
  const intro = document.getElementById('intro');
  const cat = document.getElementById('cat');
  const storyWrap = document.getElementById('storyWrap');
  const finalSpoiler = document.getElementById('finalSpoiler');
  const beerWord = document.getElementById('beerWord');
  const beerImg = document.getElementById('beerImg');
  const beerLayer = document.getElementById('beerLayer');
  const puddle = document.getElementById('puddle');
  const ripple = document.getElementById('ripple');
  const bgDark = document.getElementById('bgDark');
  const bgLove = document.getElementById('bgLove');
  const darkMusic = document.getElementById('darkMusic');
  const loveMusic = document.getElementById('loveMusic');
  const loveOverlay = document.getElementById('loveOverlay');
  const heartBtn = document.getElementById('heartBtn');
  const videoOverlay = document.getElementById('videoOverlay');
  const secretVideo = document.getElementById('secretVideo');
  const videoPlaceholder = document.getElementById('videoPlaceholder');

  // defensive defaults
  storyWrap.style.display = 'none';
  loveOverlay.style.display = 'none';
  videoOverlay.style.display = 'none';
  beerImg.style.display = 'none';
  puddle.style.opacity = 0;
  ripple.style.opacity = 0;
  bgDark.style.display = 'block';
  bgLove.style.display = 'none';

  // quieter music
  try { darkMusic.volume = 0.18; loveMusic.volume = 0.18; } catch(e){}

  /* ---------- Canvas intro particles (and subtle pattern) ---------- */
  const canvas = document.getElementById('introCanvas');
  (function canvasInit(){
    if(!canvas) return;
    const ctx = canvas.getContext('2d');
    let W = canvas.width = window.innerWidth;
    let H = canvas.height = window.innerHeight;
    const particles = [];
    const COUNT = Math.max(28, Math.round((W*H)/90000));
    for(let i=0;i<COUNT;i++){
      particles.push({
        x: Math.random()*W,
        y: Math.random()*H,
        r: 0.6 + Math.random()*2.6,
        vx: (Math.random()*0.6-0.3),
        vy: (Math.random()*0.4-0.12),
        a: 0.04 + Math.random()*0.12
      });
    }
    window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; });
    let t = 0;
    function draw(){
      t += 0.01;
      ctx.clearRect(0,0,W,H);
      // soft animated pattern lines (gives depth)
      ctx.save();
      ctx.globalAlpha = 0.035;
      ctx.translate(0, Math.sin(t*0.8)*40);
      for(let i=0;i<10;i++){
        ctx.beginPath();
        ctx.moveTo(-200, H*(i/9));
        ctx.bezierCurveTo(W*0.25, H*(i/9)+Math.sin(t*0.6+i)*40, W*0.75, H*(i/9)-Math.sin(t*0.4+i)*40, W+200, H*(i/9));
        ctx.lineWidth = 20 - i;
        ctx.strokeStyle = '#07121a';
        ctx.stroke();
      }
      ctx.restore();
      // particles
      for(let p of particles){
        p.x += p.vx;
        p.y += p.vy + Math.sin((t + p.x*0.002))*0.12;
        if(p.x < -60) p.x = W+60;
        if(p.x > W+60) p.x = -60;
        if(p.y < -60) p.y = H+60;
        if(p.y > H+60) p.y = -60;
        ctx.beginPath();
        ctx.fillStyle = `rgba(255,255,255,${p.a})`;
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fill();
      }
      requestAnimationFrame(draw);
    }
    draw();
  })();

  /* subtle parallax on pointer for cat */
  let parallaxOn = true;
  if(parallaxOn){
    intro.setAttribute('data-parallax','on');
    window.addEventListener('mousemove', e=>{
      const nx = (e.clientX - window.innerWidth/2) / (window.innerWidth/6);
      const ny = (e.clientY - window.innerHeight/2) / (window.innerHeight/8);
      cat.style.transform = `translate(${nx}px, ${ny}px) scale(1)`;
    });
    window.addEventListener('touchmove', e=>{
      const t = e.touches[0];
      if(!t) return;
      const nx = (t.clientX - window.innerWidth/2) / (window.innerWidth/6);
      const ny = (t.clientY - window.innerHeight/2) / (window.innerHeight/8);
      cat.style.transform = `translate(${nx}px, ${ny}px) scale(1)`;
    }, {passive:true});
    window.addEventListener('mouseleave', ()=>cat.style.transform = '');
  }

  /* ---------- Small helpers ---------- */
  function fadeAudio(audio, target=1, time=600){
    if(!audio) return;
    const start = audio.volume || 0;
    const diff = target - start;
    const steps = 20;
    const stepTime = time/steps;
    let i = 0;
    const interval = setInterval(()=>{
      i++;
      audio.volume = Math.max(0, Math.min(1, start + diff*(i/steps)));
      if(i>=steps){ clearInterval(interval); }
    }, stepTime);
  }

  /* ---------- Open story (cat click) ---------- */
  function openStory(){
    try{ intro.style.display = 'none'; }catch(e){}
    storyWrap.style.display = 'block';
    storyWrap.setAttribute('aria-hidden','false');
    try{ darkMusic.currentTime = 0; darkMusic.play().catch(()=>{}); fadeAudio(darkMusic,0.22,500); }catch(e){}
  }
  cat.addEventListener('click', openStory);
  cat.addEventListener('touchend', (ev)=>{ ev.preventDefault(); openStory(); }, {passive:false});

  /* ---------- Spoiler behavior (visual cover doesn't block clicks) ---------- */
  finalSpoiler.addEventListener('click', function(){
    if(this.classList.contains('open')) return;
    this.classList.add('open');
    this.setAttribute('aria-pressed','true');
  });
  finalSpoiler.addEventListener('keydown', ev=>{ if(ev.key==='Enter' || ev.key===' ') { ev.preventDefault(); finalSpoiler.click(); } });

  /* ---------- Enhanced beer fall animation ---------- */
  beerWord.addEventListener('click', ()=> {
    // reveal beer image
    beerImg.style.display = 'block';
    beerImg.style.opacity = 1;
    // compute arc values
    const hOffset = (Math.random()*220 - 110); // px lateral
    const startTop = -520;
    const midTop = window.innerHeight * 0.46;
    const endTop = window.innerHeight * 0.66;

    // animate with Web Animations API for smoothness
    const keyframes = [
      { top: startTop + 'px', transform: 'translateX(-50%) rotate(0deg) scale(1)' },
      { top: (midTop - 30) + 'px', transform: `translateX(calc(-50% + ${hOffset/2}px)) rotate(120deg) scale(1.08)` },
      { top: endTop + 'px', transform: `translateX(calc(-50% + ${hOffset}px)) rotate(220deg) scale(1.1)` }
    ];
    const anim = beerImg.animate(keyframes, { duration: 2000, easing: 'cubic-bezier(.22,.86,.3,1)', fill: 'forwards' });

    // brew-like trail: create thin bubble particles following path
    const trailCount = 8;
    for(let i=0;i<trailCount;i++){
      const bubble = document.createElement('div');
      bubble.style.position = 'absolute';
      bubble.style.left = `calc(50% + ${hOffset*(i/trailCount)}px)`;
      bubble.style.top = `${startTop + i*40}px`;
      bubble.style.width = `${6 + Math.random()*8}px`;
      bubble.style.height = `${6 + Math.random()*8}px`;
      bubble.style.borderRadius = '50%';
      bubble.style.background = 'radial-gradient(circle,#fff8ea,#ffdcb2)';
      bubble.style.opacity = 0.9;
      bubble.style.zIndex = 68;
      document.body.appendChild(bubble);
      bubble.animate([
        { transform: 'translateY(0) scale(1)', opacity:1 },
        { transform: `translateY(${midTop}px) scale(.6)`, opacity:0.6 },
        { transform: `translateY(${endTop}px) scale(.2)`, opacity:0 }
      ], { duration: 2000 + Math.random()*300, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });
      setTimeout(()=> bubble.remove(), 2400);
    }

    // on near impact, produce many splashes and large ripple/puddle expansion
    setTimeout(()=> {
      // splashes
      const splCount = 18;
      for(let i=0;i<splCount;i++){
        const xOffset = (Math.random()*280 - 140);
        const s = document.createElement('div');
        s.className = 'splash';
        const size = 8 + Math.random()*28;
        s.style.width = size + 'px';
        s.style.height = size + 'px';
        s.style.left = `calc(50% + ${xOffset}px)`;
        s.style.bottom = '18vh';
        document.body.appendChild(s);
        s.animate([
          { transform: `translate(0,0) scale(0.4)`, opacity:1 },
          { transform: `translate(${(Math.random()*180-90)}px, -140px) scale(${1+Math.random()*1.2})`, opacity:0 }
        ], { duration: 900 + Math.random()*500, easing: 'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });
        setTimeout(()=> s.remove(), 1400 + Math.random()*600);
      }

      // ripple & puddle
      puddle.style.display = 'block';
      puddle.style.opacity = 1;
      const maxWidth = Math.min(window.innerWidth * 0.72, 740);
      puddle.animate([{ width: '18px', opacity:1 }, { width: maxWidth + 'px', opacity:1 }], { duration: 1200, easing: 'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });

      ripple.style.display = 'block';
      ripple.style.opacity = 0.7;
      ripple.animate([
        { width: '18px', height: '18px', opacity:0.7, transform: 'translateX(-50%) scale(0.8)' },
        { width: maxWidth + 'px', height: Math.min(120, maxWidth/6) + 'px', opacity:0.12, transform: 'translateX(-50%) scale(1.0)' }
      ], { duration: 1100, easing: 'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });

      // foam particles (tiny)
      for(let i=0;i<12;i++){
        const foam = document.createElement('div');
        foam.className = 'foam';
        foam.style.width = `${3 + Math.random()*7}px`;
        foam.style.height = foam.style.width;
        foam.style.left = `calc(50% + ${Math.random()*maxWidth - maxWidth/2}px)`;
        foam.style.bottom = 'calc(12vh + 6px)';
        foam.style.opacity = 1;
        foam.style.zIndex = 71;
        document.body.appendChild(foam);
        foam.animate([
          { transform: 'translateY(0) scale(1)', opacity:1 },
          { transform: `translateY(-40px) scale(.6)`, opacity:0 }
        ], { duration: 1200 + Math.random()*800, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });
        setTimeout(()=> foam.remove(), 1800 + Math.random()*900);
      }

      // soft rumble
      page.classList.add('shake');
      setTimeout(()=> page.classList.remove('shake'), 700);
    }, 1500);

    // after final landing -> switch to love mood, spawn memes
    setTimeout(()=> {
      // hide story + beer visuals
      try{ storyWrap.style.display = 'none'; }catch(e){}
      try{ beerLayer.style.display = 'none'; }catch(e){}
      bgDark.style.display = 'none';
      bgLove.style.display = 'block';
      // audio switch with fade
      try{ fadeAudio(darkMusic,0,400); setTimeout(()=> darkMusic.pause(),450); }catch(e){}
      try{ loveMusic.currentTime = 0; loveMusic.play().catch(()=>{}); fadeAudio(loveMusic,0.2,600);}catch(e){}
      spawnMemes();
    }, 2400);
  });

  /* spawnMemes: large floating memes that when clicked show confession */
  function spawnMemes(){
    const count = 10;
    for(let i=0;i<count;i++){
      const m = document.createElement('img');
      m.src = 'meme.png';
      m.className = 'meme';
      const s = Math.floor(120 + Math.random()*180);
      m.style.width = s + 'px';
      // avoid edges a bit
      const left = Math.random()*78 + 6;
      const top = Math.random()*78 + 6;
      m.style.left = left + 'vw';
      m.style.top = top + 'vh';
      m.style.opacity = 0;
      document.body.appendChild(m);
      setTimeout(()=> { m.style.opacity = 1; }, 120 + Math.random()*700);
      m.addEventListener('click', ()=> {
        document.querySelectorAll('.meme').forEach(x=> x.remove());
        showConfession();
      });
      m.addEventListener('touchend', (e)=>{ e.preventDefault(); m.click(); }, {passive:false});
    }
  }

  /* show confession overlay */
  function showConfession(){
    loveOverlay.style.display = 'flex';
  }

  /* heart button -> video overlay with fallback */
  heartBtn.addEventListener('click', ()=> {
    loveOverlay.style.display = 'none';
    videoOverlay.style.display = 'flex';
    videoOverlay.setAttribute('aria-hidden','false');
    secretVideo.style.display = 'block';
    secretVideo.play().catch(()=>{});
    setTimeout(()=> {
      if(typeof secretVideo.readyState !== 'undefined' && secretVideo.readyState < 1) {
        if(videoPlaceholder) videoPlaceholder.style.display = 'block';
        secretVideo.style.display = 'none';
      }
    }, 900);
    secretVideo.addEventListener('loadeddata', ()=> { if(videoPlaceholder) videoPlaceholder.style.display = 'none'; secretVideo.style.display = 'block'; secretVideo.play().catch(()=>{}); });
    secretVideo.addEventListener('error', ()=> { if(videoPlaceholder) videoPlaceholder.style.display = 'block'; secretVideo.style.display = 'none'; });
  });

  /* tiny helper: fade audio (used above) */
  function fadeAudio(audio, target=1, time=500){
    if(!audio) return;
    const start = audio.volume || 0;
    const diff = target - start;
    const steps = 20;
    const stepTime = Math.max(10, Math.round(time/steps));
    let i = 0;
    const timer = setInterval(()=> {
      i++;
      audio.volume = Math.max(0, Math.min(1, start + diff*(i/steps)));
      if(i>=steps) clearInterval(timer);
    }, stepTime);
  }

  /* small UX: clicking outside overlays closes video overlay */
  videoOverlay.addEventListener('click', (e)=>{
    if(e.target === videoOverlay || e.target === videoPlaceholder) {
      videoOverlay.style.display = 'none';
      if(secretVideo) { try{ secretVideo.pause(); }catch(e){} }
    }
  });

}); // end load listener
</script>
</body>
</html>
