<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>–ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –ë—É—Å–∏</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Montserrat:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --vh: 1vh;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
      --ease: cubic-bezier(.2,.8,.2,1);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;overflow:hidden;background:#080812;color:#fff;font-family:Montserrat,system-ui,-apple-system,sans-serif;-webkit-text-size-adjust:100%;text-size-adjust:100%}
    img{display:block;max-width:100%;-webkit-user-drag:none;user-select:none}
    button,[role="button"],.clickable{-webkit-tap-highlight-color:transparent;touch-action:manipulation}

    #app{
      position:relative;
      width:100%;
      min-height:100vh;
      min-height:100dvh;
      min-height:calc(var(--vh) * 100);
      overflow:hidden;
      padding: max(18px, var(--safe-top)) max(18px, var(--safe-right)) max(18px, var(--safe-bottom)) max(18px, var(--safe-left));
    }

    .bg{position:fixed;inset:0;z-index:-2;transition:opacity .8s var(--ease)}
    .bg.dark{background:radial-gradient(circle at 30% 20%, #1e2239 0%, #0b0d17 40%, #04050b 100%)}
    .bg.dark::before,
    .bg.dark::after{content:"";position:absolute;inset:-20%;background:radial-gradient(circle, rgba(255,255,255,.06) 0 10%, transparent 45%);filter:blur(28px);animation:fog 18s linear infinite;opacity:.22}
    .bg.dark::after{animation-duration:26s;animation-direction:reverse;opacity:.13}

    .bg.romantic{opacity:0;background:linear-gradient(130deg,#2f164f 0%,#5f3f9f 30%,#f786b2 70%,#ffcedf 100%)}
    .bg.romantic.active{opacity:1}
    .bg.romantic::before{content:"";position:absolute;inset:0;background:url('hearts-bg.jpg') center/cover no-repeat;mix-blend-mode:screen;opacity:.25}

    @keyframes fog{0%{transform:translate(-3%, 0)}50%{transform:translate(3%, -6%)}100%{transform:translate(-3%, 0)}}

    #scene{
      height:100%;
      width:100%;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .panel{
      width:min(96vw, 620px);
      border-radius:22px;
      backdrop-filter: blur(8px);
      background:linear-gradient(180deg, rgba(12,13,20,.78), rgba(9,10,16,.58));
      box-shadow:0 24px 90px rgba(0,0,0,.5);
      border:1px solid rgba(255,255,255,.08);
      padding:clamp(14px,4vw,22px);
      transition:opacity .45s var(--ease), transform .45s var(--ease);
    }

    .hidden{display:none !important}

    #catStep{text-align:center}
    .cat-frame{position:relative;border-radius:18px;overflow:hidden;border:3px solid rgba(255,255,255,.15);box-shadow:0 20px 70px rgba(0,0,0,.55);animation:float 4.8s ease-in-out infinite}
    #cat{width:min(84vw,460px);aspect-ratio:3/4;object-fit:cover}
    .hint{margin-top:12px;font-size:14px;opacity:.95;background:rgba(255,255,255,.08);display:inline-block;padding:8px 14px;border-radius:999px}

    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

    #storyStep{max-height:84vh;overflow:auto;scrollbar-width:thin}
    .story{font-size:clamp(15px,3.9vw,17px);line-height:1.72;color:#f1f2fa}
    .story p{margin-bottom:14px}

    .spoiler{
      position:relative;
      display:inline-block;
      padding:12px 14px;
      border-radius:12px;
      background:linear-gradient(180deg,#11131e,#0a0b12);
      border:1px solid rgba(255,255,255,.12);
      cursor:pointer;
      margin-top:8px;
    }
    .spoiler .veil{position:absolute;inset:0;border-radius:inherit;background:linear-gradient(120deg, rgba(26,28,36,.96), rgba(10,11,14,.98));transition:transform .6s var(--ease), opacity .6s var(--ease)}
    .spoiler.open .veil{transform:translateY(-110%);opacity:0}
    .spoiler .line{position:relative;font-weight:500;color:transparent;transition:color .45s var(--ease)}
    .spoiler.open .line{color:#fff}
    .beer-word{color:#ffcf5c;font-weight:700;text-decoration:underline;cursor:pointer}

    #beerLayer{position:fixed;inset:0;pointer-events:none;z-index:30}
    #beerCan{position:absolute;width:min(35vw,160px);display:none;filter:drop-shadow(0 14px 24px rgba(0,0,0,.35))}
    #beerPuddle{position:absolute;left:50%;bottom:18%;transform:translateX(-50%) scale(.2);width:min(58vw,320px);height:min(14vw,70px);border-radius:50%;background:radial-gradient(circle at 45% 40%, #ffd977 0%, #f8b83f 52%, #cb7d1f 100%);opacity:0}

    .splash{position:absolute;width:10px;height:10px;border-radius:50%;background:#ffd264;opacity:0}
    .shake{animation:shake .5s linear}
    @keyframes shake{0%{transform:translate(0,0)}20%{transform:translate(-6px,4px)}40%{transform:translate(6px,-6px)}60%{transform:translate(-4px,2px)}80%{transform:translate(4px,-2px)}100%{transform:translate(0,0)}}

    #memeLayer{position:fixed;inset:0;pointer-events:none;z-index:22}
    .meme{position:absolute;width:min(28vw,132px);aspect-ratio:3/4;border-radius:12px;overflow:hidden;border:4px solid rgba(255,255,255,.18);box-shadow:0 18px 30px rgba(0,0,0,.35);pointer-events:auto;cursor:pointer;animation:drift 9s ease-in-out infinite}
    .meme img{width:100%;height:100%;object-fit:cover}
    @keyframes drift{0%,100%{transform:translateY(0) rotate(-4deg)}50%{transform:translateY(-18px) rotate(4deg)}}

    #confessOverlay{position:fixed;inset:0;background:rgba(8,8,17,.65);backdrop-filter:blur(3px);display:none;align-items:center;justify-content:center;z-index:40;padding: max(20px, var(--safe-top)) max(16px, var(--safe-right)) max(20px, var(--safe-bottom)) max(16px, var(--safe-left));}
    #confessBox{width:min(94vw,700px);border-radius:18px;padding:clamp(18px,5vw,30px);background:linear-gradient(180deg,rgba(255,255,255,.15),rgba(255,255,255,.08));border:1px solid rgba(255,255,255,.25);text-align:center;box-shadow:0 20px 70px rgba(0,0,0,.35)}
    #confessText{font-family:'Marck Script',cursive;font-size:clamp(29px,8vw,44px);line-height:1.25;color:#fff1f6;opacity:0;transform:translateY(8px);transition:all .55s var(--ease)}
    #confessText.show{opacity:1;transform:translateY(0)}

    .heart{font-size:56px;cursor:pointer;display:inline-block;margin-top:18px;animation:pulse 1.5s ease-in-out infinite}
    .tap-heart{font-size:14px;opacity:.9;margin-top:6px;color:#fff6fb}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.12)}}

    #videoOverlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.92);z-index:55;padding: max(20px, var(--safe-top)) max(16px, var(--safe-right)) max(20px, var(--safe-bottom)) max(16px, var(--safe-left));}
    #secretVideo{width:min(94vw,860px);max-height:78vh;border-radius:12px;background:#000;display:none}
    .video-placeholder{width:min(90vw,540px);padding:22px 18px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,.14),rgba(255,255,255,.06));text-align:center;line-height:1.5}
    .video-placeholder .emoji{font-size:48px;margin-bottom:8px}

    @media (max-width:430px){
      #app{padding: max(14px, var(--safe-top)) max(14px, var(--safe-right)) max(14px, var(--safe-bottom)) max(14px, var(--safe-left));}
      .panel{width:100%;border-radius:16px}
      .hint{font-size:13px}
      .meme{width:min(30vw,118px)}
      .heart{font-size:52px}
    }
  </style>
</head>
<body>
  <div class="bg dark"></div>
  <div class="bg romantic" id="romanticBg"></div>

  <div id="app">
    <div id="scene">
      <section class="panel" id="catStep" aria-label="–ò–Ω—Ç—Ä–æ">
        <div class="cat-frame clickable" id="catFrame" role="button" tabindex="0" aria-label="–ù–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞">
          <img id="cat" src="cat.jpg" alt="–∫–æ—Ç –ë—É—Å—è" />
        </div>
        <div class="hint">–Ω–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞ üêæ</div>
      </section>

      <section class="panel hidden" id="storyStep" aria-label="–†–∞—Å—Å–∫–∞–∑">
        <div class="story">
          <p>–û–¥–Ω–∞–∂–¥—ã —è —Å–∏–¥–µ–ª –∫–∞–∫ –Ω–∏ –≤ —á—ë–º –Ω–µ –±—ã–≤–∞–ª–æ –¥–æ–º–∞, —Å–ª—É—à–∞–ª –≥—Ä—É—Å—Ç–Ω—É—é –º—É–∑—ã–∫—É, —Å–º–æ—Ç—Ä–µ–ª –≤ –æ–∫–Ω–æ, –¥—É–º–∞–ª –æ —Å–≤–æ—ë–º —Ç–ª–µ–Ω–Ω–æ–º –±—É–¥—É—â–µ–º, –∫–∞–∫ –≤–¥—Ä—É–≥‚Ä¶ –∑–≤–æ–Ω–æ–∫ –≤ –¥–≤–µ—Ä—å. –Ø –æ–ø–µ—à–∏–ª, –≤–µ–¥—å –±—ã–ª–æ 3 —á–∞—Å–∞ –Ω–æ—á–∏, –∏ —è –Ω–∏–∫–æ–≥–æ –Ω–µ –∂–¥–∞–ª. –í —Ç–æ—Ç –¥–µ–Ω—å –æ—â—É—â–µ–Ω–∏—è –ø–æ–∏—Å—Ç–∏–Ω–µ –±—ã–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ. –ù–∞ –¥–≤–æ—Ä–µ —Å—Ç–æ—è–ª–∞ –ª—ë–≥–∫–∞—è –¥—ã–º–∫–∞, –∞ –Ω–∞ –Ω–µ–±–µ –æ—Ç—á—ë—Ç–ª–∏–≤–æ –≤–∏–¥–Ω–µ–ª–∞—Å—å —è—Ä–∫–∞—è –ø–æ–ª–Ω–∞—è –ª—É–Ω–∞, –ø—Ä—è–º–æ –∫–∞–∫ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî –º—Ä–∞—á–Ω–∞—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è. –ü–æ–≥–æ–¥–∞ –∑–∞ –æ–∫–Ω–æ–º –ª–∏—à—å –¥–æ–±–∞–≤–ª—è–ª–∞ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–º—É —Å–æ–±—ã—Ç–∏—é.</p>
          <p>¬´–£ —Å–æ—Å–µ–¥–∞, –Ω–∞–≤–µ—Ä–Ω–æ–µ, —á—Ç–æ-—Ç–æ —Å—Ç—Ä—è—Å–ª–æ—Å—å¬ª, ‚Äî –ø–æ—á–µ—Å–∞–≤ —Ä–µ–ø—É, –ø–æ–¥—É–º–∞–ª —è. –ù–æ —á—É–≤—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥–∏ –∑–∞—Ç–º–∏–ª–æ –º–æ–π —Ä–∞—Å—Å—É–¥–æ–∫, –∏ —è –º–µ–¥–ª–µ–Ω–Ω–æ, —Ç–∏—Ö–∏–º —à–∞–≥–æ–º –ø–æ–¥–æ—à—ë–ª –∫ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏. –°—Ç–æ—è–ª–∞ –ø–æ–ª–Ω–µ–π—à–∞—è —Ç–∏—à–∏–Ω–∞. –Ø –ø—ã—Ç–∞–ª—Å—è –ø—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è –∫ –∑–≤—É–∫–∞–º –ø–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É –¥–≤–µ—Ä–∏, –Ω–æ –∏—Ö –Ω–µ –±—ã–ª–æ. –Ø —Å—Ç–æ—è–ª —Ç–∞–∫ –≥–¥–µ-—Ç–æ –º–∏–Ω—É—Ç—É, –Ω–æ –ø–æ –æ—â—É—â–µ–Ω–∏—è–º –æ–Ω–∞ –¥–ª–∏–ª–∞—Å—å —Ü–µ–ª—É—é –≤–µ—á–Ω–æ—Å—Ç—å. –í –≥–æ–ª–æ–≤–µ –±—ã–ª–∞ –ª–∏—à—å —Ä–∞—Å—Ç–µ—Ä—è–Ω–Ω–æ—Å—Ç—å –∏ —Å–º—è—Ç–µ–Ω–∏–µ.</p>
          <p>–ö–∞–∫ –≤–¥—Ä—É–≥ —è —É—Å–ª—ã—à–∞–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —É–≤–µ—Ä–µ–Ω–Ω–æ –≤–æ–¥–∏–ª –Ω–æ–≥—Ç–µ–º –ø–æ —Å—Ç–∞–ª—å–Ω–æ–º—É –ª–∏—Å—Ç—É. –Ø —Å–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥—Å—è, –≤—Å—ë —Ç–µ–ª–æ —Å –≥–æ–ª–æ–≤—ã –¥–æ –Ω–æ–≥ –ø—Ä–æ–±—Ä–∞–ª–æ –º—É—Ä–∞—à–∫–∞–º–∏, —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Ä–µ–∑–∫–∏–π —Å–∫–∞—á–æ–∫ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞ ‚Äî —Ä–∞–∑—É–º —è–≤–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, —á—Ç–æ —á—Ç–æ-—Ç–æ —Ç—É—Ç –Ω–µ —Ç–∞–∫. –Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏, —Å—Ü–µ–ø–∏–≤ –∑—É–±—ã, –≤—ã–¥–∞–≤–∏–ª –∏–∑ —Å–µ–±—è: ‚ÄûWer ist da?‚Äú –ù–æ, –∫–∞–∫ —è –∏ –æ–∂–∏–¥–∞–ª, –æ—Ç–≤–µ—Ç–∞ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–æ. –õ–∏—à—å —ç—Ç–æ—Ç –¥–æ –¥—Ä–æ–∂–∏ –ø—Ä–æ—Ç–∏–≤–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–Ω–∏–∫–∞–ª –≤ –∫–∞–∂–¥—É—é –∫–ª–µ—Ç–æ—á–∫—É –º–æ–∑–≥–∞‚Ä¶ –û—â—É—â–∞–ª–æ—Å—å, –±—É–¥—Ç–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ —Å –∏–∑–¥—ë–≤–∫–æ–π –≤–æ–¥–∏—Ç –ø–æ –Ω–µ–º—É —Å–∫—Ä–∏–ø—É—á–µ–π –∂–µ–ª–µ–∑—è–∫–æ–π.</p>
          <p>–ò –≤–¥—Ä—É–≥ ‚Äî —Ç–∏—à–∏–Ω–∞. –°–Ω–æ–≤–∞. –Ø –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –∫—Ç–æ –±—ã —Ç–æ –Ω–∏ –±—ã–ª –∑–∞ –¥–≤–µ—Ä—å—é, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ç–æ–∂–µ —É—Å–ª—ã—à–∞–ª, –∫–∞–∫ —è —Å—Ç–æ—é –∏ –º–æ–ª—á–∞ —Å–ª—É—à–∞—é, –≤–Ω–∏–º–∞—è —ç—Ç–æ—Ç –ø—Å–∏—Ö–æ–¥–µ–ª–∏—á–µ—Å–∫–∏–π —É–∂–∞—Å. –ì–¥–µ-—Ç–æ —Å–ø—É—Å—Ç—è —Å–µ–∫—É–Ω–¥ 20 —Ä–∞–∑–¥–∞–ª—Å—è –≥—Ä–æ–º–∫–∏–π –∂–µ–ª–µ–∑–Ω—ã–π –∑–≤—É–∫ ‚Äî –∑–≤—É–∫ –ø–∞–¥–µ–Ω–∏—è –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –º–æ–µ–π –≥—Ä—ë–±–∞–Ω–Ω–æ–π –¥–≤–µ—Ä—å—é. –Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Å–ª–æ–Ω–∏–ª —É—Ö–æ –∫ –¥–≤–µ—Ä–∏, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∂–µ —É–ø–∞–ª–æ... –∏ —á—Ç–æ, —á—ë—Ä—Ç –≤–æ–∑—å–º–∏, —Ç—É—Ç –≤–æ–æ–±—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.</p>
          <p>–ö–∞–∫ –≤–¥—Ä—É–≥, –∫–∞–∫ –≥—Ä–æ–º —Å—Ä–µ–¥–∏ —è—Å–Ω–æ–≥–æ –¥–Ω—è, –∫–∞–∫ —Å–Ω–µ–≥ –≤ –∏—é–ª–µ, —è —É—Å–ª—ã—à–∞–ª –Ω–µ–∂–Ω—ã–π, –º–∏–ª—ã–π –∏ –¥–æ –±–æ–ª–∏ –∑–Ω–∞–∫–æ–º—ã–π –∂–µ–Ω—Å–∫–∏–π –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–∑–Ω—ë—Å:</p>

          <div class="spoiler clickable" id="finalSpoiler" role="button" tabindex="0" aria-pressed="false" aria-label="–û—Ç–∫—Ä—ã—Ç—å —Å–ø–æ–π–ª–µ—Ä">
            <div class="veil" aria-hidden="true"></div>
            <div class="line">‚Äî –û–π, –∏–∑–≤–∏–Ω–∏, —É –º–µ–Ω—è <span class="beer-word clickable" id="beerWord">–ø–∏–≤–æ</span> —É–ø–∞–ª–æ.</div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <div id="beerLayer" aria-hidden="true">
    <img src="beer.png" id="beerCan" alt="–±–∞–Ω–∫–∞ –ø–∏–≤–∞" />
    <div id="beerPuddle"></div>
  </div>

  <div id="memeLayer" aria-hidden="true"></div>

  <div id="confessOverlay">
    <div id="confessBox" role="dialog" aria-label="–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ">
      <div id="confessText">–±—É—Å—è, –∫–æ—Ç–∏–∫, —è –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —Ç–æ–±–æ–π –ª–∏—à—å –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥, –Ω–æ –≤–æ –º–Ω–µ —Ç–µ–ø–ª–∏—Ç—Å—è —á—É–≤—Å—Ç–≤–æ, –±—É–¥—Ç–æ —è –∑–Ω–∞–ª —Ç–µ–±—è –≤–æ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω—è—Ö, –≤–µ–¥—å –±–æ–ª–µ–µ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç—á–∞ –Ω–∞ –∑–µ–º–ª–µ –µ—â–µ –Ω–µ –±—ã–ª–æ. –∏ –Ω–µ –±—É–¥–µ—Ç. —Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—Ä–∏—à—å –º–Ω–µ —Ç—É —Å–∞–º—É—é —Ä–∞–¥–æ—Å—Ç—å –∏ —É–ª—ã–±–∫—É, –∫–æ—Ç–æ—Ä—ã—Ö —É –º–µ–Ω—è –æ—á–µ–Ω—å –¥–∞–≤–Ω–æ –Ω–µ –±—ã–ª–æ. –ø–æ–ª–≥–æ–¥–∞ –Ω–∞–∑–∞–¥ —è –∏ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ —Å–º–æ–≥—É –ø–æ–ª—é–±–∏—Ç—å –∫–æ–≥–æ-—Ç–æ —Ç–∞–∫ —Å–∏–ª—å–Ω–æ –∫–∞–∫ —Ç–µ–±—è. –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∂–¥—É –Ω–∞—à–µ–π –≤—Å—Ç—Ä–µ—á–∏, —è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ü–µ–ª—É—é —Ç–µ–±—è –ø–æ–¥ –ø—Ä–∏–ø–µ–≤ —ç—Ç–æ–π –ø–µ—Å–Ω–∏</div>
      <div class="heart clickable" id="heartBtn" role="button" tabindex="0" aria-label="–ù–∞–∂–∞—Ç—å —Å–µ—Ä–¥—Ü–µ">üíò</div>
      <div class="tap-heart">—Å–µ—Ä–¥–µ—á–∫–æ —Ç—ã–∫</div>
    </div>
  </div>

  <div id="videoOverlay" aria-label="–í–∏–¥–µ–æ">
    <video id="secretVideo" src="video.mp4" controls playsinline webkit-playsinline preload="metadata"></video>
    <div class="video-placeholder" id="videoPlaceholder" role="status" aria-live="polite">
      <div class="emoji">üé¨</div>
      <div>–í–∏–¥–µ–æ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –∑–¥–µ—Å—å.</div>
      <div style="opacity:.82;font-size:14px;margin-top:6px;">–ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞ ‚Äî —Ñ–∏–Ω–∞–ª —É–∂–µ –≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ üíù</div>
    </div>
  </div>

  <audio id="darkMusic" src="dark.mp3" preload="auto"></audio>
  <audio id="loveMusic" src="love.mp3" preload="auto"></audio>

  <script>
    const $ = (s) => document.querySelector(s)
    const app = $('#app')
    const catFrame = $('#catFrame')
    const catStep = $('#catStep')
    const storyStep = $('#storyStep')
    const spoiler = $('#finalSpoiler')
    const beerWord = $('#beerWord')
    const beerCan = $('#beerCan')
    const beerPuddle = $('#beerPuddle')
    const darkBg = $('.bg.dark')
    const romanticBg = $('#romanticBg')
    const memeLayer = $('#memeLayer')
    const confessOverlay = $('#confessOverlay')
    const confessText = $('#confessText')
    const heartBtn = $('#heartBtn')
    const videoOverlay = $('#videoOverlay')
    const secretVideo = $('#secretVideo')
    const videoPlaceholder = $('#videoPlaceholder')
    const darkMusic = $('#darkMusic')
    const loveMusic = $('#loveMusic')

    let beerRunning = false
    let romanticStarted = false

    function setVH(){
      const vh = (window.visualViewport?.height || window.innerHeight) * 0.01
      document.documentElement.style.setProperty('--vh', `${vh}px`)
    }
    setVH()
    addEventListener('resize', setVH, {passive:true})
    addEventListener('orientationchange', setVH, {passive:true})

    function fadeAudio(audio, target, ms = 900){
      const start = audio.volume || 0
      const t0 = performance.now()
      function tick(t){
        const k = Math.min(1, (t - t0) / ms)
        audio.volume = start + (target - start) * k
        if(k < 1) requestAnimationFrame(tick)
      }
      requestAnimationFrame(tick)
    }

    function unlockAudio(){
      try { darkMusic.play().then(()=>darkMusic.pause()).catch(()=>{}) } catch(e){}
      try { loveMusic.play().then(()=>loveMusic.pause()).catch(()=>{}) } catch(e){}
      removeEventListener('touchstart', unlockAudio)
      removeEventListener('click', unlockAudio)
    }
    addEventListener('touchstart', unlockAudio, {once:true, passive:true})
    addEventListener('click', unlockAudio, {once:true})

    function openStory(){
      catStep.classList.add('hidden')
      storyStep.classList.remove('hidden')
      darkMusic.currentTime = 0
      darkMusic.play().catch(()=>{})
      fadeAudio(darkMusic, 0.2, 1200)
    }

    catFrame.addEventListener('click', openStory)
    catFrame.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openStory() }
    })

    function openSpoiler(){
      if(!spoiler.classList.contains('open')){
        spoiler.classList.add('open')
        spoiler.setAttribute('aria-pressed', 'true')
      }
    }

    spoiler.addEventListener('click', (e)=>{
      if(e.target.closest('#beerWord')) return
      openSpoiler()
    })
    spoiler.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openSpoiler() }
    })

    function spawnSplash(x, y){
      for(let i=0;i<14;i++){
        const s = document.createElement('span')
        s.className = 'splash'
        s.style.left = `${x}px`
        s.style.top = `${y}px`
        const dx = (Math.random() - 0.5) * 240
        const dy = -Math.random() * 170 - 30
        const scale = 0.6 + Math.random() * 1.8
        s.animate([
          {transform:'translate(0,0) scale(1)',opacity:1},
          {transform:`translate(${dx}px, ${dy}px) scale(${scale})`,opacity:.95},
          {transform:`translate(${dx * 1.2}px, 130px) scale(.2)`,opacity:0}
        ], {duration:900 + Math.random()*240, easing:'cubic-bezier(.2,.9,.2,1)'})
        document.body.appendChild(s)
        setTimeout(()=>s.remove(),1200)
      }
    }

    function dropBeer(){
      if(beerRunning || romanticStarted) return
      beerRunning = true
      openSpoiler()

      beerCan.style.display = 'block'
      let x = innerWidth / 2
      let y = -180
      let vy = 0
      let angle = -15
      const gravity = 0.95
      const ground = innerHeight * 0.72

      function frame(){
        vy += gravity
        y += vy
        angle += 5
        beerCan.style.left = `${x}px`
        beerCan.style.top = `${y}px`
        beerCan.style.transform = `translate(-50%,0) rotate(${angle}deg)`

        if(y < ground){
          requestAnimationFrame(frame)
        } else {
          beerCan.style.top = `${ground}px`
          app.classList.add('shake')
          spawnSplash(x, ground + 35)
          beerPuddle.animate([
            {opacity:0, transform:'translateX(-50%) scale(.2)'},
            {opacity:1, transform:'translateX(-50%) scale(1)'}
          ], {duration:700, fill:'forwards', easing:'cubic-bezier(.2,.8,.2,1)'})

          setTimeout(()=>app.classList.remove('shake'), 520)
          setTimeout(()=>startRomantic(), 1500)
        }
      }
      requestAnimationFrame(frame)
    }

    beerWord.addEventListener('click', (e)=>{ e.stopPropagation(); dropBeer() })

    function createMemes(){
      memeLayer.innerHTML = ''
      const amount = 7
      for(let i=0;i<amount;i++){
        const m = document.createElement('div')
        m.className = 'meme clickable'
        m.style.left = `${8 + Math.random() * 80}%`
        m.style.top = `${8 + Math.random() * 72}%`
        m.style.animationDelay = `${Math.random()*2}s`
        m.style.animationDuration = `${7 + Math.random()*4}s`

        const img = document.createElement('img')
        img.src = 'meme.png'
        img.alt = '–º–µ–º'
        m.appendChild(img)

        m.addEventListener('click', showConfession, {once:true})
        memeLayer.appendChild(m)
      }
    }

    function startRomantic(){
      if(romanticStarted) return
      romanticStarted = true
      darkMusic.pause()
      darkMusic.currentTime = 0
      loveMusic.currentTime = 0
      loveMusic.play().catch(()=>{})
      fadeAudio(loveMusic, 0.22, 1100)

      darkBg.style.opacity = 0
      romanticBg.classList.add('active')
      storyStep.classList.add('hidden')
      createMemes()
    }

    function showConfession(){
      memeLayer.innerHTML = ''
      confessOverlay.style.display = 'flex'
      requestAnimationFrame(()=>confessText.classList.add('show'))
    }

    function openVideo(){
      videoOverlay.style.display = 'flex'
      secretVideo.style.display = 'none'
      videoPlaceholder.style.display = 'block'
      secretVideo.play().then(()=>{
        secretVideo.style.display = 'block'
        videoPlaceholder.style.display = 'none'
      }).catch(()=>{})
    }

    heartBtn.addEventListener('click', openVideo)
    heartBtn.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openVideo() }
    })

    secretVideo.addEventListener('error', ()=>{
      secretVideo.style.display = 'none'
      videoPlaceholder.style.display = 'block'
    })

    videoOverlay.addEventListener('click', (e)=>{
      if(e.target === videoOverlay){
        videoOverlay.style.display = 'none'
        secretVideo.pause()
      }
    })
  </script>
</body>
</html>
