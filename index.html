<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>–ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –ë—É—Å–∏</title>
<link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Merriweather:wght@400;500;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
/* ---------- Reset & base ---------- */
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --accent: #ff4f7d;
  --soft: #fff5f9;
  --panel-w: 94vw;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}
html,body{height:100%;width:100%;background:#030414;color:var(--soft);font-family:Montserrat,system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;-webkit-font-smoothing:antialiased;overscroll-behavior:none}
img{display:block;max-width:100%;-webkit-user-drag:none;user-select:none}
button,[role="button"],.tap{touch-action:manipulation;-webkit-tap-highlight-color:transparent}

/* Decorative layers must not catch clicks (safe) */
.bg-decor, .vignette, #beerLayer, #memeLayer { pointer-events: none !important; }

/* ---------- Intro (cat) ---------- */
.intro { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:40; padding:20px; background:transparent; transition:opacity .35s ease; }
.intro.hidden{ opacity:0; pointer-events:none; transform:scale(.997); }
.cat-card{ border-radius:18px; padding:12px; background:linear-gradient(180deg,#24181f,#0f0b0b); box-shadow:0 36px 120px rgba(0,0,0,.72); border:4px solid rgba(255,255,255,0.04); cursor:pointer; display:flex; flex-direction:column; gap:12px; align-items:center; }
.cat-img{ width: min(82vw,520px); aspect-ratio:3/4; object-fit:cover; border-radius:12px; box-shadow:0 18px 60px rgba(0,0,0,.6); transform-origin:center; animation:catPulse 3.8s ease-in-out infinite; }
@keyframes catPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.025)}}
.cat-hint{ font-size:14px; padding:8px 12px; background: rgba(0,0,0,0.14); border-radius:999px; color:rgba(255,255,255,0.94); }

/* ---------- Global decorative backgrounds ---------- */
.bg-decor { position:fixed; inset:0; z-index:-20; pointer-events:none; overflow:hidden; }
.bg-mystic { position:absolute; inset:0; background: linear-gradient(180deg,#081025 0%, #030414 75%); opacity:1; transition:opacity .6s ease; }
.bg-mystic .mist{ position:absolute; inset:-30%; filter:blur(60px); opacity:.22; mix-blend-mode:screen;
  background:
   radial-gradient(circle at 18% 24%, rgba(120,140,200,0.12), transparent 18%),
   radial-gradient(circle at 78% 72%, rgba(80,100,160,0.09), transparent 22%);
  animation:mistMove 36s linear infinite; }
@keyframes mistMove{0%{transform:translateY(0)}50%{transform:translateY(-120px)}100%{transform:translateY(0)}}
.vignette{ position:fixed; inset:0; z-index:60; pointer-events:none; background:radial-gradient(circle at center, rgba(255,255,255,0.02), rgba(0,0,0,0) 40%, rgba(0,0,0,.66) 100%); }

/* Romantic background (appears after beer) */
.bg-romantic{ position:fixed; inset:0; z-index:-18; pointer-events:none; background: linear-gradient(132deg,#3b114a 0%,#6f4ac2 36%,#ff7db5 68%,#ffddec 100%); opacity:0; transition:opacity .9s ease; }
.bg-romantic.active{ opacity:1; }
.bg-romantic::after{ content:""; position:absolute; inset:0; background-image: url('hearts-bg.jpg'); background-size:cover; background-position:center; opacity:.36; filter: blur(4px); }

/* ---------- Story panel ---------- */
.story-panel { position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); width: min(var(--panel-w),920px); height:86vh; max-height: calc(100dvh - var(--safe-top) - var(--safe-bottom) - 36px); border-radius:14px; overflow:hidden; box-shadow:0 48px 180px rgba(0,0,0,.7); z-index:30; display:none; }
.story-panel.open{ display:block; }

/* story background layers */
.story-bg { position:absolute; inset:0; z-index:2; pointer-events:none; background: linear-gradient(180deg, rgba(6,8,12,0.96), rgba(3,4,8,0.98)); }
.story-bg .fogA{ position:absolute; inset:-20%; filter:blur(28px); background: radial-gradient(circle at 24% 36%, rgba(120,140,190,0.07), transparent 18%); animation:fogA 28s linear infinite; opacity:.98 }
.story-bg .fogB{ position:absolute; inset:-20%; filter:blur(36px); background: radial-gradient(circle at 76% 62%, rgba(90,110,140,0.06), transparent 20%); animation:fogB 42s linear infinite; opacity:.86 }
.story-bg .lineNoise { position:absolute; inset:0; background-image: repeating-linear-gradient(180deg, rgba(255,255,255,.01) 0 2px, transparent 2px 8px); mix-blend-mode:overlay; opacity:.05; animation:scan 1.6s linear infinite; }

/* story content scroll area */
.story-scroll { position:relative; z-index:6; height:100%; overflow:auto; -webkit-overflow-scrolling:touch; padding:26px; }
.story-card { max-width:920px; margin:0 auto; background: linear-gradient(180deg, rgba(8,9,12,.36), rgba(6,6,8,.24)); border-radius:12px; padding:26px; backdrop-filter: blur(6px); box-shadow:0 28px 90px rgba(0,0,0,.6); color:#e9e9ee; font-family:'Merriweather',serif; font-size:17px; line-height:1.72; }
.story-card p{ margin-bottom:14px; }

/* close story button */
.story-close { position:absolute; right:12px; top:12px; z-index:12; border:0; background: rgba(255,255,255,0.04); color:var(--soft); padding:8px 10px; border-radius:8px; cursor:pointer }

/* spoiler: aesthetic blur veil */
.spoiler { position:relative; display:inline-block; padding:12px 16px; border-radius:12px; background: linear-gradient(180deg, rgba(10,11,12,.18), rgba(6,7,9,.28)); cursor:pointer; overflow:visible; }
.spoiler .line { position:relative; z-index:6; color:transparent; transition: color .45s ease, text-shadow .45s ease; }
.spoiler .beer-btn { position:relative; z-index:7; background:transparent; border:0; padding:0; margin:0; color:transparent; font:inherit; font-weight:700; cursor:pointer; }
.spoiler .veil { position:absolute; inset:-8px; z-index:5; border-radius:12px; background: linear-gradient(120deg, rgba(16,18,22,0.96), rgba(6,7,9,0.995)); backdrop-filter: blur(20px) saturate(.95); transition: transform .58s cubic-bezier(.2,.9,.3,1), opacity .58s; pointer-events:none; box-shadow: inset 0 10px 40px rgba(255,255,255,0.02); }
.spoiler .veil::after{ content:""; position:absolute; inset:0; background: linear-gradient(90deg, rgba(255,255,255,0.02) 0 1px, transparent 1px 8px); opacity:.06; animation:veilSheen 2.4s linear infinite; }
@keyframes veilSheen{ 0%{ transform: translateX(-30%) } 100%{ transform: translateX(130%) } }
.spoiler.open .veil { transform: translateY(-160%); opacity:0; }
.spoiler.open .line { color:#fff; text-shadow: 0 10px 28px rgba(0,0,0,.58); }
.spoiler.open .beer-btn { color:#ffd166; text-decoration:underline; }

/* ---------- Beer layer (sprite + puddle + ripple + splashes) ---------- */
#beerLayer { position:fixed; inset:0; z-index:28; pointer-events:none; }
#beerSprite { position:absolute; width:min(34vw,160px); transform: translate(-50%,0) rotate(0deg); display:none; will-change:left,top,transform; }
.puddle { position:absolute; left:50%; bottom:12vh; transform:translateX(-50%) scale(.2); width:26px; height:12px; border-radius:999px; opacity:0;
  background: radial-gradient(ellipse at 40% 30%, #fff6d3 0%, #ffd58b 28%, #b66722 78%); filter: blur(1.1px);
  box-shadow: 0 8px 24px rgba(0,0,0,.45), inset 0 -6px 12px rgba(100,60,20,.44); }
.ripple { position:absolute; left:50%; bottom:12vh; transform:translateX(-50%) scale(.2); width:24px; height:10px; border-radius:50%; border:2px solid rgba(255,220,130,.86); opacity:0; }
.splash { position:absolute; border-radius:50%; pointer-events:none; will-change:transform,opacity; }

/* ---------- Meme layer styles ---------- */
#memeLayer { position:fixed; inset:0; z-index:32; pointer-events:none; }
.meme-frame { position:absolute; padding:8px; border-radius:12px; background: linear-gradient(180deg,#24181f,#12070b); border:6px solid rgba(255,95,155,0.14); box-shadow:0 30px 110px rgba(0,0,0,.5); overflow:hidden; cursor:pointer; pointer-events:auto; transform-origin:center; will-change:transform; transition:opacity .36s ease; }
.meme-frame img{ width:100%; height:100%; object-fit:cover; display:block; }

/* faded class */
.fade-out{ opacity:0 !important; transform:scale(.94) !important; transition:.42s ease; }

/* ---------- Confession panel ---------- */
.conf-panel { position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); width:min(var(--panel-w),920px); height:80vh; max-height: calc(100dvh - var(--safe-top) - var(--safe-bottom) - 36px); border-radius:18px; box-shadow:0 48px 180px rgba(0,0,0,.7); background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); z-index:34; display:none; overflow:hidden; }
.conf-panel.open{ display:flex; flex-direction:column; align-items:center; justify-content:center; padding:22px; }
.conf-inner{ overflow:auto; -webkit-overflow-scrolling:touch; padding:12px; width:100%; text-align:center; }
#confText{ font-family:'Marck Script',cursive; font-size:clamp(28px,6.2vw,44px); color:#ffeaf2; text-shadow:0 10px 30px rgba(120,30,60,0.18); line-height:1.4; }
.conf-char{ display:inline-block; white-space:pre; transform-origin:center bottom; animation:confFloat 3.6s ease-in-out infinite; }
@keyframes confFloat{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-3px) } }
.heart-wrap{ display:flex; flex-direction:column; align-items:center; margin-top:18px; }
.heart-btn{ font-size:62px; cursor:pointer; color:var(--accent); text-shadow:0 12px 30px rgba(255,79,125,.36); animation:heartPulse 1.8s ease-in-out infinite; }
@keyframes heartPulse{ 0%,100%{ transform:scale(1) } 50%{ transform:scale(1.12) } }
.heart-caption{ margin-top:8px; font-size:13px; color:#ffd8e6; }

/* Video overlay */
#videoOverlay{ position:fixed; inset:0; z-index:60; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.94); }
#videoOverlay video{ width:94vw; max-width:900px; max-height:78vh; border-radius:12px; background:#000; box-shadow:0 22px 70px rgba(0,0,0,.6); }

/* responsive */
@media (max-width:430px){
  .cat-img{ width:min(88vw,420px) }
  .story-card{ padding:18px; font-size:16px }
  #confText{ font-size:clamp(26px,7.3vw,40px) }
}
</style>
</head>
<body>
  <!-- Decorative backgrounds -->
  <div class="bg-decor">
    <div class="bg-mystic" id="bgMystic"><div class="mist"></div></div>
    <div class="bg-romantic" id="bgRomantic"></div>
  </div>
  <div class="vignette"></div>

  <!-- Intro / cat (top) -->
  <div class="intro" id="intro">
    <div class="cat-card" id="catCard" role="button" tabindex="0" aria-label="–ù–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞">
      <img src="cat.jpg" alt="–∫–æ—Ç –ë—É—Å—è ‚Äî –Ω–∞–∂–º–∏" class="cat-img" id="catImg">
      <div class="cat-hint">–Ω–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞ üêæ</div>
    </div>
  </div>

  <!-- Story panel (hidden until click) -->
  <div class="story-panel" id="storyPanel" role="dialog" aria-label="–†–∞—Å—Å–∫–∞–∑">
    <div class="story-bg" aria-hidden="true">
      <div class="fogA"></div>
      <div class="fogB"></div>
      <div class="lineNoise"></div>
    </div>

    <button class="story-close" id="closeStory" aria-label="–ó–∞–∫—Ä—ã—Ç—å —Ä–∞—Å—Å–∫–∞–∑">‚úï</button>

    <div class="story-scroll">
      <article class="story-card" id="storyCard" aria-live="polite">
        <!-- full story - verbatim -->
        <p>–û–¥–Ω–∞–∂–¥—ã —è —Å–∏–¥–µ–ª –∫–∞–∫ –Ω–∏ –≤ —á—ë–º –Ω–µ –±—ã–≤–∞–ª–æ –¥–æ–º–∞, —Å–ª—É—à–∞–ª –≥—Ä—É—Å—Ç–Ω—É—é –º—É–∑—ã–∫—É, —Å–º–æ—Ç—Ä–µ–ª –≤ –æ–∫–Ω–æ, –¥—É–º–∞–ª –æ —Å–≤–æ—ë–º —Ç–ª–µ–Ω–Ω–æ–º –±—É–¥—É—â–µ–º, –∫–∞–∫ –≤–¥—Ä—É–≥‚Ä¶ –∑–≤–æ–Ω–æ–∫ –≤ –¥–≤–µ—Ä—å. –Ø –æ–ø–µ—à–∏–ª, –≤–µ–¥—å –±—ã–ª–æ 3 —á–∞—Å–∞ –Ω–æ—á–∏, –∏ —è –Ω–∏–∫–æ–≥–æ –Ω–µ –∂–¥–∞–ª. –í —Ç–æ—Ç –¥–µ–Ω—å –æ—â—É—â–µ–Ω–∏—è –ø–æ–∏—Å—Ç–∏–Ω–µ –±—ã–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ. –ù–∞ –¥–≤–æ—Ä–µ —Å—Ç–æ—è–ª–∞ –ª—ë–≥–∫–∞—è –¥—ã–º–∫–∞, –∞ –Ω–∞ –Ω–µ–±–µ –æ—Ç—á—ë—Ç–ª–∏–≤–æ –≤–∏–¥–Ω–µ–ª–∞—Å—å —è—Ä–∫–∞—è –ø–æ–ª–Ω–∞—è –ª—É–Ω–∞, –ø—Ä—è–º–æ –∫–∞–∫ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî –º—Ä–∞—á–Ω–∞—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è. –ü–æ–≥–æ–¥–∞ –∑–∞ –æ–∫–Ω–æ–º –ª–∏—à—å –¥–æ–±–∞–≤–ª—è–ª–∞ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–º—É —Å–æ–±—ã—Ç–∏—é.</p>

        <p>¬´–£ —Å–æ—Å–µ–¥–∞, –Ω–∞–≤–µ—Ä–Ω–æ–µ, —á—Ç–æ-—Ç–æ —Å—Ç—Ä—è—Å–ª–æ—Å—å¬ª, ‚Äî –ø–æ—á–µ—Å–∞–≤ —Ä–µ–ø—É, –ø–æ–¥—É–º–∞–ª —è. –ù–æ —á—É–≤—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥–∏ –∑–∞—Ç–º–∏–ª–æ –º–æ–π —Ä–∞—Å—Å—É–¥–æ–∫, –∏ —è –º–µ–¥–ª–µ–Ω–Ω–æ, —Ç–∏—Ö–∏–º —à–∞–≥–æ–º –ø–æ–¥–æ—à—ë–ª –∫ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏. –°—Ç–æ—è–ª–∞ –ø–æ–ª–Ω–µ–π—à–∞—è —Ç–∏—à–∏–Ω–∞. –Ø –ø—ã—Ç–∞–ª—Å—è –ø—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è –∫ –∑–≤—É–∫–∞–º –ø–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É –¥–≤–µ—Ä–∏, –Ω–æ –∏—Ö –Ω–µ –±—ã–ª–æ. –Ø —Å—Ç–æ—è–ª —Ç–∞–∫ –≥–¥–µ-—Ç–æ –º–∏–Ω—É—Ç—É, –Ω–æ –ø–æ –æ—â—É—â–µ–Ω–∏—è–º –æ–Ω–∞ –¥–ª–∏–ª–∞—Å—å —Ü–µ–ª—É—é –≤–µ—á–Ω–æ—Å—Ç—å. –í –≥–æ–ª–æ–≤–µ –±—ã–ª–∞ –ª–∏—à—å —Ä–∞—Å—Ç–µ—Ä—è–Ω–Ω–æ—Å—Ç—å –∏ —Å–º—è—Ç–µ–Ω–∏–µ.</p>

        <p>–ö–∞–∫ –≤–¥—Ä—É–≥ —è —É—Å–ª—ã—à–∞–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —É–≤–µ—Ä–µ–Ω–Ω–æ –≤–æ–¥–∏–ª –Ω–æ–≥—Ç–µ–º –ø–æ —Å—Ç–∞–ª—å–Ω–æ–º—É –ª–∏—Å—Ç—É. –Ø —Å–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥—Å—è, –≤—Å—ë —Ç–µ–ª–æ —Å –≥–æ–ª–æ–≤—ã –¥–æ –Ω–æ–≥ –ø—Ä–æ–±—Ä–∞–ª–æ –º—É—Ä–∞—à–∫–∞–º–∏, —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Ä–µ–∑–∫–∏–π —Å–∫–∞—á–æ–∫ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞ ‚Äî —Ä–∞–∑—É–º —è–≤–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, —á—Ç–æ —á—Ç–æ-—Ç–æ —Ç—É—Ç –Ω–µ —Ç–∞–∫. –Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏, —Å—Ü–µ–ø–∏–≤ –∑—É–±—ã, –≤—ã–¥–∞–≤–∏–ª –∏–∑ —Å–µ–±—è: ‚ÄûWer ist da?‚Äú –ù–æ, –∫–∞–∫ —è –∏ –æ–∂–∏–¥–∞–ª, –æ—Ç–≤–µ—Ç–∞ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–æ. –õ–∏—à—å —ç—Ç–æ—Ç –¥–æ –¥—Ä–æ–∂–∏ –ø—Ä–æ—Ç–∏–≤–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–Ω–∏–∫–∞–ª –≤ –∫–∞–∂–¥—É—é –∫–ª–µ—Ç–æ—á–∫—É –º–æ–∑–≥–∞‚Ä¶ –û—â—É—â–∞–ª–æ—Å—å, –±—É–¥—Ç–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ —Å –∏–∑–¥—ë–≤–∫–æ–π –≤–æ–¥–∏—Ç –ø–æ –Ω–µ–º—É —Å–∫—Ä–∏–ø—É—á–µ–π –∂–µ–ª–µ–∑—è–∫–æ–π.</p>

        <p>–ò –≤–¥—Ä—É–≥ ‚Äî —Ç–∏—à–∏–Ω–∞. –°–Ω–æ–≤–∞. –Ø –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –∫—Ç–æ –±—ã —Ç–æ –Ω–∏ –±—ã–ª –∑–∞ –¥–≤–µ—Ä—å—é, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ç–æ–∂–µ —É—Å–ª—ã—à–∞–ª, –∫–∞–∫ —è —Å—Ç–æ—é –∏ –º–æ–ª—á–∞ —Å–ª—É—à–∞—é, –≤–Ω–∏–º–∞—è —ç—Ç–æ—Ç –ø—Å–∏—Ö–æ–¥–µ–ª–∏—á–µ—Å–∫–∏–π —É–∂–∞—Å. –ì–¥–µ-—Ç–æ —Å–ø—É—Å—Ç—è —Å–µ–∫—É–Ω–¥ 20 —Ä–∞–∑–¥–∞–ª—Å—è –≥—Ä–æ–º–∫–∏–π –∂–µ–ª–µ–∑–Ω—ã–π –∑–≤—É–∫ ‚Äî –∑–≤—É–∫ –ø–∞–¥–µ–Ω–∏—è –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –º–æ–µ–π –≥—Ä—ë–±–∞–Ω–Ω–æ–π –¥–≤–µ—Ä—å—é. –Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Å–ª–æ–Ω–∏–ª —É—Ö–æ –∫ –¥–≤–µ—Ä–∏, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∂–µ —É–ø–∞–ª–æ... –∏ —á—Ç–æ, —á—ë—Ä—Ç –≤–æ–∑—å–º–∏, —Ç—É—Ç –≤–æ–æ–±—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.</p>

        <p>–ö–∞–∫ –≤–¥—Ä—É–≥, –∫–∞–∫ –≥—Ä–æ–º —Å—Ä–µ–¥–∏ —è—Å–Ω–æ–≥–æ –¥–Ω—è, –∫–∞–∫ —Å–Ω–µ–≥ –≤ –∏—é–ª–µ, —è —É—Å–ª—ã—à–∞–ª –Ω–µ–∂–Ω—ã–π, –º–∏–ª—ã–π –∏ –¥–æ –±–æ–ª–∏ –∑–Ω–∞–∫–æ–º—ã–π –∂–µ–Ω—Å–∫–∏–π –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–∑–Ω—ë—Å:</p>

        <div class="spoiler" id="finalSpoiler" role="button" tabindex="0" aria-pressed="false" aria-label="–û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω—á–ª–∞–π–Ω">
          <div class="veil" aria-hidden="true"></div>
          <div class="line">‚Äî –û–π, –∏–∑–≤–∏–Ω–∏, —É –º–µ–Ω—è <button class="beer-btn" id="beerWord" type="button" aria-label="–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞–¥–µ–Ω–∏–µ –ø–∏–≤–∞">–ø–∏–≤–æ</button> —É–ø–∞–ª–æ.</div>
        </div>

      </article>
    </div>
  </div>

  <!-- Beer + Meme layers -->
  <div id="beerLayer" aria-hidden="true">
    <img id="beerSprite" src="beer.png" alt="–±–∞–Ω–∫–∞ Desperados">
    <div class="puddle" id="puddle"></div>
    <div class="ripple" id="ripple"></div>
  </div>

  <div id="memeLayer" aria-hidden="true"></div>

  <!-- Confession panel -->
  <div class="conf-panel" id="confPanel" role="dialog" aria-label="–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ">
    <div class="conf-inner">
      <div id="confText" aria-live="polite">
        –±—É—Å—è, –∫–æ—Ç–∏–∫, —è –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —Ç–æ–±–æ–π –ª–∏—à—å –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥, –Ω–æ –≤–æ –º–Ω–µ —Ç–µ–ø–ª–∏—Ç—Å—è —á—É–≤—Å—Ç–≤–æ, –±—É–¥—Ç–æ —è –∑–Ω–∞–ª —Ç–µ–±—è –≤–æ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω—è—Ö, –≤–µ–¥—å –±–æ–ª–µ–µ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç—á–∞ –Ω–∞ –∑–µ–º–ª–µ –µ—â–µ –Ω–µ –±—ã–ª–æ. –∏ –Ω–µ –±—É–¥–µ—Ç. —Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—Ä–∏—à—å –º–Ω–µ —Ç—É —Å–∞–º—É—é —Ä–∞–¥–æ—Å—Ç—å –∏ —É–ª—ã–±–∫—É, –∫–æ—Ç–æ—Ä—ã—Ö —É –º–µ–Ω—è –æ—á–µ–Ω—å –¥–∞–≤–Ω–æ –Ω–µ –±—ã–ª–æ. –ø–æ–ª–≥–æ–¥–∞ –Ω–∞–∑–∞–¥ —è –∏ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ —Å–º–æ–≥—É –ø–æ–ª—é–±–∏—Ç—å –∫–æ–≥–æ-—Ç–æ —Ç–∞–∫ —Å–∏–ª—å–Ω–æ –∫–∞–∫ —Ç–µ–±—è. –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∂–¥—É –Ω–∞—à–µ–π –≤—Å—Ç—Ä–µ—á–∏, —è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ü–µ–ª—É—é —Ç–µ–±—è –ø–æ–¥ –ø—Ä–∏–ø–µ–≤ —ç—Ç–æ–π –ø–µ—Å–Ω–∏
      </div>

      <div class="heart-wrap">
        <div class="heart-btn" id="heartBtn" role="button" tabindex="0">üíò</div>
        <div class="heart-caption">—Å–µ—Ä–¥–µ—á–∫–æ —Ç—ã–∫</div>
      </div>
    </div>
    <button id="closeConf" style="position:absolute;right:12px;top:12px;background:rgba(255,255,255,0.04);border:0;padding:8px;border-radius:8px;cursor:pointer;">‚úï</button>
  </div>

  <!-- Video overlay -->
  <div id="videoOverlay" style="display:none;position:fixed;inset:0;z-index:60;align-items:center;justify-content:center;background:rgba(0,0,0,.94);">
    <video id="secretVideo" src="video.mp4" controls playsinline webkit-playsinline preload="metadata" style="display:none;border-radius:12px;max-width:94vw;max-height:78vh;"></video>
    <div id="videoFallback" style="display:flex;flex-direction:column;align-items:center;gap:8px;color:var(--soft);">
      <div style="font-size:44px">üé¨</div>
      <div>–í–∏–¥–µ–æ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –∑–¥–µ—Å—å.</div>
      <div style="opacity:.78;font-size:13px;margin-top:6px">–ü–æ–∫–∞ —á—Ç–æ –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ–∏–Ω–∞–ª–∞ üíù</div>
    </div>
  </div>

  <!-- Audio files (place dark.mp3 and love.mp3 in repo) -->
  <audio id="darkMusic" src="dark.mp3" preload="auto"></audio>
  <audio id="loveMusic" src="love.mp3" preload="auto"></audio>

<script>
/* ========= Utilities & element refs ========= */
const $ = s => document.querySelector(s)
const $$ = s => Array.from(document.querySelectorAll(s))

const intro = $('#intro')
const catCard = $('#catCard')
const storyPanel = $('#storyPanel')
const storyScroll = $('.story-scroll') || $('.story-scroll')
const finalSpoiler = $('#finalSpoiler')
const beerWord = $('#beerWord')
const beerSprite = $('#beerSprite')
const puddle = $('#puddle')
const ripple = $('#ripple')
const memeLayer = $('#memeLayer')
const confPanel = $('#confPanel')
const confText = $('#confText')
const heartBtn = $('#heartBtn')
const closeConf = $('#closeConf')
const videoOverlay = $('#videoOverlay')
const secretVideo = $('#secretVideo')
const videoFallback = $('#videoFallback')
const bgRomantic = $('#bgRomantic')
const bgMystic = $('#bgMystic')
const darkMusic = $('#darkMusic')
const loveMusic = $('#loveMusic')

/* state */
let audioUnlocked = false
let beerStarted = false
let romanceStarted = false
let puddleTimer = null

/* Prevent decorative layers from blocking pointer events (defense) */
;['.bg-decor','.bg-romantic','.vignette','#beerLayer','#memeLayer'].forEach(sel=>{
  const el = document.querySelector(sel)
  if(el) el.style.pointerEvents = 'none'
})

/* Unlock audio on first gesture (important for iOS) */
function unlockAudio(){
  if(audioUnlocked) return
  audioUnlocked = true
  try{
    darkMusic.volume = 0
    loveMusic.volume = 0
    darkMusic.play().then(()=>darkMusic.pause()).catch(()=>{})
    loveMusic.play().then(()=>loveMusic.pause()).catch(()=>{})
  }catch(e){}
}
window.addEventListener('click', unlockAudio, {once:true})
window.addEventListener('touchstart', unlockAudio, {once:true, passive:true})

/* ========= Helper functions ========= */
function fadeAudio(audio, to=0.2, ms=900){
  const from = audio.volume || 0
  const t0 = performance.now()
  function step(now){
    const k = Math.min(1, (now - t0)/ms)
    audio.volume = from + (to - from)*k
    if(k < 1) requestAnimationFrame(step)
  }
  requestAnimationFrame(step)
}
function playFade(audio, to=0.18, ms=900){
  try{ audio.volume = 0; audio.currentTime = 0; audio.play().catch(()=>{}); fadeAudio(audio,to,ms) }catch(e){}
}
function getCenter(el){
  const r = el.getBoundingClientRect()
  return { x: r.left + r.width/2, y: r.top + r.height/2 }
}
function clamp(v,a,b){ return Math.max(a,Math.min(b,v)) }

/* ========= Intro -> Story behavior ========= */
function openStory(){
  // hide intro smoothly, show story panel and start dark music
  intro.classList.add('hidden')
  setTimeout(()=>{ try{ intro.style.display='none' }catch(e){}; storyPanel.classList.add('open'); playFade(darkMusic, 0.16, 900) }, 360)
}
catCard.addEventListener('click', e=>{ e.preventDefault(); openStory() })
catCard.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); openStory() } })

// fallback pointer-capture: if something overlays, still open when touching cat rect
document.addEventListener('pointerdown', e=>{
  try{
    const r = catCard.getBoundingClientRect()
    const x = e.clientX, y = e.clientY
    if(x >= r.left && x <= r.right && y >= r.top && y <= r.bottom){ openStory() }
  }catch(_){}
}, {capture:true, passive:true})

/* close story */
$('#closeStory').addEventListener('click', ()=> storyPanel.classList.remove('open'))

/* ========= Spoiler - veil reveal ========= */
finalSpoiler.addEventListener('click', (e)=>{
  // if clicked on beer word ‚Äî let beer handler run; otherwise just reveal
  if(e.target && e.target.closest && e.target.closest('.beer-btn')) return
  finalSpoiler.classList.add('open'); finalSpoiler.setAttribute('aria-pressed','true')
})
finalSpoiler.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); finalSpoiler.click() } })

/* ========= Beer physics & visual effects ========= */
/* spawn splashes */
function spawnSplashes(cx, cy){
  const count = 28
  for(let i=0;i<count;i++){
    const d = document.createElement('div')
    d.className = 'splash'
    const size = (i<4 ? 14 + Math.random()*14 : 6 + Math.random()*12)
    d.style.width = d.style.height = size + 'px'
    d.style.left = (cx - size/2) + 'px'
    d.style.top = (cy - size/2) + 'px'
    d.style.zIndex = 1000
    d.style.background = 'radial-gradient(circle, rgba(255,240,160,.96), rgba(255,190,80,.8) 56%, rgba(255,150,50,0) 100%)'
    document.body.appendChild(d)
    const dx = (Math.random()*340)-170; const dy = -(60 + Math.random()*140)
    const rot = Math.random()*360-180; const dur = 700 + Math.random()*680
    d.animate([
      { transform: 'translate(0,0) scale(.6)', opacity:1 },
      { transform: `translate(${dx}px, ${dy}px) rotate(${rot}deg) scale(1)`, opacity:1 },
      { transform: `translate(${dx*1.06}px, ${dy+240}px) rotate(${rot*1.05}deg) scale(.28)`, opacity:0 }
    ], { duration: dur, easing:'cubic-bezier(.2,.9,.2,1)', fill:'forwards' })
    setTimeout(()=> d.remove(), dur + 80)
  }
}
function spawnFoam(cx, cy){
  const n = 8 + Math.floor(Math.random()*6)
  for(let i=0;i<n;i++){
    const f = document.createElement('div'); f.className='foam'
    const size = 4 + Math.random()*9
    f.style.width = f.style.height = size + 'px'
    f.style.left = (cx + (Math.random()*70-35)) + 'px'
    f.style.top = (cy + (Math.random()*18-8)) + 'px'
    document.body.appendChild(f)
    f.animate([{ transform:'translateY(0)', opacity:.86 }, { transform:`translateY(${-12 - Math.random()*22}px)`, opacity:0 }], { duration: 900 + Math.random()*700, easing:'ease-out', fill:'forwards' })
    setTimeout(()=> f.remove(), 1100 + Math.random()*700)
  }
}

/* cleanup puddle after some time */
function cleanupPuddleLater(){
  if(puddleTimer) clearTimeout(puddleTimer)
  puddleTimer = setTimeout(()=>{
    puddle.animate([
      { opacity:1, transform:'translateX(-50%) scale(1,.7) rotateX(12deg)' },
      { opacity:0, transform:'translateX(-50%) scale(.58,.18) translateY(8px) rotateX(12deg)' }
    ], { duration: 900, easing:'ease-in-out', fill:'forwards' })
    setTimeout(()=> puddle.style.display = 'none', 980)
  }, 3000 + Math.random()*600)
}

/* run physics-based fall (lightweight integrator) */
function beerFallFrom(x0, y0){
  if(beerStarted) return
  beerStarted = true
  // show beer sprite
  beerSprite.style.display = 'block'
  beerSprite.style.zIndex = 1000
  const startX = x0
  const startY = y0 - 240
  beerSprite.style.left = startX + 'px'
  beerSprite.style.top = startY + 'px'
  beerSprite.style.transform = 'translate(-50%,0) rotate(' + (Math.random()*18 - 9) + 'deg)'

  let state = { x: startX, y: startY, vx: (Math.random()*360 - 180), vy: 0, angle: Math.random()*34 - 17, av: Math.random()*560 - 280 }
  const gravity = 3200, drag = 0.997, floorY = Math.round(window.innerHeight * 0.70), fixedDt = 1/120
  let prev = performance.now(), acc = 0, bounces = 0

  function step(){
    state.vy += gravity * fixedDt
    state.vx *= drag
    state.x += state.vx * fixedDt
    state.y += state.vy * fixedDt
    state.angle += state.av * fixedDt
    state.av *= 0.995
    if(state.y >= floorY){
      state.y = floorY
      if(bounces < 2){
        state.vy *= -(0.32 + Math.random()*0.13)
        state.vx *= 0.72
        state.av *= -0.44
        bounces++
      } else {
        state.vy = 0
        state.vx *= 0.94
        state.av *= 0.92
        state.angle *= 0.985
      }
    }
  }
  function render(){
    beerSprite.style.left = state.x + 'px'
    beerSprite.style.top = state.y + 'px'
    beerSprite.style.transform = 'translate(-50%,0) rotate(' + state.angle + 'deg)'
  }
  function loop(now){
    let dt = (now - prev)/1000; if(dt > .05) dt = .05; prev = now; acc += dt
    while(acc >= fixedDt){ step(); acc -= fixedDt }
    render()
    if(!(bounces >= 2 && Math.abs(state.vy) < 18 && state.y >= floorY)){
      requestAnimationFrame(loop)
    } else {
      // impact
      try{ navigator.vibrate && navigator.vibrate([80,40,70]) }catch(e){}
      spawnSplashes(state.x, floorY + 20)
      spawnFoam(state.x, floorY + 18)
      // puddle appears modestly (not gigantic)
      const maxW = Math.max(260, Math.min(window.innerWidth * 0.56, 760))
      const maxH = Math.max(52, Math.min(window.innerWidth * 0.12, 88))
      puddle.style.display = 'block'
      puddle.animate([
        { opacity:0, width:'24px', height:'10px', transform:'translateX(-50%) scale(.22,.24) rotateX(12deg)' },
        { opacity:1, width: maxW + 'px', height: maxH + 'px', transform:'translateX(-50%) scale(1,.7) rotateX(12deg)' }
      ], { duration: 820, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards' })
      ripple.animate([{ opacity:.9, width:'26px', height:'10px', transform:'translateX(-50%) scale(.2)' },{ opacity:0, width:'360px', height:'92px', transform:'translateX(-50%) scale(1)' }], { duration:880, easing:'ease-out', fill:'forwards' })
      cleanupPuddleLater()
      // start romance transition after short delay
      setTimeout(()=> startRomance(), 1200)
    }
  }
  requestAnimationFrame(loop)
}

/* beer trigger: beerWord click */
beerWord.addEventListener('click', (e)=>{
  e.preventDefault(); e.stopPropagation()
  if(!finalSpoiler.classList.contains('open')) { finalSpoiler.classList.add('open'); finalSpoiler.setAttribute('aria-pressed','true') }
  const c = getCenter(beerWord)
  beerFallFrom(c.x, c.y)
})
beerWord.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); beerWord.click() } })

/* ========= Romance transition: crossfade music + activate bg + spawn memes ========= */
function crossFadeToLove(){
  try{
    const a = darkMusic, b = loveMusic
    b.currentTime = 0; b.volume = 0; b.play().catch(()=>{})
    const fromVol = a.volume || 0.16
    const t0 = performance.now(), ms = 1400
    function step(now){
      const k = Math.min(1,(now - t0)/ms)
      a.volume = fromVol * (1 - k)
      b.volume = 0.22 * k
      if(k < 1) requestAnimationFrame(step)
      else { try{ a.pause(); a.currentTime = 0 }catch(_){} }
    }
    requestAnimationFrame(step)
  }catch(e){}
}
function startRomance(){
  if(romanceStarted) return; romanceStarted = true
  // soften mystic background, show romantic background
  try{ document.getElementById('bgMystic').style.opacity = '0.06' }catch(e){}
  bgRomantic.classList.add('active')
  crossFadeToLove()
  spawnMemes(26)
}

/* ========= Spawn memes with size/rotation/drift and collision pushing ========= */
function spawnMemes(count=20){
  memeLayer.innerHTML = ''
  memeLayer.style.pointerEvents = 'auto'
  const items = []
  for(let i=0;i<count;i++){
    const frame = document.createElement('div'); frame.className = 'meme-frame'
    const size = 100 + Math.random()*220
    frame.style.width = size + 'px'; frame.style.height = size + 'px'
    const left = clamp(2 + Math.random()*86, 2, 92), top = clamp(6 + Math.random()*80,4,92)
    frame.style.left = left + '%'; frame.style.top = top + '%'
    const img = document.createElement('img'); img.src = 'meme.png'; img.alt = '–º–µ–º'
    frame.appendChild(img)
    memeLayer.appendChild(frame)
    items.push({ el: frame, left, top, w: size, h: size, vx: (Math.random()*240-120), vy: (Math.random()*240-120) })
  }

  // simple iterative separation then animate floats
  setTimeout(()=>{
    for(let iter=0; iter<4; iter++){
      for(let a=0;a<items.length; a++){
        for(let b=a+1;b<items.length;b++){
          const A = items[a], B = items[b]
          const ra = A.el.getBoundingClientRect(), rb = B.el.getBoundingClientRect()
          const ax = ra.left + ra.width/2, ay = ra.top + ra.height/2
          const bx = rb.left + rb.width/2, by = rb.top + rb.height/2
          const dx = ax - bx, dy = ay - by, dist = Math.sqrt(dx*dx + dy*dy) || 1
          const min = (ra.width + rb.width) * 0.5 * 0.82
          if(dist < min){
            const push = (min - dist) * 0.5, nx = dx/dist, ny = dy/dist
            const pushXper = (nx * push) / window.innerWidth * 100
            const pushYper = (ny * push) / window.innerHeight * 100
            A.left = clamp(A.left + pushXper, 2, 92)
            A.top = clamp(A.top + pushYper, 2, 92)
            B.left = clamp(B.left - pushXper, 2, 92)
            B.top = clamp(B.top - pushYper, 2, 92)
          }
        }
      }
    }

    items.forEach(it=>{
      it.el.style.left = it.left + '%'; it.el.style.top = it.top + '%'
      const dur = 2000 + Math.random()*5200
      const rx = (Math.random()*70-35), ry = (Math.random()*70-35), rz = (Math.random()*140-70)
      it.el.animate([
        { transform: `translate3d(0,0,0) rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg)` },
        { transform: `translate3d(${(it.vx*0.05).toFixed(1)}px,${(it.vy*0.03 - 26).toFixed(1)}px,0) rotateX(${(rx*1.05).toFixed(1)}deg) rotateY(${(ry*1.05).toFixed(1)}deg) rotateZ(${(rz+12).toFixed(1)}deg)` },
        { transform: `translate3d(${- (it.vx*0.03).toFixed(1)}px,${(-it.vy*0.02).toFixed(1)}px,0) rotateX(${(rx*0.8).toFixed(1)}deg) rotateY(${(ry*0.8).toFixed(1)}deg) rotateZ(${(rz-9).toFixed(1)}deg)` },
        { transform: `translate3d(0,0,0) rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg)` }
      ], { duration: dur, iterations: Infinity, easing: 'ease-in-out' })

      // click to remove memes and show confession
      it.el.addEventListener('click', ()=>{
        $$('.meme-frame').forEach(m=> m.classList.add('fade-out'))
        setTimeout(()=>{ memeLayer.innerHTML=''; showConfession() }, 420)
      }, { once:true })
    })
  }, 60)
}

/* ========= Confession animation (per-character) ========= */
function animateConfession(){
  const raw = confText.textContent.trim()
  // split into sentence-like segments for nicer lines
  const segments = raw.match(/[^.!?]+[.!?]?/g)?.map(s=>s.trim()).filter(Boolean) || [raw]
  confText.innerHTML = ''
  segments.forEach((seg, si)=>{
    const p = document.createElement('p')
    for(let i=0;i<seg.length;i++){
      const ch = seg[i]
      const span = document.createElement('span'); span.className = 'conf-char'
      span.textContent = (ch === ' ' ? '\u00A0' : ch)
      // slight randomized delay to make the line-by-line cascade
      const delay = (si*0.22) + (i*0.012) + Math.random()*0.03
      span.style.animationDelay = delay + 's'
      p.appendChild(span)
    }
    confText.appendChild(p)
    setTimeout(()=>{ p.style.opacity = 1; p.style.transform = 'translateY(0)' }, 280 + si*200)
  })
}

/* show confession */
function showConfession(){
  bgRomantic.classList.add('active')
  animateConfession()
  confPanel.classList.add('open')
}

/* heart click -> video overlay */
heartBtn.addEventListener('click', ()=>{
  videoOverlay.style.display = 'flex'
  videoOverlay.setAttribute('aria-hidden','false')
  try{
    secretVideo.style.display = 'block'
    videoFallback.style.display = 'none'
    secretVideo.play().catch(()=>{ secretVideo.style.display='none'; videoFallback.style.display='flex' })
  }catch(e){ videoFallback.style.display = 'flex' }
})
heartBtn.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); heartBtn.click() } })
videoOverlay.addEventListener('click', (e)=>{ if(e.target === videoOverlay){ videoOverlay.style.display = 'none'; try{ secretVideo.pause() }catch(_e){} } })
secretVideo.addEventListener('error', ()=>{ secretVideo.style.display = 'none'; videoFallback.style.display = 'flex' })
closeConf.addEventListener('click', ()=> confPanel.classList.remove('open'))

/* ESC closes overlays */
document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape'){ if(storyPanel.classList.contains('open')) storyPanel.classList.remove('open'); if(confPanel.classList.contains('open')) confPanel.classList.remove('open'); if(videoOverlay.style.display === 'flex') videoOverlay.style.display = 'none' } })

/* exported quick helpers for debug from console (optional) */
window._gift = { openStory, beerFallFrom, startRomance, spawnMemes, showConfession }

</script>
</body>
</html>
