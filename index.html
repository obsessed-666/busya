<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
<title>–ë—É—Å—è</title>

<link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">

<style>
  /* reset */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;background:#0b0b12;color:#fff;font-family:Montserrat,system-ui,Segoe UI,Roboto,-apple-system;overflow-x:hidden;-webkit-font-smoothing:antialiased}
  img{max-width:100%;display:block}

  /* sections */
  section{min-height:100vh;width:100vw;display:flex;align-items:center;justify-content:center;padding:24px}

  /* ========== INTRO (–∫–æ—Ç) ========== */
  #intro{
    position:relative;
    width:100%;
    min-height:100vh;
    display:flex;align-items:center;justify-content:center;
    background:radial-gradient(circle at 40% 35%, #18202f 0%, #0b0b12 60%);
    overflow:hidden;
  }

  /* moving mist / particles behind cat */
  #intro::before{
    content:"";
    position:absolute;inset:0;
    background-image:
      radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.06), transparent),
      radial-gradient(2px 2px at 70% 60%, rgba(255,255,255,0.05), transparent),
      radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,0.035), transparent);
    background-size: 120% 120%, 140% 140%, 100% 100%;
    animation: drift 22s linear infinite;
    opacity:0.5;
    pointer-events:none;
  }
  @keyframes drift{ from{transform:translateY(0)} to{transform:translateY(240px)} }

  /* soft vignette + subtle bokeh */
  #intro::after{
    content:"";
    position:absolute;inset:0;
    background:linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.6));
    pointer-events:none;
  }

  #cat{
    z-index:5;
    width:82vw; max-width:420px; border-radius:20px;
    box-shadow:0 30px 70px rgba(0,0,0,.65), 0 6px 18px rgba(0,0,0,.4);
    transform-origin:center;
    transition:transform .45s cubic-bezier(.2,.9,.3,1);
    cursor:pointer;
  }
  #cat:active{ transform:scale(.995) }

  /* hint */
  .hint{
    position:absolute;bottom:36px;left:50%;transform:translateX(-50%);
    color:rgba(255,255,255,.75);font-size:14px;z-index:6;
    backdrop-filter: blur(2px);
  }

  /* ========== STORY (mood + text) ========== */
  #storyWrap{
    width:100%; max-width:820px; margin:0 auto; padding:28px; display:none;
  }
  #story{
    background:transparent; color:#e9e9ef; line-height:1.65; font-size:15px;
    padding-bottom:120px;
  }
  .story-par{margin-bottom:18px}

  /* spoiler block (final line) */
  .spoiler{
    position:relative; margin-top:16px; padding:14px 16px; border-radius:12px;
    background:linear-gradient(180deg,#0f1016,#10101a); cursor:pointer; overflow:hidden;
  }
  .spoiler-cover{
    position:absolute; inset:0; display:flex;align-items:center;justify-content:center;
    background:rgba(10,10,14,.95); color:rgba(255,255,255,.85); font-weight:600;
    transition:transform .55s ease, opacity .55s ease; z-index:4;
  }
  .spoiler.open .spoiler-cover{ transform:translateY(-110%); opacity:0; pointer-events:none }
  .spoiler .line{position:relative;z-index:2; padding:6px 0; color:#fff; font-size:16px }
  .beer-word{color:#ffd166;text-decoration:underline; cursor:pointer; font-weight:600}

  /* ========== BEER SCENE ========== */
  #beerScene{ position:fixed; inset:0; pointer-events:none; z-index:50; display:block }
  #beer{
    position:absolute; left:50%; top:-260px; transform:translateX(-50%) rotate(0deg); width:140px;
    filter:drop-shadow(0 30px 60px rgba(0,0,0,.6));
    display:none;
  }
  .splash{position:absolute;border-radius:50%;background:radial-gradient(circle,#ffd86a,#c98a2b); opacity:0; pointer-events:none}
  #puddle{
    position:absolute; left:50%; transform:translateX(-50%); bottom:12vh; width:18px; height:8px; border-radius:999px;
    background:radial-gradient(circle,#ffd86a,#ffb14a); filter:blur(3px); opacity:0;
  }

  /* screen shake class */
  .shake{ animation:shakeAnim .45s linear; }
  @keyframes shakeAnim{
    0%{transform:translate(0,0)}
    20%{transform:translate(-6px,4px)}
    40%{transform:translate(6px,-6px)}
    60%{transform:translate(-4px,3px)}
    80%{transform:translate(4px,-3px)}
    100%{transform:translate(0,0)}
  }

  /* ========== LOVE MODE (bg & hearts) ========== */
  .love-mode{
    animation:loveBg 1200ms ease forwards;
  }
  @keyframes loveBg{
    from{filter:blur(4px);opacity:0.6}
    to{filter:none;opacity:1}
  }
  /* hearts background applied on body via class (uses hearts image) */
  body.love{
    background:linear-gradient(120deg,#2b1055,#7597de,#ff6ec7);
    background-size:400% 400%;
    animation:gradientShift 16s ease infinite;
  }
  @keyframes gradientShift{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}

  /* if you put hearts image overlay (we'll also add hearts-bg.jpg earlier if you want more texture) */
  body.love::after{
    content:""; position:fixed; inset:0; background-image:url('hearts-bg.jpg'); background-size:cover; background-position:center; opacity:.28; pointer-events:none;
  }

  /* ========== MEMES ========== */
  .meme{
    position:fixed; width:120px; z-index:70; cursor:pointer; transform-origin:center;
    animation:floaty 6s ease-in-out infinite, spinSlow 18s linear infinite;
  }
  @keyframes floaty{0%{transform:translateY(0)}50%{transform:translateY(-22px)}100%{transform:translateY(0)}}
  @keyframes spinSlow{0%{rotate:0deg}100%{rotate:360deg}}

  /* ========== LOVE TEXT overlay & heart button ========== */
  #loveOverlay{
    position:fixed; inset:0; background:rgba(0,0,0,0.9); display:none; align-items:center; justify-content:center; z-index:90;
    padding:28px; text-align:center; font-family:'Marck Script',cursive; font-size:24px; line-height:1.6;
  }
  #loveOverlay .heart{
    display:inline-block; margin-left:8px; font-size:36px; color:#ff4671; cursor:pointer; transition:transform .25s ease;
  }
  #loveOverlay .heart:active{ transform:scale(.95) }
  #loveOverlay .heart:hover{ transform:scale(1.07) }

  /* ========== VIDEO overlay ========== */
  #videoOverlay{
    position:fixed; inset:0; background:rgba(0,0,0,0.96); display:none; align-items:center; justify-content:center; z-index:110; padding:18px;
  }
  #videoOverlay video{ width:94vw; max-width:820px; height:auto; border-radius:12px; box-shadow:0 40px 90px rgba(0,0,0,.7); background:#000 }
  #videoOverlay .placeholder{ color:#fff; opacity:.9; font-size:18px; text-align:center; max-width:80vw }

  /* responsive tweaks */
  @media (min-width:900px){ #cat{max-width:520px} .meme{width:140px} #loveOverlay{font-size:30px} }
  @media (max-width:420px){ .meme{width:92px} #loveOverlay{font-size:20px} #videoOverlay video{width:96vw} .spoiler .line{font-size:15px} }
</style>
</head>
<body>

  <!-- INTRO: cat only -->
  <section id="intro">
    <img id="cat" src="cat.jpg" alt="–∫–æ—Ç –ë—É—Å—è ‚Äî –Ω–∞–∂–º–∏">
    <div class="hint">–Ω–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞ üêæ</div>
  </section>

  <!-- STORY: hidden initially, revealed after cat click -->
  <section id="storyWrap" aria-hidden="true">
    <div id="story">
      <p class="story-par">–û–¥–Ω–∞–∂–¥—ã —è —Å–∏–¥–µ–ª –∫–∞–∫ –Ω–∏ –≤ —á—ë–º –Ω–µ –±—ã–≤–∞–ª–æ –¥–æ–º–∞, —Å–ª—É—à–∞–ª –≥—Ä—É—Å—Ç–Ω—É—é –º—É–∑—ã–∫—É, —Å–º–æ—Ç—Ä–µ–ª –≤ –æ–∫–Ω–æ, –¥—É–º–∞–ª –æ —Å–≤–æ—ë–º —Ç–ª–µ–Ω–Ω–æ–º –±—É–¥—É—â–µ–º, –∫–∞–∫ –≤–¥—Ä—É–≥‚Ä¶ –∑–≤–æ–Ω–æ–∫ –≤ –¥–≤–µ—Ä—å. –Ø –æ–ø–µ—à–∏–ª, –≤–µ–¥—å –±—ã–ª–æ 3 —á–∞—Å–∞ –Ω–æ—á–∏, –∏ —è –Ω–∏–∫–æ–≥–æ –Ω–µ –∂–¥–∞–ª. –í —Ç–æ—Ç –¥–µ–Ω—å –æ—â—É—â–µ–Ω–∏—è –ø–æ–∏—Å—Ç–∏–Ω–µ –±—ã–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ.</p>

      <p class="story-par">–ù–∞ –¥–≤–æ—Ä–µ —Å—Ç–æ—è–ª–∞ –ª—ë–≥–∫–∞—è –¥—ã–º–∫–∞, –∞ –Ω–∞ –Ω–µ–±–µ –æ—Ç—á—ë—Ç–ª–∏–≤–æ –≤–∏–¥–Ω–µ–ª–∞—Å—å —è—Ä–∫–∞—è –ø–æ–ª–Ω–∞—è –ª—É–Ω–∞, –ø—Ä—è–º–æ –∫–∞–∫ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî –º—Ä–∞—á–Ω–∞—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è. –ü–æ–≥–æ–¥–∞ –∑–∞ –æ–∫–Ω–æ–º –ª–∏—à—å –¥–æ–±–∞–≤–ª—è–ª–∞ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–º—É —Å–æ–±—ã—Ç–∏—é.</p>

      <p class="story-par">¬´–£ —Å–æ—Å–µ–¥–∞, –Ω–∞–≤–µ—Ä–Ω–æ–µ, —á—Ç–æ-—Ç–æ —Å—Ç—Ä—è—Å–ª–æ—Å—å¬ª, ‚Äî –ø–æ—á–µ—Å–∞–≤ —Ä–µ–ø—É, –ø–æ–¥—É–º–∞–ª —è. –ù–æ —á—É–≤—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥–∏ –∑–∞—Ç–º–∏–ª–æ –º–æ–π —Ä–∞—Å—Å—É–¥–æ–∫, –∏ —è –º–µ–¥–ª–µ–Ω–Ω–æ, —Ç–∏—Ö–∏–º —à–∞–≥–æ–º –ø–æ–¥–æ—à—ë–ª –∫ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏.</p>

      <p class="story-par">–°—Ç–æ—è–ª–∞ –ø–æ–ª–Ω–µ–π—à–∞—è —Ç–∏—à–∏–Ω–∞. –Ø –ø—ã—Ç–∞–ª—Å—è –ø—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è –∫ –∑–≤—É–∫–∞–º –ø–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É –¥–≤–µ—Ä–∏, –Ω–æ –∏—Ö –Ω–µ –±—ã–ª–æ. –Ø —Å—Ç–æ—è–ª —Ç–∞–∫ –≥–¥–µ-—Ç–æ –º–∏–Ω—É—Ç—É, –Ω–æ –ø–æ –æ—â—É—â–µ–Ω–∏—è–º –æ–Ω–∞ –¥–ª–∏–ª–∞—Å—å —Ü–µ–ª—É—é –≤–µ—á–Ω–æ—Å—Ç—å. –í –≥–æ–ª–æ–≤–µ –±—ã–ª–∞ –ª–∏—à—å —Ä–∞—Å—Ç–µ—Ä—è–Ω–Ω–æ—Å—Ç—å –∏ —Å–º—è—Ç–µ–Ω–∏–µ.</p>

      <p class="story-par">–ö–∞–∫ –≤–¥—Ä—É–≥ —è —É—Å–ª—ã—à–∞–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —É–≤–µ—Ä–µ–Ω–Ω–æ –≤–æ–¥–∏–ª –Ω–æ–≥—Ç–µ–º –ø–æ —Å—Ç–∞–ª—å–Ω–æ–º—É –ª–∏—Å—Ç—É. –Ø —Å–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥—Å—è, –≤—Å—ë —Ç–µ–ª–æ —Å –≥–æ–ª–æ–≤—ã –¥–æ –Ω–æ–≥ –ø—Ä–æ–±—Ä–∞–ª–æ –º—É—Ä–∞—à–∫–∞–º–∏, —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Ä–µ–∑–∫–∏–π —Å–∫–∞—á–æ–∫ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞ ‚Äî —Ä–∞–∑—É–º —è–≤–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, —á—Ç–æ —á—Ç–æ-—Ç–æ —Ç—É—Ç –Ω–µ —Ç–∞–∫.</p>

      <p class="story-par">–Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏, —Å—Ü–µ–ø–∏–≤ –∑—É–±—ã, –≤—ã–¥–∞–≤–∏–ª –∏–∑ —Å–µ–±—è: ‚ÄûWer ist da?‚Äú –ù–æ, –∫–∞–∫ —è –∏ –æ–∂–∏–¥–∞–ª, –æ—Ç–≤–µ—Ç–∞ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–æ. –õ–∏—à—å —ç—Ç–æ—Ç –¥–æ –¥—Ä–æ–∂–∏ –ø—Ä–æ—Ç–∏–≤–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–Ω–∏–∫–∞–ª –≤ –∫–∞–∂–¥—É—é –∫–ª–µ—Ç–æ—á–∫—É –º–æ–∑–≥–∞‚Ä¶</p>

      <p class="story-par">–ò –≤–¥—Ä—É–≥ ‚Äî —Ç–∏—à–∏–Ω–∞. –°–Ω–æ–≤–∞.</p>

      <p class="story-par">–ì–¥–µ-—Ç–æ —Å–ø—É—Å—Ç—è —Å–µ–∫—É–Ω–¥ 20 —Ä–∞–∑–¥–∞–ª—Å—è –≥—Ä–æ–º–∫–∏–π –∂–µ–ª–µ–∑–Ω—ã–π –∑–≤—É–∫ ‚Äî –∑–≤—É–∫ –ø–∞–¥–µ–Ω–∏—è –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –º–æ–µ–π –¥–≤–µ—Ä—å—é.</p>

      <p class="story-par">–Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Å–ª–æ–Ω–∏–ª —É—Ö–æ –∫ –¥–≤–µ—Ä–∏, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∂–µ —É–ø–∞–ª–æ... –∏ —á—Ç–æ, —á—ë—Ä—Ç –≤–æ–∑—å–º–∏, —Ç—É—Ç –≤–æ–æ–±—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.</p>

      <!-- SPOILER final line -->
      <div id="finalSpoiler" class="spoiler" role="button" aria-pressed="false">
        <div class="spoiler-cover">–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å</div>
        <div class="line">‚Äî –û–π, –∏–∑–≤–∏–Ω–∏, —É –º–µ–Ω—è <span class="beer-word" id="beerWord">–ø–∏–≤–æ</span> —É–ø–∞–ª–æ.</div>
      </div>

    </div>
  </section>

  <!-- BEER visual layer (hidden until click) -->
  <div id="beerScene" aria-hidden="true">
    <img id="beer" src="beer.png" alt="–±–∞–Ω–∫–∞" />
    <div id="puddle"></div>
  </div>

  <!-- LOVE text (appears after clicking meme) -->
  <div id="loveOverlay" role="dialog" aria-hidden="true">
    –±—É—Å—è, –∫–æ—Ç–∏–∫, —è –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —Ç–æ–±–æ–π –ª–∏—à—å –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥, –Ω–æ –≤–æ –º–Ω–µ —Ç–µ–ø–ª–∏—Ç—Å—è —á—É–≤—Å—Ç–≤–æ, –±—É–¥—Ç–æ —è –∑–Ω–∞–ª —Ç–µ–±—è –≤–æ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω—è—Ö, –≤–µ–¥—å –±–æ–ª–µ–µ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç—á–∞ –Ω–∞ –∑–µ–º–ª–µ –µ—â–µ –Ω–µ –±—ã–ª–æ. –∏ –Ω–µ –±—É–¥–µ—Ç. —Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—Ä–∏—à—å –º–Ω–µ —Ç—É —Å–∞–º—É—é —Ä–∞–¥–æ—Å—Ç—å –∏ —É–ª—ã–±–∫—É, –∫–æ—Ç–æ—Ä—ã—Ö —É –º–µ–Ω—è –æ—á–µ–Ω—å –¥–∞–≤–Ω–æ –Ω–µ –±—ã–ª–æ. –ø–æ–ª–≥–æ–¥–∞ –Ω–∞–∑–∞–¥ —è –∏ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ —Å–º–æ–≥—É –ø–æ–ª—é–±–∏—Ç—å –∫–æ–≥–æ-—Ç–æ —Ç–∞–∫ —Å–∏–ª—å–Ω–æ –∫–∞–∫ —Ç–µ–±—è. –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∂–¥—É –Ω–∞—à–µ–π –≤—Å—Ç—Ä–µ—á–∏, —è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ü–µ–ª—É—é —Ç–µ–±—è –ø–æ–¥ –ø—Ä–∏–ø–µ–≤ —ç—Ç–æ–π –ø–µ—Å–Ω–∏
    <div style="margin-top:18px">
      <span class="heart" id="heartBtn">üíò</span>
    </div>
  </div>

  <!-- VIDEO overlay (hidden initially) -->
  <div id="videoOverlay" aria-hidden="true">
    <video id="secretVideo" src="video.mp4" controls playsinline></video>
    <div class="placeholder" id="videoPlaceholder" style="display:none">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –≤–∏–¥–µ–æ ‚Äî –ø–æ–ª–æ–∂–∏ —Ñ–∞–π–ª <b>video.mp4</b> –≤ –∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.</div>
  </div>

  <!-- audio -->
  <audio id="darkMusic" src="dark.mp3" preload="auto"></audio>
  <audio id="loveMusic" src="love.mp3" preload="auto"></audio>

<script>
window.addEventListener('load', () => {
  // elements
  const intro = document.getElementById('intro');
  const cat = document.getElementById('cat');
  const storyWrap = document.getElementById('storyWrap');
  const finalSpoiler = document.getElementById('finalSpoiler');
  const beerWord = document.getElementById('beerWord');
  const beer = document.getElementById('beer');
  const puddle = document.getElementById('puddle');
  const darkMusic = document.getElementById('darkMusic');
  const loveMusic = document.getElementById('loveMusic');
  const loveOverlay = document.getElementById('loveOverlay');
  const heartBtn = document.getElementById('heartBtn') || document.getElementById('heartBtn');
  const videoOverlay = document.getElementById('videoOverlay');
  const secretVideo = document.getElementById('secretVideo');
  const videoPlaceholder = document.getElementById('videoPlaceholder');

  // defensive hide (guarantee)
  storyWrap.style.display = 'none';
  loveOverlay.style.display = 'none';
  videoOverlay.style.display = 'none';
  beer.style.display = 'none';
  puddle.style.opacity = 0;

  // helper to create splash circle
  function createSplash(xPct) {
    const s = document.createElement('div');
    s.className = 'splash';
    const size = 8 + Math.random()*18;
    s.style.width = size+'px';
    s.style.height = size+'px';
    s.style.left = xPct + '%';
    s.style.bottom = '18vh';
    s.style.transform = 'translateX(-50%)';
    document.getElementById('beerScene').appendChild(s);
    // animate splash upward and fade
    s.animate([
      { transform: `translate(-50%,0) scale(0.4)`, opacity:1 },
      { transform: `translate(${(Math.random()*120-60)}px,-120px) scale(${1+Math.random()*0.8})`, opacity:0 }
    ], { duration: 900 + Math.random()*300, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards' });
    setTimeout(()=> s.remove(), 1400);
  }

  // 1) initial interaction: click cat -> show story + start dark music
  cat.addEventListener('click', () => {
    intro.style.display = 'none';
    storyWrap.style.display = 'block';
    try { darkMusic.currentTime = 0; darkMusic.play().catch(()=>{}); } catch(e){}
  });

  // 2) spoiler open
  finalSpoiler.addEventListener('click', function(ev){
    if(this.classList.contains('open')) return;
    this.classList.add('open');
    this.setAttribute('aria-pressed','true');
  });

  // 3) beer falling animation (improved)
  beerWord.addEventListener('click', () => {
    // reveal beer image and animate along a nice arc (using WA)
    beer.style.display = 'block';
    beer.style.opacity = 1;

    // calculate a little left/right random offset to feel organic
    const horizontalOffset = (Math.random()*80 - 40); // px
    const startTop = -260;
    const midTop = window.innerHeight * 0.55;
    const endTop = window.innerHeight * 0.65;

    // Keyframes: we animate top + rotate + translateX for slight lateral
    const kf = [
      { top: startTop + 'px', transform: 'translateX(-50%) rotate(0deg) scale(1)' },
      { top: (midTop - 30) + 'px', transform: `translateX(calc(-50% + ${horizontalOffset/2}px)) rotate(90deg) scale(1.08)` },
      { top: endTop + 'px', transform: `translateX(calc(-50% + ${horizontalOffset}px)) rotate(140deg) scale(1.1)` }
    ];
    const anim = beer.animate(kf, { duration: 1000, easing: 'cubic-bezier(.25,.9,.3,1)', fill:'forwards' });

    // create multiple splashes timed near impact
    setTimeout(()=> {
      for (let i=0;i<10;i++){
        createSplash(50 + (Math.random()*30 - 15));
      }
      // puddle spread
      puddle.style.opacity = 1;
      puddle.style.display = 'block';
      puddle.animate([
        { width: '18px', opacity:1 },
        { width: Math.min(window.innerWidth*0.6, 360) + 'px', opacity:1 }
      ], { duration: 900, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards'});

      // subtle screen shake
      document.body.classList.add('shake');
      setTimeout(()=>document.body.classList.remove('shake'), 480);

    }, 840);

    // after landing -> switch mood and spawn memes
    setTimeout(()=> {
      // mode change
      document.body.classList.add('love');
      try { darkMusic.pause(); } catch(e){}
      try { loveMusic.currentTime = 0; loveMusic.play().catch(()=>{}); } catch(e){}
      // spawn memes (big) and hide story + beer visuals
      spawnMemesAndHide();
    }, 1400);
  });

  // spawn memes, hide previous content
  function spawnMemesAndHide(){
    // hide story and beer scene
    storyWrap.style.display = 'none';
    beer.style.display = 'none';
    puddle.style.display = 'none';

    // center safe area to avoid overlapping UI (we still place randomly)
    const count = 10;
    for(let i=0;i<count;i++){
      const img = document.createElement('img');
      img.src = 'meme.png';
      img.className = 'meme';
      // bigger and varied sizes
      const scale = 90 + Math.random()*70; // px
      img.style.width = scale + 'px';
      // random but avoid edges
      img.style.left = (6 + Math.random()*88) + 'vw';
      img.style.top = (6 + Math.random()*80) + 'vh';
      img.style.opacity = 0;
      img.style.transition = 'opacity .6s ease ' + (Math.random()*1.2) + 's, transform .6s ease';
      document.body.appendChild(img);
      // fade in after inserting
      setTimeout(()=> { img.style.opacity = 1; img.style.transform = 'translateY(0)'; }, 60 + Math.random()*600);
      // click -> show love overlay (confession)
      img.addEventListener('click', () => {
        // remove all memes (or keep them subtly)
        const memes = document.querySelectorAll('.meme');
        memes.forEach(m=> m.remove());
        showLoveText();
      });
    }
  }

  // show confession overlay (love text)
  function showLoveText(){
    loveOverlay.style.display = 'flex';
    loveOverlay.setAttribute('aria-hidden','false');
  }

  // heart -> show video overlay
  const heart = document.getElementById('heartBtn');
  heart.addEventListener('click', () => {
    loveOverlay.style.display = 'none';
    // show video overlay and try to play video
    videoOverlay.style.display = 'flex';
    videoOverlay.setAttribute('aria-hidden','false');

    // if video can't load, show placeholder
    secretVideo.addEventListener('error', showVideoPlaceholder);
    secretVideo.addEventListener('stalled', showVideoPlaceholder);
    secretVideo.addEventListener('loadeddata', () => {
      // hide placeholder if it exists
      if (videoPlaceholder) videoPlaceholder.style.display = 'none';
      // show video element (if not visible)
      secretVideo.style.display = 'block';
      secretVideo.play().catch(()=>{});
    });

    // fallback: if file not present, after small timeout show placeholder
    setTimeout(()=> {
      // if readyState is 0 or networkState indicates no resource -> placeholder
      if (typeof secretVideo.readyState !== 'undefined' && secretVideo.readyState < 1) {
        showVideoPlaceholder();
      }
    }, 800);
  });

  function showVideoPlaceholder(){
    if (videoPlaceholder) videoPlaceholder.style.display = 'block';
    // hide video element if broken
    secretVideo.style.display = 'none';
  }
});
</script>

</body>
</html>
