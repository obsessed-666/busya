<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>–ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –ë—É—Å–∏</title>

<link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Merriweather:wght@400;500;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* ===== Reset & base ===== */
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --vh:1vh;
  --safe-top:env(safe-area-inset-top,0px);
  --safe-bottom:env(safe-area-inset-bottom,0px);
  --accent-pink:#ff5f9b;
  --text:#f1eaf4;
}
html,body{height:100%;width:100%;background:#050913;color:var(--text);font-family:Montserrat,system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;-webkit-font-smoothing:antialiased}
img{display:block;max-width:100%;-webkit-user-drag:none;user-select:none}
button,[role="button"],.tap-target{-webkit-tap-highlight-color:transparent;touch-action:manipulation}
body{overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;scroll-behavior:smooth}

/* remove global scroll-snap to avoid unexpected snapping */
html,body{scroll-snap-type:none}

/* cinematic micro-breath */
#page{position:relative;min-height:100vh;animation:breathe 26s ease-in-out infinite}
@keyframes breathe{0%{transform:scale(1)}50%{transform:scale(1.004)}100%{transform:scale(1)}}

/* ===== Backgrounds ===== */
.bg-mystic,.bg-romantic{position:fixed;inset:0;z-index:-20;pointer-events:none;overflow:hidden;transition:opacity .9s ease}
.bg-mystic{
  background:
    radial-gradient(circle at 14% 12%, rgba(90,110,155,0.07), transparent 14%),
    radial-gradient(circle at 82% 78%, rgba(90,110,155,0.05), transparent 20%),
    linear-gradient(180deg,#071226 0%,#02040b 72%);
  opacity:1;
}
.bg-mystic .mist{position:absolute;inset:-24%;filter:blur(58px);mix-blend-mode:screen;opacity:.22}
.bg-mystic .mist.m1{background:radial-gradient(circle at 24% 32%,rgba(165,176,235,.18),transparent 40%);animation:mistA 28s linear infinite}
.bg-mystic .mist.m2{background:radial-gradient(circle at 76% 62%,rgba(120,130,180,.14),transparent 40%);animation:mistB 36s linear infinite}
.bg-mystic .mist.m3{background:radial-gradient(circle at 50% 82%,rgba(110,120,150,.12),transparent 34%);animation:mistC 44s linear infinite}
.bg-mystic .grain{position:absolute;inset:0;opacity:.14;mix-blend-mode:overlay;background-image:repeating-linear-gradient(0deg,rgba(255,255,255,.02) 0 1px,rgba(0,0,0,.02) 1px 2px);animation:grainShift 1.2s steps(4) infinite}
@keyframes grainShift{0%{transform:translate(0,0)}25%{transform:translate(-2px,1px)}50%{transform:translate(1px,-1px)}75%{transform:translate(-1px,2px)}100%{transform:translate(0,0)}}
@keyframes mistA{0%{transform:translateY(0)}50%{transform:translateY(-86px)}100%{transform:translateY(0)}}
@keyframes mistB{0%{transform:translateY(0)}50%{transform:translateY(-130px)}100%{transform:translateY(0)}}
@keyframes mistC{0%{transform:translateY(0)}50%{transform:translateY(-68px)}100%{transform:translateY(0)}}

/* romantic bg uses repeating SVG hearts pattern + animated overlay */
.bg-romantic{opacity:0;background:linear-gradient(132deg,#341249,#8450c8 36%,#ff7db5 68%,#ffddec 100%);transition:opacity .9s ease}
.bg-romantic.active{opacity:1}
.bg-romantic::before{
  content:"";
  position:absolute;inset:0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 24 24'%3E%3Cpath fill='%23ff8db3' fill-opacity='0.16' d='M12 21s-7-4.35-9-7.01C-0.5 9.56 4.2 3.5 12 8.5c7.8-5 12.5 1.06 9 5.49C19 16.65 12 21 12 21z'/%3E%3C/svg%3E");
  background-size:60px 60px;
  opacity:0.55;
  animation:heartPatternDrift 20s linear infinite;
  mix-blend-mode:screen;
}
@keyframes heartPatternDrift{0%{transform:translate(0,0)}100%{transform:translate(-48px,-48px)}}
.bg-romantic .heart-particles{position:absolute;inset:0;pointer-events:none}

/* cinematic vignette */
.cinema{pointer-events:none;position:fixed;inset:0;z-index:22}
.cinema::before{content:"";position:absolute;inset:0;background:radial-gradient(circle at center, rgba(255,255,255,.03) 0%, rgba(0,0,0,0) 36%, rgba(0,0,0,.72) 100%);mix-blend-mode:overlay}

/* ===== Intro (cat) ===== */
.section{min-height:100vh;min-height:100dvh;padding:clamp(16px,3.9vw,28px);padding-top:max(clamp(16px,3.9vw,28px),var(--safe-top));display:flex;align-items:center;justify-content:center;position:relative}
#catFrame{position:relative;border-radius:22px;padding:10px;background:linear-gradient(180deg,#2b1f17,#14100d);box-shadow:0 40px 140px rgba(0,0,0,.65);border:5px solid rgba(255,255,255,.06);cursor:pointer;animation:catFloat 5.8s ease-in-out infinite;z-index:60;pointer-events:auto}
#catFrame::after{content:"";position:absolute;inset:8px;border-radius:16px;box-shadow:inset 0 22px 40px rgba(0,0,0,.22);pointer-events:none}
#cat{width:min(84vw,520px);aspect-ratio:3/4;object-fit:cover;border-radius:12px;display:block}
@keyframes catFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-9px)}}
.hint{margin-top:12px;font-size:14px;padding:8px 12px;background:rgba(0,0,0,.16);border-radius:999px;color:rgba(255,255,255,.9)}

/* ===== Story wrap & spoiler (animated veil) ===== */
.story-wrap{width:min(100%,940px);margin-top:6vh;padding:clamp(16px,4vw,30px);background:linear-gradient(180deg,rgba(10,11,16,.38),rgba(6,7,12,.3));border-radius:16px;box-shadow:0 28px 86px rgba(0,0,0,.64);backdrop-filter:blur(8px);font-family:'Merriweather',serif;color:#e8e8ee;font-size:clamp(16px,4.2vw,18px);line-height:1.7;position:relative;overflow:visible}
.story-par{margin-bottom:14px}

.spoiler{position:relative;display:inline-block;padding:12px 16px;border-radius:14px;background:linear-gradient(180deg,#0e1016,#08090e);cursor:pointer;overflow:visible}
.spoiler .line{position:relative;z-index:5;color:transparent;transition:color .45s ease, text-shadow .45s ease}
.spoiler .beer-word-btn{position:relative;z-index:7;background:transparent;border:0;padding:0;margin:0;color:transparent;font:inherit;font-weight:700;cursor:pointer;pointer-events:auto;text-decoration:none}
.spoiler .veil{position:absolute;inset:-8px;z-index:6;border-radius:14px;background:linear-gradient(120deg, rgba(24,26,34,0.88), rgba(8,10,12,0.98));backdrop-filter:blur(12px) saturate(.95);transition:transform .58s cubic-bezier(.2,.9,.3,1),opacity .58s,filter .58s;pointer-events:none}
.spoiler .veil::before{content:"";position:absolute;inset:0;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.005));mix-blend-mode:overlay;opacity:.07}
.spoiler .veil::after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 30%, rgba(255,255,255,.02), transparent 24%), radial-gradient(circle at 80% 70%, rgba(255,200,240,.01), transparent 28%);opacity:.6;filter:blur(8px);mix-blend-mode:screen;animation:veilShift 8s linear infinite}
@keyframes veilShift{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
.spoiler.open .veil{transform:translateY(-140%);opacity:0}
.spoiler.open .line{color:#fff;text-shadow:0 8px 30px rgba(0,0,0,0.6)}
.spoiler.open .beer-word-btn{color:#ffd166;text-decoration:underline}

/* ===== Beer physics visuals ===== */
#beerLayer{position:fixed;inset:0;z-index:62;pointer-events:none}
#beerSprite{position:absolute;left:50%;top:-420px;width:min(34vw,172px);transform:translateX(-50%) rotate(0deg);filter:drop-shadow(0 36px 96px rgba(0,0,0,.6));display:none;will-change:transform,left,top}
.puddle{position:absolute;left:50%;bottom:12vh;transform:translateX(-50%) scale(.2,.24);width:26px;height:12px;border-radius:999px;opacity:0;background:radial-gradient(ellipse at 40% 30%, #fff3c6 0%, #ffd98a 28%, #ba5f20 78%);filter:blur(1.8px);box-shadow:0 12px 32px rgba(0,0,0,.42),inset 0 -6px 14px rgba(100,60,20,.44),inset 0 6px 12px rgba(255,240,190,.22)}
.ripple{position:absolute;left:50%;bottom:12vh;transform:translateX(-50%) scale(.2);width:24px;height:10px;border-radius:50%;border:2px solid rgba(255,220,130,.85);opacity:0}
.splash{position:absolute;border-radius:50%;pointer-events:none;will-change:transform,opacity}
.foam{position:absolute;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,.94),rgba(255,255,255,0));pointer-events:none;z-index:64}
.page-shake{animation:pageShake .64s linear}
@keyframes pageShake{0%{transform:translate(0)}18%{transform:translate(-4px,3px)}36%{transform:translate(4px,-4px)}54%{transform:translate(-3px,2px)}72%{transform:translate(3px,-2px)}100%{transform:translate(0)}}

/* ===== Memes (romantic frames) ===== */
#memeLayer{position:fixed;inset:0;z-index:86;pointer-events:none}
.meme-frame{position:absolute;padding:8px;border-radius:12px;background:linear-gradient(180deg,#2a1e25,#180b12);border:6px solid rgba(255,95,155,0.12);box-shadow:0 30px 110px rgba(0,0,0,.5);overflow:hidden;cursor:pointer;pointer-events:auto;transform-origin:center;will-change:transform,opacity}
.meme-frame img{width:100%;height:100%;object-fit:cover;display:block;filter:contrast(1.06) saturate(1.08)}
.meme-frame .frame-vignette{position:absolute;inset:0;box-shadow:inset 0 24px 80px rgba(0,0,0,.45)}
.meme-frame.pink{border-color:rgba(255,95,155,0.28);box-shadow:0 36px 120px rgba(255,95,155,0.06)}

/* ===== Confession ===== */
.confession-wrap{width:100%;min-height:100dvh;display:flex;align-items:center;justify-content:center}
.confession-box{width:min(100%,960px);padding:34px 26px;border-radius:18px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));box-shadow:0 42px 160px rgba(0,0,0,.52);color:#ffeaf2;line-height:1.85;letter-spacing:.28px;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;min-height:min(72vh,840px)}
.confession-box::before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 36%, rgba(255,200,220,.06), transparent 22%);animation:confGlow 6.2s ease-in-out infinite;pointer-events:none}
@keyframes confGlow{0%,100%{opacity:.45;transform:scale(1)}50%{opacity:.82;transform:scale(1.02)}}
#confessionText{font-family:'Marck Script',cursive;font-size:clamp(28px,6.2vw,44px);position:relative;z-index:5;text-shadow:0 10px 30px rgba(120,30,60,0.18)}
#confessionText p{opacity:0;transform:translateY(10px);transition:.44s ease;margin:10px 0}
.confession-char{display:inline-block;white-space:pre;transform-origin:center bottom}
@keyframes charBounce{0%{transform:translateY(0)}35%{transform:translateY(-4px)}65%{transform:translateY(-1.8px)}100%{transform:translateY(0)}}
.breathing{animation:breathText 3.8s ease-in-out infinite}
@keyframes breathText{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-2.6px) scale(1.005)}}

/* heart button */
.heart-btn{font-size:60px;margin-top:18px;cursor:pointer;color:var(--accent-pink);text-shadow:0 10px 28px rgba(255,95,155,.36);animation:heartPulse 1.8s ease-in-out infinite;z-index:6}
@keyframes heartPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.12)}}
.heart-caption{margin-top:8px;font-size:13px;color:#ffd8e6;font-family:Montserrat,sans-serif}

/* film overlay */
.film-overlay{pointer-events:none;position:absolute;inset:0;z-index:4;mix-blend-mode:overlay;display:none}
.film-grain{position:absolute;inset:0;background-image:repeating-linear-gradient(0deg,rgba(0,0,0,.03) 0 1px,rgba(255,255,255,.01) 1px 2px);opacity:.16;animation:grainMove 1.2s steps(4) infinite}
.film-burn{position:absolute;inset:0;background:radial-gradient(circle at 18% 84%,rgba(255,130,80,.06),transparent 20%),radial-gradient(circle at 82% 8%,rgba(255,80,120,.05),transparent 18%);opacity:.5;animation:burnPulse 6.6s ease-in-out infinite}

/* video overlay */
#videoOverlay{position:fixed;inset:0;z-index:190;background:rgba(0,0,0,.94);display:none;align-items:center;justify-content:center;padding:max(14px,var(--safe-top)) max(14px,var(--safe-top))}
#videoOverlay video{width:94vw;max-width:900px;max-height:78vh;border-radius:12px;background:#000;box-shadow:0 22px 70px rgba(0,0,0,.6)}
.video-placeholder{display:flex;flex-direction:column;gap:10px;align-items:center;justify-content:center;width:min(92vw,520px);padding:20px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));text-align:center;line-height:1.4;color:var(--text)}

/* responsive for iPhone 14 Plus */
@media (max-width:430px){
  #cat{width:min(86vw,420px)}
  .story-wrap{font-size:17px}
  .meme-frame{width:clamp(140px,34vw,180px)}
  #confessionText{font-size:clamp(26px,7vw,38px)}
}
</style>
</head>
<body>
<div id="page">
  <!-- Backdrops -->
  <div class="bg-mystic" id="bgMystic">
    <div class="mist m1"></div><div class="mist m2"></div><div class="mist m3"></div><div class="grain"></div>
  </div>
  <div class="bg-romantic" id="bgRomantic"><div class="heart-particles" id="heartParticles"></div></div>
  <div class="cinema"></div>

  <!-- Intro: cat -->
  <section class="section" id="sectionIntro" aria-label="–ö–æ—Ç –ë—É—Å—è">
    <div style="display:flex;flex-direction:column;align-items:center;gap:12px">
      <div class="tap-target" id="catFrame" role="button" tabindex="0" aria-label="–ù–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞">
        <img id="cat" src="cat.jpg" alt="–∫–æ—Ç –ë—É—Å—è ‚Äî –Ω–∞–∂–º–∏" />
      </div>
      <div class="hint">–Ω–∞–∂–º–∏ –Ω–∞ –∫–æ—Ç–∏–∫–∞ üêæ</div>
    </div>
  </section>

  <!-- Story -->
  <section class="section" id="sectionStory" aria-label="–†–∞—Å—Å–∫–∞–∑">
    <div class="story-wrap" id="storyWrap" aria-live="polite">
      <p class="story-par">–û–¥–Ω–∞–∂–¥—ã —è —Å–∏–¥–µ–ª –∫–∞–∫ –Ω–∏ –≤ —á—ë–º –Ω–µ –±—ã–≤–∞–ª–æ –¥–æ–º–∞, —Å–ª—É—à–∞–ª –≥—Ä—É—Å—Ç–Ω—É—é –º—É–∑—ã–∫—É, —Å–º–æ—Ç—Ä–µ–ª –≤ –æ–∫–Ω–æ, –¥—É–º–∞–ª –æ —Å–≤–æ—ë–º —Ç–ª–µ–Ω–Ω–æ–º –±—É–¥—É—â–µ–º, –∫–∞–∫ –≤–¥—Ä—É–≥‚Ä¶ –∑–≤–æ–Ω–æ–∫ –≤ –¥–≤–µ—Ä—å. –Ø –æ–ø–µ—à–∏–ª, –≤–µ–¥—å –±—ã–ª–æ 3 —á–∞—Å–∞ –Ω–æ—á–∏, –∏ —è –Ω–∏–∫–æ–≥–æ –Ω–µ –∂–¥–∞–ª. –í —Ç–æ—Ç –¥–µ–Ω—å –æ—â—É—â–µ–Ω–∏—è –ø–æ–∏—Å—Ç–∏–Ω–µ –±—ã–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ. –ù–∞ –¥–≤–æ—Ä–µ —Å—Ç–æ—è–ª–∞ –ª—ë–≥–∫–∞—è –¥—ã–º–∫–∞, –∞ –Ω–∞ –Ω–µ–±–µ –æ—Ç—á—ë—Ç–ª–∏–≤–æ –≤–∏–¥–Ω–µ–ª–∞—Å—å —è—Ä–∫–∞—è –ø–æ–ª–Ω–∞—è –ª—É–Ω–∞, –ø—Ä—è–º–æ –∫–∞–∫ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî –º—Ä–∞—á–Ω–∞—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è. –ü–æ–≥–æ–¥–∞ –∑–∞ –æ–∫–Ω–æ–º –ª–∏—à—å –¥–æ–±–∞–≤–ª—è–ª–∞ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–º—É —Å–æ–±—ã—Ç–∏—é.</p>

      <p class="story-par">¬´–£ —Å–æ—Å–µ–¥–∞, –Ω–∞–≤–µ—Ä–Ω–æ–µ, —á—Ç–æ-—Ç–æ —Å—Ç—Ä—è—Å–ª–æ—Å—å¬ª, ‚Äî –ø–æ—á–µ—Å–∞–≤ —Ä–µ–ø—É, –ø–æ–¥—É–º–∞–ª —è. –ù–æ —á—É–≤—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥–∏ –∑–∞—Ç–º–∏–ª–æ –º–æ–π —Ä–∞—Å—Å—É–¥–æ–∫, –∏ —è –º–µ–¥–ª–µ–Ω–Ω–æ, —Ç–∏—Ö–∏–º —à–∞–≥–æ–º –ø–æ–¥–æ—à—ë–ª –∫ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏. –°—Ç–æ—è–ª–∞ –ø–æ–ª–Ω–µ–π—à–∞—è —Ç–∏—à–∏–Ω–∞. –Ø –ø—ã—Ç–∞–ª—Å—è –ø—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è –∫ –∑–≤—É–∫–∞–º –ø–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É –¥–≤–µ—Ä–∏, –Ω–æ –∏—Ö –Ω–µ –±—ã–ª–æ. –Ø —Å—Ç–æ—è–ª —Ç–∞–∫ –≥–¥–µ-—Ç–æ –º–∏–Ω—É—Ç—É, –Ω–æ –ø–æ –æ—â—É—â–µ–Ω–∏—è–º –æ–Ω–∞ –¥–ª–∏–ª–∞—Å—å —Ü–µ–ª—É—é –≤–µ—á–Ω–æ—Å—Ç—å. –í –≥–æ–ª–æ–≤–µ –±—ã–ª–∞ –ª–∏—à—å —Ä–∞—Å—Ç–µ—Ä—è–Ω–Ω–æ—Å—Ç—å –∏ —Å–º—è—Ç–µ–Ω–∏–µ.</p>

      <p class="story-par">–ö–∞–∫ –≤–¥—Ä—É–≥ —è —É—Å–ª—ã—à–∞–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —É–≤–µ—Ä–µ–Ω–Ω–æ –≤–æ–¥–∏–ª –Ω–æ–≥—Ç–µ–º –ø–æ —Å—Ç–∞–ª—å–Ω–æ–º—É –ª–∏—Å—Ç—É. –Ø —Å–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥—Å—è, –≤—Å—ë —Ç–µ–ª–æ —Å –≥–æ–ª–æ–≤—ã –¥–æ –Ω–æ–≥ –ø—Ä–æ–±—Ä–∞–ª–æ –º—É—Ä–∞—à–∫–∞–º–∏, —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Ä–µ–∑–∫–∏–π —Å–∫–∞—á–æ–∫ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞ ‚Äî —Ä–∞–∑—É–º —è–≤–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, —á—Ç–æ —á—Ç–æ-—Ç–æ —Ç—É—Ç –Ω–µ —Ç–∞–∫. –Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏, —Å—Ü–µ–ø–∏–≤ –∑—É–±—ã, –≤—ã–¥–∞–≤–∏–ª –∏–∑ —Å–µ–±—è: ‚ÄûWer ist da?‚Äú –ù–æ, –∫–∞–∫ —è –∏ –æ–∂–∏–¥–∞–ª, –æ—Ç–≤–µ—Ç–∞ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–æ. –õ–∏—à—å —ç—Ç–æ—Ç –¥–æ –¥—Ä–æ–∂–∏ –ø—Ä–æ—Ç–∏–≤–Ω—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–Ω–∏–∫–∞–ª –≤ –∫–∞–∂–¥—É—é –∫–ª–µ—Ç–æ—á–∫—É –º–æ–∑–≥–∞‚Ä¶ –û—â—É—â–∞–ª–æ—Å—å, –±—É–¥—Ç–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ, –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ —Å –∏–∑–¥—ë–≤–∫–æ–π –≤–æ–¥–∏—Ç –ø–æ –Ω–µ–º—É —Å–∫—Ä–∏–ø—É—á–µ–π –∂–µ–ª–µ–∑—è–∫–æ–π.</p>

      <p class="story-par">–ò –≤–¥—Ä—É–≥ ‚Äî —Ç–∏—à–∏–Ω–∞. –°–Ω–æ–≤–∞. –Ø –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –∫—Ç–æ –±—ã —Ç–æ –Ω–∏ –±—ã–ª –∑–∞ –¥–≤–µ—Ä—å—é, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ç–æ–∂–µ —É—Å–ª—ã—à–∞–ª, –∫–∞–∫ —è —Å—Ç–æ—é –∏ –º–æ–ª—á–∞ —Å–ª—É—à–∞—é, –≤–Ω–∏–º–∞—è —ç—Ç–æ—Ç –ø—Å–∏—Ö–æ–¥–µ–ª–∏—á–µ—Å–∫–∏–π —É–∂–∞—Å. –ì–¥–µ-—Ç–æ —Å–ø—É—Å—Ç—è —Å–µ–∫—É–Ω–¥ 20 —Ä–∞–∑–¥–∞–ª—Å—è –≥—Ä–æ–º–∫–∏–π –∂–µ–ª–µ–∑–Ω—ã–π –∑–≤—É–∫ ‚Äî –∑–≤—É–∫ –ø–∞–¥–µ–Ω–∏—è –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –º–æ–µ–π –≥—Ä—ë–±–∞–Ω–Ω–æ–π –¥–≤–µ—Ä—å—é. –Ø –Ω–∞–±—Ä–∞–ª—Å—è —Å–º–µ–ª–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Å–ª–æ–Ω–∏–ª —É—Ö–æ –∫ –¥–≤–µ—Ä–∏, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∂–µ —É–ø–∞–ª–æ... –∏ —á—Ç–æ, —á—ë—Ä—Ç –≤–æ–∑—å–º–∏, —Ç—É—Ç –≤–æ–æ–±—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.</p>

      <p class="story-par">–ö–∞–∫ –≤–¥—Ä—É–≥, –∫–∞–∫ –≥—Ä–æ–º —Å—Ä–µ–¥–∏ —è—Å–Ω–æ–≥–æ –¥–Ω—è, –∫–∞–∫ —Å–Ω–µ–≥ –≤ –∏—é–ª–µ, —è —É—Å–ª—ã—à–∞–ª –Ω–µ–∂–Ω—ã–π, –º–∏–ª—ã–π –∏ –¥–æ –±–æ–ª–∏ –∑–Ω–∞–∫–æ–º—ã–π –∂–µ–Ω—Å–∫–∏–π –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–∑–Ω—ë—Å:</p>

      <!-- Spoiler -->
      <div class="spoiler tap-target" id="finalSpoiler" role="button" tabindex="0" aria-pressed="false" aria-label="–û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω—á–ª–∞–π–Ω">
        <div class="veil" aria-hidden="true"></div>
        <div class="line">‚Äî –û–π, –∏–∑–≤–∏–Ω–∏, —É –º–µ–Ω—è <button class="beer-word-btn tap-target" id="beerWord" type="button" aria-label="–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞–¥–µ–Ω–∏–µ –ø–∏–≤–∞">–ø–∏–≤–æ</button> —É–ø–∞–ª–æ.</div>
      </div>
    </div>
  </section>

  <!-- Memes section (visual layer) -->
  <section class="section" id="sectionMemes" aria-label="–ú–µ–º—ã">
    <div id="memeLayer" aria-hidden="true"></div>
  </section>

  <!-- Confession -->
  <section class="section" id="sectionLove" aria-label="–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ">
    <div class="confession-wrap">
      <div class="confession-box" id="confessionBox" role="dialog" aria-label="–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ">
        <div class="film-overlay" id="filmOverlay" aria-hidden="true"><div class="film-grain"></div><div class="film-burn"></div></div>
        <div id="confessionText" aria-live="polite">
          –±—É—Å—è, –∫–æ—Ç–∏–∫, —è –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —Ç–æ–±–æ–π –ª–∏—à—å –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥, –Ω–æ –≤–æ –º–Ω–µ —Ç–µ–ø–ª–∏—Ç—Å—è —á—É–≤—Å—Ç–≤–æ, –±—É–¥—Ç–æ —è –∑–Ω–∞–ª —Ç–µ–±—è –≤–æ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω—è—Ö, –≤–µ–¥—å –±–æ–ª–µ–µ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç—á–∞ –Ω–∞ –∑–µ–º–ª–µ –µ—â–µ –Ω–µ –±—ã–ª–æ. –∏ –Ω–µ –±—É–¥–µ—Ç. —Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—Ä–∏—à—å –º–Ω–µ —Ç—É —Å–∞–º—É—é —Ä–∞–¥–æ—Å—Ç—å –∏ —É–ª—ã–±–∫—É, –∫–æ—Ç–æ—Ä—ã—Ö —É –º–µ–Ω—è –æ—á–µ–Ω—å –¥–∞–≤–Ω–æ –Ω–µ –±—ã–ª–æ. –ø–æ–ª–≥–æ–¥–∞ –Ω–∞–∑–∞–¥ —è –∏ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ —Å–º–æ–≥—É –ø–æ–ª—é–±–∏—Ç—å –∫–æ–≥–æ-—Ç–æ —Ç–∞–∫ —Å–∏–ª—å–Ω–æ –∫–∞–∫ —Ç–µ–±—è. –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∂–¥—É –Ω–∞—à–µ–π –≤—Å—Ç—Ä–µ—á–∏, —è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ü–µ–ª—É—é —Ç–µ–±—è –ø–æ–¥ –ø—Ä–∏–ø–µ–≤ —ç—Ç–æ–π –ø–µ—Å–Ω–∏
        </div>
        <div class="heart-btn tap-target" id="heartBtn" role="button" tabindex="0" aria-label="–ù–∞–∂–∞—Ç—å —Å–µ—Ä–¥–µ—á–∫–æ">üíò</div>
        <div class="heart-caption">—Å–µ—Ä–¥–µ—á–∫–æ —Ç—ã–∫</div>
      </div>
    </div>
  </section>

  <!-- Beer visuals -->
  <div id="beerLayer" aria-hidden="true"><img id="beerSprite" src="beer.png" alt="–±–∞–Ω–∫–∞ Desperados" /><div class="puddle" id="puddle"></div><div class="ripple" id="ripple"></div></div>

  <!-- Video overlay -->
  <div id="videoOverlay" aria-hidden="true">
    <video id="secretVideo" src="video.mp4" controls playsinline webkit-playsinline preload="metadata" style="display:none"></video>
    <div class="video-placeholder" id="videoPlaceholder" role="status" aria-live="polite" style="display:flex;">
      <div style="font-size:44px">üé¨</div>
      <div>–í–∏–¥–µ–æ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –∑–¥–µ—Å—å.</div>
      <div style="opacity:.78;font-size:13px;margin-top:6px">–ü–æ–∫–∞ —á—Ç–æ –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ–∏–Ω–∞–ª–∞ üíù</div>
    </div>
  </div>

  <!-- Audio (place files in repo root) -->
  <audio id="darkMusic" src="dark.mp3" preload="auto"></audio>
  <audio id="loveMusic" src="love.mp3" preload="auto"></audio>
</div>

<script>
/* ===== Basic helpers & DOM refs ===== */
const $ = s => document.querySelector(s)
const $$ = s => Array.from(document.querySelectorAll(s))

const catFrame = $('#catFrame')
const sectionStory = $('#sectionStory')
const storyWrap = $('#storyWrap')
const finalSpoiler = $('#finalSpoiler')
const beerWord = $('#beerWord')
const beerSprite = $('#beerSprite')
const beerLayer = $('#beerLayer')
const puddle = $('#puddle')
const ripple = $('#ripple')
const memeLayer = $('#memeLayer')
const bgMystic = $('#bgMystic')
const bgRomantic = $('#bgRomantic')
const heartParticles = $('#heartParticles')
const confessionBox = $('#confessionBox')
const confessionText = $('#confessionText')
const filmOverlay = $('#filmOverlay')
const heartBtn = $('#heartBtn')
const videoOverlay = $('#videoOverlay')
const secretVideo = $('#secretVideo')
const videoPlaceholder = $('#videoPlaceholder')
const darkMusic = $('#darkMusic')
const loveMusic = $('#loveMusic')

let beerStarted = false, romanceStarted = false, audioUnlocked = false, puddleCleanupTimer = null

/* viewport fix for mobile */
function syncVH(){ const vh = (window.visualViewport?.height || window.innerHeight)*0.01; document.documentElement.style.setProperty('--vh', `${vh}px`) }
syncVH(); window.addEventListener('resize', syncVH, {passive:true}); window.addEventListener('orientationchange', syncVH, {passive:true})

/* audio unlock on first gesture so we can play later */
function unlockAudio(){ if(audioUnlocked) return; audioUnlocked = true; darkMusic.volume = 0; loveMusic.volume = 0; darkMusic.play().then(()=>darkMusic.pause()).catch(()=>{}); loveMusic.play().then(()=>loveMusic.pause()).catch(()=>{})}
window.addEventListener('touchstart', unlockAudio, {once:true,passive:true}); window.addEventListener('click', unlockAudio, {once:true})

/* fade helper */
function fadeTo(audio, target=0.2, ms=900){
  const start = audio.volume || 0; const t0 = performance.now()
  function tick(now){ const k = Math.min(1, (now - t0) / ms); audio.volume = start + (target - start) * k; if(k < 1) requestAnimationFrame(tick) }
  requestAnimationFrame(tick)
}
function playWithFade(audio, target=0.18, ms=900){ try{ audio.volume=0; audio.currentTime=0; audio.play().catch(()=>{}); fadeTo(audio,target,ms) }catch(e){} }

/* ===== open story (explicit on cat click) ===== */
function openStory(){ sectionStory.scrollIntoView({behavior:'smooth', block:'start'}); playWithFade(darkMusic, 0.18, 900) }
catFrame.addEventListener('click', openStory)
catFrame.addEventListener('keydown', e => { if(e.key==='Enter'||e.key===' '){ e.preventDefault(); openStory() }})

/* ===== spoiler: animated veil + reveal ===== */
function revealSpoiler(){ if(finalSpoiler.classList.contains('open')) return; finalSpoiler.classList.add('open'); finalSpoiler.setAttribute('aria-pressed','true') }
finalSpoiler.addEventListener('click', e => { if(e.target.closest('#beerWord')) return; revealSpoiler() })
finalSpoiler.addEventListener('keydown', e => { if(e.key==='Enter'||e.key===' '){ e.preventDefault(); revealSpoiler() }})

/* ===== beer effects (improved) ===== */
function spawnSplash(x,y){
  const count = 36
  for(let i=0;i<count;i++){
    const d = document.createElement('div'); d.className='splash'
    const size = (i<4 ? 16+Math.random()*18 : 6+Math.random()*12)
    d.style.width = d.style.height = `${size}px`
    d.style.left = `${x - size/2}px`; d.style.top = `${y - size/2}px`
    d.style.zIndex = 72 + (Math.random()>0.6?2:0)
    d.style.background = 'radial-gradient(circle, rgba(255,240,160,.98), rgba(255,190,80,.8) 54%, rgba(255,150,50,0) 100%)'
    const dx = (Math.random()*420)-210; const dy = -(90 + Math.random()*180)
    const rot = Math.random()*360-180; const dur = 900 + Math.random()*600
    d.animate([{transform:'translate(0,0) scale(.6)',opacity:1},{transform:`translate(${dx}px, ${dy}px) rotate(${rot}deg) scale(1)`,opacity:1},{transform:`translate(${dx*1.15}px, ${dy+250}px) rotate(${rot*1.08}deg) scale(.32)`,opacity:0}],{duration:dur,easing:'cubic-bezier(.2,.9,.2,1)',fill:'forwards'})
    document.body.appendChild(d); setTimeout(()=>d.remove(), dur+80)
  }
}
function spawnFoam(x,y){
  const n=9+Math.floor(Math.random()*6)
  for(let i=0;i<n;i++){ const f=document.createElement('div'); f.className='foam'; const size=3+Math.random()*10; f.style.width=f.style.height=`${size}px`; f.style.left=`${x + (Math.random()*90-45)}px`; f.style.top=`${y + (Math.random()*26-12)}px`; const dur=1000+Math.random()*900; f.animate([{transform:'translateY(0)',opacity:.86},{transform:`translateY(${-18-Math.random()*34}px)`,opacity:0}],{duration:dur,easing:'ease-out',fill:'forwards'}); document.body.appendChild(f); setTimeout(()=>f.remove(), dur+80) }
}
function shakePage(){ document.body.classList.add('page-shake'); if(navigator.vibrate) navigator.vibrate([90,30,80]); setTimeout(()=>document.body.classList.remove('page-shake'),700) }
function cleanupPuddleLater(){ if(puddleCleanupTimer) clearTimeout(puddleCleanupTimer); puddleCleanupTimer = setTimeout(()=>{ puddle.animate([{opacity:1, transform:'translateX(-50%) scale(1,.76) rotateX(16deg)'},{opacity:0, transform:'translateX(-50%) scale(.62,.2) translateY(6px) rotateX(16deg)'}],{duration:1100,easing:'ease-in-out',fill:'forwards'}); setTimeout(()=>{puddle.style.display='none'},1150) }, 3800 + Math.random()*900) }

function beerAnimation(){
  if(beerStarted) return; beerStarted = true
  revealSpoiler()
  playWithFade(darkMusic, 0.16, 700)
  beerSprite.style.display = 'block'
  let state = { x: window.innerWidth*(0.46 + Math.random()*0.08), y: -(260 + Math.random()*70), vx:(Math.random()*360-180), vy:0, angle: Math.random()*44-22, av: Math.random()*640-320 }
  const gravity = 3200, drag = 0.997, floorY = Math.round(window.innerHeight * 0.69), fixedDt = 1/120
  let prev = performance.now(), acc = 0, bounces = 0

  function step(){
    state.vy += gravity * fixedDt
    state.vx *= drag
    state.x += state.vx * fixedDt
    state.y += state.vy * fixedDt
    state.angle += state.av * fixedDt
    state.av *= 0.995
    if(state.y >= floorY){
      state.y = floorY
      if(bounces < 2){ state.vy *= -(0.32 + Math.random()*0.14); state.vx *= 0.72; state.av *= -0.44; bounces++ }
      else { state.vy = 0; state.vx *= 0.94; state.av *= 0.92; state.angle *= 0.985 }
    }
  }
  function render(){ beerSprite.style.left = `${state.x}px`; beerSprite.style.top = `${state.y}px`; beerSprite.style.transform = `translateX(-50%) rotate(${state.angle}deg)` }

  function loop(now){
    let dt = (now - prev)/1000; if(dt > .05) dt = .05; prev = now; acc += dt
    while(acc >= fixedDt){ step(); acc -= fixedDt }
    render()
    if(!(bounces >= 2 && Math.abs(state.vy) < 18 && state.y >= floorY)) requestAnimationFrame(loop)
    else {
      shakePage(); spawnSplash(state.x, floorY + 30); spawnFoam(state.x, floorY + 22)
      const maxW = Math.max(360, Math.min(window.innerWidth * 0.72, 900))
      const maxH = Math.max(64, Math.min(window.innerWidth*0.145, 100))
      puddle.style.display = 'block'
      puddle.animate([{opacity:0,width:'24px',height:'10px',transform:'translateX(-50%) scale(.22,.24) rotateX(16deg)'},{opacity:1,width:`${maxW}px`,height:`${maxH}px`,transform:'translateX(-50%) scale(1,.78) rotateX(16deg)'}],{duration:980,easing:'cubic-bezier(.2,.8,.2,1)',fill:'forwards'})
      ripple.animate([{opacity:.9,width:'26px',height:'10px',transform:'translateX(-50%) scale(.2)'},{opacity:0,width:'420px',height:'110px',transform:'translateX(-50%) scale(1)'}],{duration:940,easing:'ease-out',fill:'forwards'})
      cleanupPuddleLater()
      // show romance visuals and memes AFTER impact, but DO NOT auto-scroll
      setTimeout(()=>{ startRomance() }, 1300)
    }
  }
  requestAnimationFrame(loop)
}

/* attach beer trigger (only user interaction) */
beerWord.addEventListener('click', (e)=>{ e.stopPropagation(); beerAnimation() })
beerWord.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); beerAnimation() }})

/* ===== romantic hearts particle spawn (for bg) ===== */
function spawnHearts(num=30){
  heartParticles.innerHTML = ''
  for(let i=0;i<num;i++){
    const el = document.createElement('div'); el.textContent='‚ù§'; el.style.position='absolute'
    el.style.left = `${6 + Math.random()*86}%`; el.style.top = `${70 + Math.random()*26}%`
    el.style.fontSize = `${10 + Math.random()*28}px`; el.style.opacity='0'
    el.style.color = `rgba(255,${160 + Math.round(Math.random()*80)},${185 + Math.round(Math.random()*60)},0.9)`
    heartParticles.appendChild(el)
    const dx = Math.random()*110 - 55, dy = 70 + Math.random()*120, rot = Math.random()*360 - 180
    const dur = 3000 + Math.random()*1600
    el.animate([{transform:'translate(0,0) rotate(0deg)',opacity:0},{transform:`translate(${dx}px,-${dy}px) rotate(${rot}deg)`,opacity:1},{transform:`translate(${dx*1.2}px,-${dy*1.3}px) rotate(${rot*1.1}deg)`,opacity:0}],{duration:dur,easing:'cubic-bezier(.2,.8,.2,1)',fill:'forwards'})
    setTimeout(()=>el.remove(), dur + 260)
  }
}

/* ===== create many memes with size variance & repulsion ===== */
function createMemes(count=20){
  memeLayer.innerHTML = ''; memeLayer.style.pointerEvents = 'auto'
  const memes = []
  for(let i=0;i<count;i++){
    const el = document.createElement('div'); el.className = 'meme-frame pink'
    const size = 110 + Math.random()*320
    el.style.width = `${size}px`; el.style.height = `${size}px`
    el.style.left = `${4 + Math.random()*86}%`; el.style.top = `${4 + Math.random()*86}%`
    const img = document.createElement('img'); img.src='meme.png'; img.alt='–º–µ–º'
    el.appendChild(img); memeLayer.appendChild(el)
    memes.push({el, size, left:parseFloat(el.style.left), top:parseFloat(el.style.top), vx:(Math.random()*240-120), vy:(Math.random()*240-120)})
  }

  // small repulsion algorithm to spread memes apart on spawn
  function resolve(){
    for(let iter=0; iter<6; iter++){
      for(let a=0; a<memes.length; a++){
        for(let b=a+1; b<memes.length; b++){
          const A = memes[a], B = memes[b]
          const aRect = A.el.getBoundingClientRect(), bRect = B.el.getBoundingClientRect()
          const ax = aRect.left + aRect.width/2, ay = aRect.top + aRect.height/2
          const bx = bRect.left + bRect.width/2, by = bRect.top + bRect.height/2
          const dx = ax - bx, dy = ay - by
          const dist = Math.sqrt(dx*dx + dy*dy) || 1
          const min = (aRect.width + bRect.width) * 0.5 * 0.85
          if(dist < min){
            const push = (min - dist) * 0.5
            const nx = dx/dist, ny = dy/dist
            const pushXper = (nx * push) / window.innerWidth * 100
            const pushYper = (ny * push) / window.innerHeight * 100
            A.left = clamp(A.left + pushXper, 2, 92); A.top = clamp(A.top + pushYper, 2, 92)
            B.left = clamp(B.left - pushXper, 2, 92); B.top = clamp(B.top - pushYper, 2, 92)
          }
        }
      }
    }
    // apply transform animations & attach click
    memes.forEach(m => {
      m.el.style.left = `${m.left}%`; m.el.style.top = `${m.top}%`
      const dur = 1800 + Math.random()*4200
      const rx = (Math.random()*36-18), ry = (Math.random()*36-18), rz = (Math.random()*40-20)
      m.el.animate([
        {transform:`translate3d(0,0,0) rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg)`},
        {transform:`translate3d(${(m.vx*0.04).toFixed(1)}px,${(m.vy*0.03 - 20).toFixed(1)}px,0) rotateX(${(rx*1.05).toFixed(1)}deg) rotateY(${(ry*1.05).toFixed(1)}deg) rotateZ(${(rz+8).toFixed(1)}deg)`},
        {transform:`translate3d(${(-m.vx*0.03).toFixed(1)}px,${(-m.vy*0.02).toFixed(1)}px,0) rotateX(${(rx*0.85).toFixed(1)}deg) rotateY(${(ry*0.85).toFixed(1)}deg) rotateZ(${(rz-6).toFixed(1)}deg)`},
        {transform:`translate3d(0,0,0) rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg)`}
      ], {duration:dur, iterations:Infinity, easing:'ease-in-out'})
      m.el.addEventListener('click', ()=>{
        $$('.meme-frame').forEach(fr => { if(fr !== m.el) fr.classList.add('fade-out') })
        setTimeout(()=>{ memeLayer.innerHTML=''; showConfession() }, 420)
      }, {once:true})
    })
  }
  setTimeout(resolve, 80)
}

/* clamp */
function clamp(v,a,b){ return Math.max(a, Math.min(b, v)) }

/* ===== music crossfade ===== */
function crossToLoveMusic(){
  const from = darkMusic, to = loveMusic
  to.currentTime = 0; to.volume = 0; to.play().catch(()=>{})
  const fromStart = from.volume || 0.16; const t0 = performance.now(); const ms = 1400
  function step(now){ const k = Math.min(1,(now - t0)/ms); from.volume = fromStart*(1-k); to.volume = 0.22*k; if(k < 1) requestAnimationFrame(step); else { try{ from.pause(); from.currentTime = 0 }catch(e){} } }
  requestAnimationFrame(step)
}

/* ===== start romance (called after beer impact) =====
   NOTE: do NOT auto-scroll here ‚Äî user stays where they are and sees memes appear.
*/
function startRomance(){
  if(romanceStarted) return; romanceStarted = true
  storyWrap.classList.add('fade-out'); beerLayer.classList.add('fade-out')
  setTimeout(()=>{ storyWrap.style.visibility='hidden'; beerLayer.style.display='none' }, 520)
  bgMystic.style.opacity = 0.06; bgRomantic.classList.add('active')
  spawnHearts(28); crossToLoveMusic(); createMemes(20)
  // no auto-scroll ‚Äî user controls navigation (swipe / scroll)
}

/* ===== confession rendering (preserve spaces) ===== */
function animateConfessionText(){
  const raw = confessionText.textContent.trim()
  const segments = raw.match(/[^.!?]+[.!?]?/g)?.map(s=>s.trim()).filter(Boolean) || [raw]
  confessionText.innerHTML = ''
  segments.forEach((line, li)=>{
    const p = document.createElement('p')
    for(let i=0;i<line.length;i++){
      const ch = line[i]; const span = document.createElement('span'); span.className='confession-char'
      span.textContent = (ch === ' ') ? '\u00A0' : ch
      const delay = (li*0.22) + (i*0.014) + Math.random()*0.03
      const dur = 1.35 + Math.random()*0.22
      span.style.animation = `charBounce ${dur}s ease-in-out ${delay}s infinite`
      p.appendChild(span)
    }
    confessionText.appendChild(p)
    setTimeout(()=>{ p.style.opacity = '1'; p.style.transform = 'translateY(0)' }, 280 + li*260)
  })
  confessionBox.classList.add('breathing')
}

/* show confession (centers and animates) */
function showConfession(){ bgRomantic.classList.add('active'); spawnHearts(34); filmOverlay.style.display='block'; animateConfessionText(); sectionLove.scrollIntoView({behavior:'smooth', block:'center'}) }

/* heart -> open video overlay (show placeholder if file missing) */
function openVideoOverlay(){
  videoOverlay.style.display = 'flex'; videoOverlay.setAttribute('aria-hidden','false')
  // try to play video; if not ready, show placeholder
  secretVideo.style.display = 'block'; secretVideo.volume = 0.8
  const p = secretVideo.play()
  p && p.catch(()=>{ secretVideo.style.display='none'; videoPlaceholder.style.display='flex' })
}
heartBtn.addEventListener('click', openVideoOverlay)
heartBtn.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); openVideoOverlay() }})

/* close overlay on background click */
videoOverlay.addEventListener('click', (e)=>{ if(e.target === videoOverlay){ videoOverlay.style.display='none'; videoOverlay.setAttribute('aria-hidden','true'); try{ secretVideo.pause() }catch(e){} } })

/* accessibility: keyboard to open beer */
beerWord.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); beerAnimation() }})

/* debug helpers (optional) */
// window._debug = { beerAnimation, createMemes, showConfession, spawnHearts }

</script>
</body>
</html>
